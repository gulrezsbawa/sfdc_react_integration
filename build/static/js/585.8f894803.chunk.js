"use strict";(self.webpackChunk_jifflenow_selfserve=self.webpackChunk_jifflenow_selfserve||[]).push([[585],{17585:function(e,t,a){a.r(t),a.d(t,{Surveys:function(){return Jt},default:function(){return Jt}});var n={};a.r(n),a.d(n,{PAGE_SIZE:function(){return ct},columnDefs:function(){return vt},columnHeaderNames:function(){return dt}});var r=a(54415),s=a(33028),i=a(96234),l=a(30969),o=a(45271),u=a(70104),c=a(67560),d=a.n(c),v=a(55976),p=a(57579),y=a(37574),g={sortBy:"label",sortOrder:"ASC"},f=(0,l.createContext)(null),m="surveyPreferences",h=function(e){var t=e.children,a=e.preferences,n=e.patchPreferences,r=(0,l.useMemo)((function(){return{preferences:a,patchPreferences:n}}),[a,n]);return(0,y.jsx)(f.Provider,{value:r,children:t})},x=function(e){var t=(0,o.UO)().eventName,a=new URLSearchParams(window.location.search).get("location"),n=(0,v.useSurveyPreferences)((0,s.Z)((0,s.Z)({},e),{},{subSystem:t,locationId:a}));return(0,y.jsxs)(y.Fragment,{children:[!n.isSettled&&(0,y.jsx)(u.A,{}),(0,y.jsx)(v.IfRejected,{state:n,children:function(){return(0,y.jsx)(p.m,{onButtonClick:n.reload})}})]})},b=function(e){var t=e.children,a=function(){var e=(0,o.UO)().eventName,t=new URLSearchParams(window.location.search).get("location"),a=(0,l.useState)({}),n=(0,i.Z)(a,2),r=n[0],u=n[1];return(0,l.useEffect)((function(){var e=function(e){e.key===m&&u(JSON.parse(e.newValue||"{}"))};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}}),[u]),{preferences:r,initPreferences:function(e){var t=(0,s.Z)((0,s.Z)({},g),e.data);u(t),window.localStorage.setItem(m,JSON.stringify(t))},patchPreferences:function(a){var n=d()(r,a,{arrayMerge:function(e,t){return t}});u(n),(0,v.patchSurveyPreferences)({payload:{data:a},subSystem:e,locationId:t}).then((function(){return window.localStorage.setItem(m,JSON.stringify(n))}))}}}(),n=a.preferences,r=a.initPreferences,u=a.patchPreferences;return 0===Object.keys(n).length?(0,y.jsx)(x,{onResolve:r}):(0,y.jsx)(h,{preferences:n,patchPreferences:u,children:t})},j=function(){var e=(0,l.useContext)(f);return e},S=a(48463),C=a(65470),M=a(65944),Z=a(92778),L=a(55819),z=a(21809),T=a(59740),E=a(27690),w=a(83055),k=a(32723),P=a(56666),I=a(34795),N=a(44584),O=a(65903),A=a(91139),B=a(6167),R=a(55364),D=a(35207),U=a(57106),F=a(71663),$=a(71246),V=a(92683),W=a(9930),Y=a(56147),H=(0,W.zo)(Y.N,(function(e){return{marginBottom:e.$theme.sizing.scale800}})),J=(0,W.zo)("span",(function(e){var t=e.$theme,a=t.colors,n=t.typography,r=e.$bold;return(0,s.Z)((0,s.Z)({},r?n.Subtitle1:n.Paragraph1),{},{color:a.mono900})})),X=(0,W.zo)("div",(function(e){var t=e.$error,a=e.$theme.sizing;return{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:t?a.scale100:a.scale650,paddingBottom:a.scale650}})),G=(0,W.zo)("div",(function(e){var t=e.$theme,a=t.colors,n=t.sizing,r=t.typography;return(0,s.Z)((0,s.Z)({},r.LabelSmall),{},{color:a.negative700,marginTop:n.scale100})})),Q=(0,W.zo)("div",(function(e){var t=e.$theme.sizing;return{marginRight:t.scale400,marginLeft:t.scale400}})),_=(0,R.vU)({surveyLabel:{id:"nG0MYp",defaultMessage:[{type:0,value:"Name of the survey"}]}}),q=function(e){var t=e.label,a=(0,D.Z)().formatMessage;return(0,y.jsx)($.g,{name:"name",type:"text",validations:[$.i.REQUIRED],render:function(e){var n=e.input,r=e.meta;return(0,y.jsx)(H,{label:t,error:(r.dirty||r.touched)&&r.error,children:(0,y.jsx)(V.II,(0,s.Z)((0,s.Z)({},n),{},{id:"name",autoComplete:"off",placeholder:a(_.surveyLabel)}))})}})},K=a(52850),ee=a(33179),te=a(44012),ae=(0,R.vU)({surveyLabel:{id:"Jh5U41",defaultMessage:[{type:0,value:"Survey for"}]},surveySearchPlaceholder:{id:"AkUY7s",defaultMessage:[{type:0,value:"Search by name"}]},meeting:{id:"UYn0qv",defaultMessage:[{type:0,value:"Meeting"}]},briefing:{id:"dimPIZ",defaultMessage:[{type:0,value:"Briefing"}]},session:{id:"8rZDjo",defaultMessage:[{type:0,value:"Session"}]}}),ne=function(e){var t=e.input,a=e.meta,n=a.touched,r=a.error,i=e.disabled,l=(0,D.Z)().formatMessage,o=((0,ee.Zn)().configs||{}).track_and_session,u=[{id:te.pi.Activity,label:l(ae.meeting)},o&&{id:te.pi.Session,label:l(ae.session)}].filter(Boolean),c=u.filter((function(e){return e.id===t.value}));return(0,y.jsx)(H,{label:l(ae.surveyLabel),error:n&&r,children:(0,y.jsx)(K.Ph,(0,s.Z)((0,s.Z)({},t),{},{clearable:!1,id:"entityMasterName",value:c,options:u,backspaceClearsInputValue:!0,searchable:!0,placeholder:l(ae.surveyLabel),onChange:function(e){var a=e.value;return t.onChange(a[0].id)},required:!0,disabled:i}))})},re=function(e){var t=e.isDisabled;return(0,y.jsx)($.g,{name:"entityMasterName",render:ne,validations:[$.i.REQUIRED],disabled:t})},se=(0,R.vU)({surveyExecutionTypeLabel:{id:"IFYRAW",defaultMessage:[{type:0,value:"When to collect survey responses"}]},surveyExecutionTypeSearchPlaceholder:{id:"AkUY7s",defaultMessage:[{type:0,value:"Search by name"}]},postMeeting:{id:"WWjxkr",defaultMessage:[{type:0,value:"Post-Meeting"}]},postSession:{id:"OR2Izi",defaultMessage:[{type:0,value:"Post-Session"}]},preSession:{id:"l1Oy/S",defaultMessage:[{type:0,value:"Pre-Session"}]}}),ie=function(e){var t=e.input,a=e.meta,n=a.touched,r=a.error,o=e.label,u=e.entityMasterName,c=e.disabled,d=(0,D.Z)().formatMessage,v=(0,l.useState)([]),p=(0,i.Z)(v,2),g=p[0],f=p[1],m=(0,l.useMemo)((function(){return u===te.pi.Activity?[{id:te.PC.post,label:d(se.postMeeting)}]:[{id:te.PC.pre,label:d(se.preSession)},{id:te.PC.post,label:d(se.postSession)}]}),[d,u]);(0,l.useEffect)((function(){c?f(m.filter((function(e){return t.value===e.id}))):u===te.pi.Activity?(f(m),t.onChange(m[0].id)):(f([]),t.onChange(void 0))}),[m,u]);return(0,y.jsx)(H,{label:o,error:n&&r,children:(0,y.jsx)(K.Ph,(0,s.Z)((0,s.Z)({},t),{},{id:"executionType",clearable:!1,value:g,options:m,backspaceClearsInputValue:!0,searchable:!0,onChange:function(e){return function(e){f(e),t.onChange(e[0].id)}(e.value)},disabled:c||!u}))})},le=function(e){var t=e.entityMasterName,a=e.isDisabled,n=(0,D.Z)().formatMessage;return(0,y.jsx)($.g,{name:"executionType",label:n(se.surveyExecutionTypeLabel),render:ie,entityMasterName:t,validations:[$.i.REQUIRED],disabled:a})},oe=(0,R.vU)({engagementTypesForSurveyLabel:{id:"t6kITR",defaultMessage:[{type:0,value:"Enable this survey for engagement types"}]},engagementTypeForSurveySearchPlaceholder:{id:"mhz0eD",defaultMessage:[{type:0,value:"Select meeting by name"}]},engagementTypesForSurveyCaption:{id:"NoZpKZ",defaultMessage:[{type:0,value:"Go to respective engagement settings to edit survey settings"}]}}),ue=function(e){var t=e.input,a=e.meta,n=a.touched,r=a.error,i=e.entityMasterName,o=(0,D.Z)().formatMessage,u=(0,S.yI)({skip:!i,variables:(0,s.Z)((0,s.Z)({},i===te.pi.Activity&&{showOnlyGeneralEngagementTypes:!0}),i===te.pi.Session&&{showOnlySessionEngagementTypes:!0})}).fetchEngagementTypes,c=(0,l.useMemo)((function(){var e;return(null!==(e=null===u||void 0===u?void 0:u.map((function(e){return{id:e.uuid,label:e.name,displayOrder:e.displayOrder}})))&&void 0!==e?e:[]).sort((function(e,t){return e.displayOrder-t.displayOrder}))}),[u]);return(0,y.jsx)(H,{label:o(oe.engagementTypesForSurveyLabel),caption:o(oe.engagementTypesForSurveyCaption),error:n&&r,children:(0,y.jsx)(K.Ph,(0,s.Z)((0,s.Z)({},t),{},{id:"engagementTypeForSurvey",multi:!0,options:c,backspaceClearsInputValue:!0,searchable:!0,placeholder:o(oe.engagementTypeForSurveySearchPlaceholder),onChange:function(e){var a=e.value;return t.onChange(a)},disabled:!i}))})},ce=function(e){var t=e.entityMasterName;return(0,y.jsx)($.g,{name:"engagementTypeForSurvey",format:function(e){return null!==e&&void 0!==e?e:[]},parse:function(e){return null!==e&&void 0!==e&&e.length?e:void 0},render:ue,entityMasterName:t})},de=a(67475),ve=(0,R.vU)({companyLogoLabel:{id:"VmRC1Y",defaultMessage:[{type:0,value:"Do you want to display company logo on the survey page?"}]}}),pe=function(){var e=(0,D.Z)().formatMessage;return(0,y.jsx)(N.gN,{name:"displayLogo",render:function(t){var a=t.input,n=a.value,r=a.onChange,s=t.meta,i=s.error,l=s.submitError;return(0,y.jsxs)(y.Fragment,{children:[(l||i)&&(0,y.jsx)(G,{children:l||i}),(0,y.jsxs)(X,{$error:l||i,children:[(0,y.jsx)(J,{children:e(ve.companyLogoLabel)}),(0,y.jsx)(Q,{children:(0,y.jsx)(de.Z,{name:"displayLogo",ariaLabel:e(ve.companyLogoLabel),checked:n,onChange:function(e){return r(e.target.checked)}})})]})]})}})},ye=a(63056),ge=a(8967),fe=(0,W.zo)("div",(function(e){return{padding:e.$theme.sizing.scale800}})),me=(0,W.zo)(ge.zx,{minWidth:"128px"}),he=(0,W.zo)("div",{width:"100%",maxWidth:"280px"}),xe=(0,W.zo)("div",(function(e){var t=e.$error,a=e.$theme.sizing;return{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:t?a.scale100:a.scale650,paddingBottom:a.scale650}})),be=(0,W.zo)("div",(function(e){var t=e.$theme,a=t.colors,n=t.sizing,r=t.typography;return(0,s.Z)((0,s.Z)({},r.LabelSmall),{},{color:a.negative700,marginTop:n.scale100})})),je=(0,W.zo)("div",(function(e){var t=e.$theme.sizing;return{marginRight:t.scale400,marginLeft:t.scale400}})),Se=(0,W.zo)("div",(function(e){return{marginLeft:e.$theme.sizing.scale900}})),Ce=function(e){var t=e.onClose,a=e.copy,n=e.edit;return(0,y.jsxs)(E.gM,{children:[(0,y.jsx)(E.cC,{onClick:t}),(0,y.jsx)(E.iI,{children:n?(0,y.jsx)(ye.Z,{id:"AKUMeh",defaultMessage:[{type:1,value:"label"}],values:{label:n.label}}):a?(0,y.jsx)(ye.Z,{id:"c5BYtX",defaultMessage:[{type:0,value:"Copy a "},{type:1,value:"label"}],values:{label:a.label}}):(0,y.jsx)(ye.Z,{id:"O9+pyu",defaultMessage:[{type:0,value:"Create New Survey"}]})}),(0,y.jsx)(Se,{children:(0,y.jsx)(N.gN,{name:"status",render:function(e){var t=e.input,a=t.value,n=t.onChange,r=e.meta,s=r.error,i=r.submitError;return(0,y.jsxs)(y.Fragment,{children:[(i||s)&&(0,y.jsx)(be,{children:i||s}),(0,y.jsx)(xe,{$error:i||s,children:(0,y.jsx)(je,{children:(0,y.jsx)(de.Z,{name:"status",checked:a,onChange:function(e){return n(e.target.checked)}})})})]})}})})]})},Me={BaseButton:{style:function(e){var t=e.$theme.sizing;return{marginLeft:t.scale600,paddingLeft:t.scale600,paddingRight:t.scale600}}}},Ze=function(e){var t=e.onCancelClick;return(0,y.jsx)(E.bk,{children:(0,y.jsx)(N.lP,{subscription:{validating:!0},children:function(e){var a=e.validating;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(me,{type:"button",kind:ge.TO.tertiary,onClick:t,children:(0,y.jsx)(ye.Z,{id:"PyxZY2",defaultMessage:[{type:0,value:"Cancel"}]})}),(0,y.jsx)(me,{type:"submit",disabled:a,overrides:Me,children:(0,y.jsx)(ye.Z,{id:"R1HYj0",defaultMessage:[{type:0,value:"Save"}]})})]})}})})},Le=a(57154),ze=(0,R.vU)({GenericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]}}),Te=function(){var e=(0,D.Z)().formatMessage,t=(0,N.cl)({subscription:{dirtySinceLastSubmit:!0,submitError:!0}}),a=t.dirtySinceLastSubmit,n=t.submitError;return(0,l.useEffect)((function(){a?(0,Le.jn)():n&&(0,Le.Eo)(e(ze.GenericError))}),[a,n,e]),null},Ee=["handleSubmit","dirty"],we=(0,R.vU)({promptMessage:{id:"+VVRCR",defaultMessage:[{type:0,value:"Are you sure you want to leave?"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]},surveyNameLabel:{id:"DoNKFX",defaultMessage:[{type:0,value:"Name of the Survey"}]},surveyName:{id:"2N3fgL",defaultMessage:[{type:0,value:"Copy "},{type:1,value:"name"}]}}),ke=(0,R.vU)({modalHeader:{id:"g6QKE+",defaultMessage:[{type:0,value:"Your changes will be lost."}]},modalMessage:{id:"s7gvFx",defaultMessage:[{type:0,value:"Would you like to stay?"}]},cancelButtonLabel:{id:"W0gBeC",defaultMessage:[{type:0,value:"Leave"}]},successButtonLabel:{id:"3LwF0N",defaultMessage:[{type:0,value:"Stay"}]}}),Pe=function(e){var t,a,n=e.handleSubmit,r=e.dirty,u=(0,T.Z)(e,Ee),c=(0,D.Z)().formatMessage,d=(0,E.yT)().closeDrawer,v=(0,F.y)(),p=(0,l.useState)(!1),g=(0,i.Z)(p,2),f=g[0],m=g[1];(0,l.useEffect)((function(){v(r)}),[r,v]);var h=function(){r?m(!0):d()},x=function(){return m(!1)};return(0,y.jsxs)("form",{onSubmit:n,noValidate:!0,children:[(0,y.jsx)(o.NL,{when:r,message:c(we.promptMessage)}),f&&(0,y.jsx)(U.U,{heading:c(ke.modalHeader),message:c(ke.modalMessage),cancelLabel:c(ke.cancelButtonLabel),successLabel:c(ke.successButtonLabel),onClose:x,onCancel:function(){m(!1),d()},onSuccess:x}),(0,y.jsx)(Ce,(0,s.Z)({onClose:h},u)),(0,y.jsxs)(fe,{children:[(0,y.jsxs)(he,{children:[(0,y.jsx)(q,{label:c(we.surveyNameLabel)}),(0,y.jsx)(re,{isDisabled:!(!u.edit&&!u.copy)}),(0,y.jsx)(le,{isDisabled:!(!u.edit&&!u.copy),entityMasterName:null===(t=u.values)||void 0===t?void 0:t.entityMasterName}),(0,y.jsx)(ce,{entityMasterName:null===(a=u.values)||void 0===a?void 0:a.entityMasterName}),(0,y.jsx)(pe,{})]}),(0,y.jsx)(Te,{})]}),(0,y.jsx)(Ze,(0,s.Z)({onCancelClick:h},u))]})},Ie=(0,O.Z)(),Ne=(0,A.Z)({field:"entityMasterName",updates:{engagementTypeForSurvey:function(e,t,a){if(!a.entityMasterName){var n=t.engagementTypeForSurvey;return n}}}}),Oe=function(e){return e.id},Ae=function(e){var t=e.onCreateSuccess,a=e.copy,n=e.edit,r=(0,D.Z)().formatMessage,o=(0,w.a)().nextStep,c=(0,S.xJ)(),d=(0,l.useState)(!1),v=(0,i.Z)(d,2),p=v[0],g=v[1],f=(0,l.useState)(!1),m=(0,i.Z)(f,2),h=m[0],x=m[1],b=function(){var e=(0,I.Z)((0,k.Z)().mark((function e(n){var r,i,l,u,d,v,p,y,f;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n.name,i=n.engagementTypeForSurvey,l=n.entityMasterName,u=n.displayLogo,d=n.status,v=n.uuid,p=n.executionType,g(!0),y=(0,s.Z)({label:r,status:d,displayLogo:u},i&&{engagementUuids:i.map(Oe)}),!a){e.next=9;break}return e.next=7,(0,S.L8)(c,{variables:(0,s.Z)({copySurveyMasterId:a.id},y)});case 7:e.next=12;break;case 9:return f=(0,s.Z)((0,s.Z)({},y),{},{entityMasterName:l,executionType:p,uuid:h?v:null}),e.next=12,(0,S.wd)(c,{variables:f});case 12:return g(!1),t(r),o(),e.abrupt("return",void 0);case 18:return e.prev=18,e.t0=e.catch(0),g(!1),e.abrupt("return",(0,P.Z)({},B.Ck,{code:"GenericError"}));case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){return n&&x(!0)}),[n]);var j=(0,l.useMemo)((function(){if(a||n){var e=null!==a&&void 0!==a?a:n,t=e.label,i=e.associatedEngagementTypeDetails,l=e.entityMasterName,o=e.executionType,u=e.displayLogo,c=e.status,d=e.uuid;return(0,s.Z)((0,s.Z)({name:a?r(we.surveyName,{name:t}):t,status:c,displayLogo:u,entityMasterName:l,executionType:o},null!==i&&void 0!==i&&i.length?{engagementTypeForSurvey:null===i||void 0===i?void 0:i.map((function(e){return{id:e.uuid,label:e.name}}))}:null),{},{uuid:d})}return{status:!0,displayLogo:!1}}),[a,n,r]);return(0,y.jsxs)(y.Fragment,{children:[p&&(0,y.jsx)(u.A,{}),(0,y.jsx)(N.l0,{decorators:[Ie,Ne],onSubmit:b,initialValues:j,render:function(e){return(0,y.jsx)(Pe,(0,s.Z)((0,s.Z)({},e),{},{copy:a,edit:n}))}})]})},Be=a(28958),Re=a(12157),De=(0,W.zo)("div",(function(e){var t=e.$theme,a=t.mediaQuery,n=t.sizing;return(0,P.Z)({display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",paddingLeft:n.scale800,paddingRight:n.scale800},a.medium,{paddingLeft:"250px",justifyContent:"flex-start"})})),Ue=(0,W.zo)("div",{width:"402px",maxWidth:"100%"}),Fe=(0,W.zo)("div",(function(e){var t=e.$theme.sizing;return{position:"relative",paddingLeft:"40px",marginTop:t.scale1600,marginBottom:t.scale1000}})),$e=(0,W.zo)("div",(function(e){var t=e.$theme,a=t.typography,n=t.sizing;return(0,s.Z)((0,s.Z)({},a.font650),{},{lineHeight:n.scale850})})),Ve=(0,W.zo)("div",(function(e){var t=e.$theme,a=t.colors,n=t.sizing;return{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",width:n.scale800,height:n.scale800,top:n.scale300,left:0,borderWidth:"1px",borderStyle:"solid",borderColor:a.positive100,borderRadius:n.scale600,backgroundColor:a.positive100}})),We=(0,W.zo)(ge.zx,{minWidth:"119px"}),Ye={Svg:{style:function(e){return{color:e.$theme.colors.white,backgroundColor:"transparent",strokeWidth:"3"}}}},He=function(){return(0,y.jsx)(Ve,{children:(0,y.jsx)(Be.N2N,{size:10,overrides:Ye})})},Je=function(){var e=(0,E.yT)().closeDrawer;return(0,y.jsx)(We,{type:"button",onClick:function(){return e()},children:(0,y.jsx)(ye.Z,{id:"dj/p/q",defaultMessage:[{type:0,value:"Close"}]})})},Xe=function(e){var t=e.surveyName,a=e.action;return(0,y.jsx)(De,{children:(0,y.jsxs)(Ue,{children:[(0,y.jsx)(Re.t,{size:208}),(0,y.jsxs)(Fe,{children:[(0,y.jsx)(He,{}),(0,y.jsx)($e,{children:"created"===a?(0,y.jsx)(ye.Z,{id:"kO3Tyt",defaultMessage:[{type:1,value:"name"},{type:0,value:" Survey created successfully"}],values:{name:t}}):(0,y.jsx)(ye.Z,{id:"D2zjqm",defaultMessage:[{type:1,value:"name"},{type:0,value:" Survey updated successfully"}],values:{name:t}})})]}),(0,y.jsx)(Je,{})]})})},Ge=["onCreate","copy","edit"],Qe=function(e){var t=e.onCreate,a=e.copy,n=e.edit,r=(0,T.Z)(e,Ge),o=(0,l.useState)(""),u=(0,i.Z)(o,2),c=u[0],d=u[1];return(0,y.jsx)(E.dy,(0,s.Z)((0,s.Z)({size:"90%"},r),{},{children:(0,y.jsxs)(w.e,{children:[(0,y.jsx)(Ae,{onCreateSuccess:function(e){d(e),null===t||void 0===t||t()},copy:a,edit:n}),(0,y.jsx)(Xe,{surveyName:c,action:n?"updated":"created"})]})}))},_e=function(e){var t=e.onCreate,a=(0,l.useState)(!1),n=(0,i.Z)(a,2),r=n[0],s=n[1];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Qe,{isOpen:r,onClose:function(){return s(!1)},onCreate:t}),(0,y.jsx)(ge.zx,{onClick:function(){return s(!0)},children:(0,y.jsx)(ye.Z,{id:"gEuVr6",defaultMessage:[{type:0,value:"+ New Survey"}]})})]})},qe=function(e){var t,a,n=e.agGridReact,s=e.refetch,i=void 0===n.props.rowData,l=null!==(t=null===(a=(0,ee.Zn)().location)||void 0===a?void 0:a.attributes.version)&&void 0!==t?t:"";return(0,y.jsxs)(r.aR,{children:[i?(0,y.jsx)(r.Pz,{size:93}):(0,y.jsx)(r.e5,{size:93}),(0,y.jsx)(r.CM,{children:i?(0,y.jsx)(ye.Z,{id:"HxOy0b",defaultMessage:[{type:0,value:"Something went wrong. Please try again."}]}):"1"===l?(0,y.jsx)(ye.Z,{id:"z9hUoR",defaultMessage:[{type:0,value:"This instance has been created using the legacy system. Please use the old/legacy UI to configure the same."}]}):(0,y.jsx)(ye.Z,{id:"Fl6iZb",defaultMessage:[{type:0,value:"No Survey to show"}]})}),i?(0,y.jsx)(r.VX,{type:"button",kind:ge.TO.secondary,onClick:s,children:(0,y.jsx)(ye.Z,{id:"NJMO8m",defaultMessage:[{type:0,value:"Retry"}]})}):"1"!==l&&(0,y.jsx)(_e,{onCreate:s})]})},Ke=a(23994),et=a(92570),tt=a(56799),at=(0,R.vU)({modalHeader:{id:"8BJRxP",defaultMessage:[{type:0,value:"Are you sure you want to delete the Survey?"}]},modalMessage:{id:"Bb8YT5",defaultMessage:[{type:0,value:"Please note: This action cannot be reverted."}]},cancelButtonLabel:{id:"yhU8J6",defaultMessage:[{type:0,value:"No"}]},successButtonLabel:{id:"3ebjtX",defaultMessage:[{type:0,value:"Yes"}]}}),nt=function(e){var t=e.onClose,a=e.onConfirm,n=(0,D.Z)().formatMessage;return(0,y.jsx)(U.U,{heading:n(at.modalHeader),message:n(at.modalMessage),cancelLabel:n(at.cancelButtonLabel),successLabel:n(at.successButtonLabel),closeable:!0,onClose:t,onCancel:t,onSuccess:a})},rt=(0,R.vU)({viewEditDetails:{id:"h5/tVt",defaultMessage:[{type:0,value:"View/Edit Details"}]},makeActive:{id:"Cuqw9Q",defaultMessage:[{type:0,value:"Make Active"}]},makeInactive:{id:"7OMYCo",defaultMessage:[{type:0,value:"Make Inactive"}]},delete:{id:"5lDhhN",defaultMessage:[{type:0,value:"Delete"}]},duplicate:{id:"UQY3dO",defaultMessage:[{type:0,value:"Duplicate"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]},inactiveSuccess:{id:"FZo8Yi",defaultMessage:[{type:0,value:"Survey is disabled for Associated Engagement Types"}]},activeSuccess:{id:"xu0XcL",defaultMessage:[{type:0,value:"Please enable survey for Associated Engagement types at Engagement types settings > Surveys"}]},deleteSuccess:{id:"bTAp7E",defaultMessage:[{type:1,value:"name"},{type:0,value:" deleted successfully"}]},duplicateMessage:{id:"66Yp24",defaultMessage:[{type:1,value:"name"},{type:0,value:" Survey copied successfully."}]}}),st=(0,R.vU)({labelEngagementMore:{id:"yXbX5E",defaultMessage:[{type:0,value:"Engagement more option"}]}}),it=function(e){var t,a;return null===(t=(a=e.item).onItemSelect)||void 0===t?void 0:t.call(a,e)},lt=function(e){var t=e.value,a=e.data,n=e.node,o=e.api,u=e.refetch,c=e.onRowDelete,d=(0,D.Z)().formatMessage,v=(0,l.useState)(!1),p=(0,i.Z)(v,2),g=p[0],f=p[1],m=(0,l.useState)(),h=(0,i.Z)(m,2),x=h[0],b=h[1],j=(0,l.useState)(!1),C=(0,i.Z)(j,2),M=C[0],Z=C[1],L=(0,S.Di)({onError:function(){o.hideOverlay(),(0,Le.Eo)(d(rt.genericError))},onCompleted:function(){null===u||void 0===u||u(),o.hideOverlay(),(0,Le.XA)(d(rt.activeSuccess))}}).mutateBulkActive,z=(0,S.yt)({onError:function(){o.hideOverlay(),(0,Le.Eo)(d(rt.genericError))},onCompleted:function(){null===u||void 0===u||u(),o.hideOverlay(),(0,Le.XA)(d(rt.inactiveSuccess))}}).mutateBulkInactive,T=(0,S.gz)({onError:function(){o.hideOverlay(),(0,Le.Eo)(d(rt.genericError))},onCompleted:function(){o.hideOverlay(),null===c||void 0===c||c(),o.applyTransaction({remove:[n.data]}),(0,Le.XA)(d(rt.deleteSuccess,{name:a.label}))}}).mutateBulkDelete,E=[{label:d(rt.viewEditDetails),onItemSelect:function(){f(!0),b(!0)}},t.canActivate&&{label:d(rt.makeActive),onItemSelect:function(){o.showLoadingOverlay(),L({variables:{uuids:[a.uuid]}})}},t.canDeactivate&&{label:d(rt.makeInactive),onItemSelect:function(){o.showLoadingOverlay(),z({variables:{uuids:[a.uuid]}})}},t.canDelete&&{label:d(rt.delete),onItemSelect:function(){return Z(!0)}},t.canDuplicate&&{label:d(rt.duplicate),onItemSelect:function(){f(!0),b(!1)}}].filter(Boolean);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(et.Z,{items:E,onItemSelect:it,overrides:r._h}),g&&(0,y.jsx)(Qe,(0,s.Z)({isOpen:!0,onClose:function(){return f(!1)},onCreate:function(){return null===u||void 0===u?void 0:u()}},x?{edit:a}:{copy:a})),M&&(0,y.jsx)(nt,{onClose:function(){return Z(!1)},onConfirm:function(){Z(!1),o.showLoadingOverlay(),T({variables:{uuids:[a.uuid]}})}})]})},ot=function(e){var t=(0,D.Z)().formatMessage;return(0,y.jsx)(tt.R,{popoverMargin:8,placement:Ke.r4.bottomRight,content:(0,y.jsx)(lt,(0,s.Z)({},e)),ariaLabel:t(st.labelEngagementMore)})},ut=a(40619),ct=10,dt=(0,R.vU)({label:{id:"GaVhX4",defaultMessage:[{type:0,value:"Name"}]},associatedEngagementTypeDetails:{id:"rOczTJ",defaultMessage:[{type:0,value:"Engagement Types"}]},createdBy:{id:"C/hsY9",defaultMessage:[{type:0,value:"Created By"}]},createdAt:{id:"JWV5iB",defaultMessage:[{type:0,value:"Date Created"}]},status:{id:"VYwlZW",defaultMessage:[{type:0,value:"Status"}]}}),vt=[{checkboxSelection:!0,lockPosition:!0,maxWidth:50,pinned:"left",resizable:!1,headerComponent:"checkboxHeader",headerComponentParams:{}},{field:"label",sortable:!0},{field:"associatedEngagementTypeDetails",sortable:!1,valueGetter:function(e){var t=e.data.associatedEngagementTypeDetails;return Array.isArray(t)?t.map((function(e){return e.name})).join(", "):""}},{field:"createdBy",sortable:!0},{field:"createdAt",sortable:!0,valueGetter:function(e){var t=e.data.createdAt;return new Date(t)},valueFormatter:function(e){var t=e.value;return(0,ut.p6)(t)}},{field:"status",sortable:!0,cellRenderer:"statusCell"},{field:"actions",pinned:"right",resizable:!1,maxWidth:50,headerComponent:"actionHeader",headerComponentParams:{columnHeaderNames:dt},cellRenderer:"actionCell"}],pt=function(e){var t=(0,l.useState)(!1),a=(0,i.Z)(t,2),o=a[0],u=a[1],c=(0,l.useState)(void 0),d=(0,i.Z)(c,2),v=d[0],p=d[1];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.aV,(0,s.Z)((0,s.Z)({},e),{},{constants:n,frameworkComponents:{actionCell:ot,statusCell:C.StatusCell,noRowsAndError:qe},onRowClicked:function(e){var t=e.data,a=e.event;(null===a||void 0===a?void 0:a.target).closest("[col-id=actions]")||(u(!0),p(t))}})),o&&(0,y.jsx)(Qe,{isOpen:!0,onClose:function(){return u(!1)},onCreate:function(){var t;return null===(t=e.refetch)||void 0===t?void 0:t.call(e)},edit:v})]})},yt=(0,R.vU)({search:{id:"4bIsxJ",defaultMessage:[{type:0,value:"Search"}]}}),gt=function(e){var t,a,n=e.itemCount,r=e.onSearch,s=e.search,i=e.onCreate,l=(0,D.Z)().formatMessage,o=null!==(t=null===(a=(0,ee.Zn)().location)||void 0===a?void 0:a.attributes.version)&&void 0!==t?t:"";return(0,y.jsxs)(C.Root,{children:[(0,y.jsxs)(C.Container,{children:[(0,y.jsx)(C.Title,{children:(0,y.jsx)(ye.Z,{id:"brwYVm",defaultMessage:[{type:0,value:"Surveys \xb7 "},{type:2,value:"count",style:null}],values:{count:n}})}),(0,y.jsx)(C.PageHint,{children:(0,y.jsx)(ye.Z,{id:"2o2yme",defaultMessage:[{type:0,value:"Manage survey creation, modification and activation."}]})})]}),(0,y.jsxs)(C.RightContainer,{children:[(0,y.jsx)(C.InputControl,{children:(0,y.jsx)(V.II,{type:"search",value:s,IconAfter:Be.olm,onChange:r,placeholder:l(yt.search)})}),"1"!==o&&(0,y.jsx)(_e,{onCreate:i})]})]})},ft=a(55750),mt=function(e){var t=e.value,a=e.label,n=e.onChange,r=(0,o.UO)().eventName,s=new URLSearchParams(window.location.search).get("location"),u=(0,l.useState)(""),c=(0,i.Z)(u,2),d=c[0],p=c[1],g=(0,l.useState)([]),f=(0,i.Z)(g,2),m=f[0],h=f[1],x=(0,l.useState)(!1),b=(0,i.Z)(x,2),j=b[0],S=b[1],C=(0,L.N)(d),M=(0,v.useSurveyCreatedByUsers)({subSystem:r,onResolve:function(e){var t=e.data;h(t.map((function(e){var t=e.id,a=e.attributes,n=a.firstName,r=a.lastName;return{id:t,label:"".concat(n," ").concat(r)}}))),S(!1)}}).run;return(0,l.useEffect)((function(){C?M({search:C,locationId:s}):h([])}),[C]),(0,y.jsx)(ft.QV,{label:a,onChange:n,options:m,value:t,asyncOptions:!0,searchText:d,onSearch:p,isLoading:j})},ht=function(e){var t=e.value,a=e.label,n=e.onChange,r=(0,S.yI)({variables:{showOnlyNonConsecutiveEngagementTypes:!0}}),s=r.fetchEngagementTypes,i=r.loading,o=(0,l.useMemo)((function(){var e;return(null!==(e=null===s||void 0===s?void 0:s.map((function(e){return{id:e.uuid,label:e.name,displayOrder:e.displayOrder}})))&&void 0!==e?e:[]).sort((function(e,t){return e.displayOrder-t.displayOrder}))}),[s]);return(0,y.jsx)(ft.QV,{label:a,onChange:n,options:o,value:t,searchable:!0,isLoading:i})},xt=(0,R.vU)({status:{id:"zDG1Iw",defaultMessage:[{type:0,value:"Survey Status"}]},createdBy:{id:"L77ML3",defaultMessage:[{type:0,value:"Created By"}]},engagementType:{id:"f4x/Ct",defaultMessage:[{type:0,value:"Engagement type"}]},surveyType:{id:"sJGe+A",defaultMessage:[{type:0,value:"Survey type"}]},active:{id:"SX0/2b",defaultMessage:[{type:0,value:"Active"}]},inactive:{id:"lLNQtt",defaultMessage:[{type:0,value:"Inactive"}]},pre:{id:"KpYzTZ",defaultMessage:[{type:0,value:"Pre"}]},post:{id:"ZL1PaJ",defaultMessage:[{type:0,value:"Post"}]}}),bt=function(e){return e.id},jt=["active","inactive"],St=function(e){var t=e.onChange,a=(0,D.Z)().formatMessage,n=j(),s=n.patchPreferences,i=n.preferences,l=i.statuses,o=void 0===l?[]:l,u=i.createdBy,c=void 0===u?[]:u,d=i.engagementTypes,v=void 0===d?[]:d,p=function(e){return{id:e.uuid,label:e.name}},g=function(e){return{id:e,label:a(xt[e])}};return(0,y.jsxs)(r.Px,{children:[(0,y.jsx)(r.L2,{children:(0,y.jsx)(ft.QV,{value:o.map(g),overrides:r.OD,label:a(xt.status),onChange:function(e){t(),s({statuses:e.map(bt)})},options:jt.map(g)})}),(0,y.jsx)(r.L2,{children:(0,y.jsx)(ht,{label:a(xt.engagementType),value:Array.isArray(v)?v.map(p):[],onChange:function(e){t(),s({engagementTypes:e.map((function(e){return{uuid:e.id,name:e.label}}))})}})}),(0,y.jsx)(r.L2,{children:(0,y.jsx)(mt,{label:a(xt.createdBy),value:c.map(p),onChange:function(e){t(),s({createdBy:e.map((function(e){return{uuid:e.id,name:e.label}}))})}})})]})},Ct=a(85196),Mt=(0,W.zo)("div",(function(e){var t=e.$theme.sizing;return{display:"flex",flexDirection:"column",paddingTop:t.scale100,paddingBottom:t.scale100}})),Zt=(0,W.zo)("div",(function(){return{display:"flex",justifyContent:"flex-end"}})),Lt=(0,W.zo)("div",(function(){return{display:"flex"}})),zt=(0,W.zo)("div",(function(e){var t=e.$theme,a=t.typography,n=t.sizing,r=t.colors;return(0,s.Z)((0,s.Z)({},a.ParagraphSmall),{},{color:r.mono700,marginBottom:n.scale200})})),Tt=(0,W.zo)(ge.zx,(function(e){var t=e.$theme.sizing;return{marginLeft:t.scale100,marginRight:t.scale100}})),Et=(0,W.zo)("div",(function(){return{display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:"420px"}})),wt=(0,W.zo)("div",(function(e){var t=e.$theme.sizing;return{display:"flex",alignItems:"flex-start",paddingTop:t.scale400,paddingBottom:t.scale400}})),kt=(0,W.zo)(Be.lPr,(function(e){var t=e.$theme,a=t.sizing,n=t.colors;return{color:n.positive,backgroundColor:n.positive50,borderRadius:a.scale400}})),Pt=(0,W.zo)(Be.wrp,(function(e){var t=e.$theme,a=t.sizing,n=t.colors;return{color:n.negative,backgroundColor:n.negative50,borderRadius:a.scale400}})),It=(0,W.zo)("div",(function(e){var t=e.$theme,a=t.typography,n=t.sizing,r=t.colors;return(0,s.Z)((0,s.Z)({},a.Paragraph1),{},{color:r.mono900,marginLeft:n.scale600,maxWidth:"250px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})})),Nt=(0,W.w1)(Ct.fe,{maxHeight:"250px"}),Ot=(0,R.vU)({view:{id:"KKISUz",defaultMessage:[{type:0,value:"View"}]}}),At=function(e){var t=e.message,a=e.details,n=(0,D.Z)().formatMessage,r=(0,l.useState)(!1),s=(0,i.Z)(r,2),o=s[0],u=s[1],c=null===a||void 0===a?void 0:a.sort((function(e,t){return e.success===t.success?0:e.success?-1:1}));return(0,y.jsxs)(Et,{children:[t,!(null===a||void 0===a||!a.length)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Tt,{kind:ge.TO.secondary,onClick:function(){return u(!0)},children:n(Ot.view)}),o&&(0,y.jsxs)(Ct.u_,{isOpen:!0,size:Ct.NO.medium,overrides:C.modalOverrides,onClose:function(){return u(!1)},children:[(0,y.jsx)(Ct.xB,{children:t}),(0,y.jsx)(Nt,{children:null===c||void 0===c?void 0:c.map((function(e,t){var a=e.success,n=e.name;return(0,y.jsxs)(wt,{children:[a?(0,y.jsx)(kt,{size:"20px"}):(0,y.jsx)(Pt,{size:"20px"}),(0,y.jsx)(It,{children:n})]},t)}))})]})]})]})},Bt=(0,R.vU)({allActive:{id:"ag6N/f",defaultMessage:[{type:0,value:"Make all active"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]}}),Rt=function(e){var t=e.gridApi,a=e.variables,n=e.resetToFirstPage,r=(0,D.Z)().formatMessage,s=(0,S.Di)({onCompleted:function(e){n(),function(e){var t=e.bulkActivateSurveyMasters,a=t.failureCount,n=t.successCount;0===a?(0,Le.XA)((0,y.jsx)(At,{message:(0,y.jsx)(ye.Z,{id:"cQ6aDd",defaultMessage:[{type:2,value:"successCount",style:null},{type:0,value:" survey "},{type:6,value:"successCount",options:{one:{value:[{type:0,value:"type"}]},other:{value:[{type:0,value:"types"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" activated successfully"}],values:{successCount:n}})})):(0,Le.Eo)((0,y.jsx)(At,{message:(0,y.jsx)(ye.Z,{id:"TA3WbD",defaultMessage:[{type:0,value:"Survey activation failed"}]})}))}(e)},onError:function(){t.hideOverlay(),(0,Le.Eo)((0,y.jsx)(At,{message:r(Bt.genericError)}))}}).mutateBulkActive;return(0,y.jsx)(Tt,{kind:ge.TO.secondary,onClick:function(){t.showLoadingOverlay(),s({variables:a})},children:r(Bt.allActive)})},Dt=(0,R.vU)({allInactive:{id:"/EghDJ",defaultMessage:[{type:0,value:"Make all inactive"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]}}),Ut=function(e){var t=e.gridApi,a=e.variables,n=e.resetToFirstPage,r=(0,D.Z)().formatMessage,s=(0,S.yt)({onCompleted:function(e){n(),function(e){var t=e.bulkInactivateSurveyMasters,a=t.totalCount,n=t.failureCount,r=t.successCount,s=t.surveyMasterDetails;0===n?(0,Le.XA)((0,y.jsx)(At,{message:(0,y.jsx)(ye.Z,{id:"4TlKLe",defaultMessage:[{type:2,value:"successCount",style:null},{type:0,value:" survey "},{type:6,value:"successCount",options:{one:{value:[{type:0,value:"type"}]},other:{value:[{type:0,value:"types"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" inactivated successfully"}],values:{successCount:r}})})):n===a?(0,Le.Eo)((0,y.jsx)(At,{details:s,message:(0,y.jsx)(ye.Z,{id:"6Ww/Vg",defaultMessage:[{type:0,value:"Survey inactivation failed"}]})})):(0,Le.Eo)((0,y.jsx)(At,{details:s,message:(0,y.jsx)(ye.Z,{id:"pZqVc5",defaultMessage:[{type:0,value:"Failed to inactivate "},{type:2,value:"failureCount",style:null},{type:0,value:" out of "},{type:2,value:"totalCount",style:null},{type:0,value:" survey "},{type:6,value:"totalCount",options:{one:{value:[{type:0,value:"type"}]},other:{value:[{type:0,value:"types"}]}},offset:0,pluralType:"cardinal"}],values:{failureCount:n,totalCount:a}})}),{autoHideDuration:0})}(e)},onError:function(){t.hideOverlay(),(0,Le.Eo)((0,y.jsx)(At,{message:r(Dt.genericError)}))}}).mutateBulkInactive;return(0,y.jsx)(Tt,{kind:ge.TO.secondary,onClick:function(){t.showLoadingOverlay(),s({variables:a})},children:r(Dt.allInactive)})},Ft=(0,R.vU)({allDelete:{id:"/a8vq0",defaultMessage:[{type:0,value:"Delete all"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]}}),$t=function(e){var t,a;return null===(t=(a=e.item).onItemSelect)||void 0===t?void 0:t.call(a,e)},Vt=function(e){var t=(0,D.Z)().formatMessage,a=e.gridApi,n=e.variables,s=e.resetToFirstPage,i=(0,S.gz)({onCompleted:function(e){s(),function(e){var t=e.bulkDeleteSurveyMasters,a=t.totalCount,n=t.failureCount,r=t.successCount,s=t.surveyMasterDetails;0===n?(0,Le.XA)((0,y.jsx)(At,{message:(0,y.jsx)(ye.Z,{id:"RimrYF",defaultMessage:[{type:2,value:"successCount",style:null},{type:0,value:" survey "},{type:6,value:"successCount",options:{one:{value:[{type:0,value:"type has"}]},other:{value:[{type:0,value:"types have"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" been deleted successfully"}],values:{successCount:r}})})):n===a?(0,Le.Eo)((0,y.jsx)(At,{details:s,message:(0,y.jsx)(ye.Z,{id:"Cnvvtt",defaultMessage:[{type:0,value:"Surveys deletion failed"}]})})):(0,Le.Eo)((0,y.jsx)(At,{details:s,message:(0,y.jsx)(ye.Z,{id:"qbfRme",defaultMessage:[{type:2,value:"failureCount",style:null},{type:0,value:" out of "},{type:2,value:"totalCount",style:null},{type:0,value:" survey "},{type:6,value:"totalCount",options:{one:{value:[{type:0,value:"type"}]},other:{value:[{type:0,value:"types"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" deletion failed"}],values:{failureCount:n,totalCount:a}})}),{autoHideDuration:0})}(e)},onError:function(){a.hideOverlay(),(0,Le.Eo)((0,y.jsx)(At,{message:t(Ft.genericError)}))}}).mutateBulkDelete;return(0,y.jsx)(Ke.yz,{popoverMargin:8,content:(0,y.jsx)(et.Z,{items:[{label:t(Ft.allDelete),onItemSelect:function(){a.showLoadingOverlay(),i({variables:n})}}],onItemSelect:$t,overrides:r._h}),placement:Ke.r4.bottomRight,overrides:r.M_,children:(0,y.jsx)(ge.hU,{size:20,overrides:r.jj,children:(0,y.jsx)(Be.g4x,{})})})},Wt=["totalItems","appliedSearchTerm"],Yt=function(e){var t=e.totalItems,a=e.appliedSearchTerm,n=(0,T.Z)(e,Wt),i=(0,r.cH)(),l=i.getSelectedItems,o=i.isSelectAll,u=i.getExcludedItems,c=j().preferences,d=c.createdBy,v=c.statuses,p=function(){return{uuids:l(),isSelectAll:o(),excludedUuids:u(),searchTerm:a,filters:{createdBy:null===d||void 0===d?void 0:d.map((function(e){return e.uuid})),status:v}}};return(0,y.jsxs)(Mt,{children:[(0,y.jsx)(Zt,{children:(0,y.jsx)(zt,{children:(0,y.jsx)(ye.Z,{id:"IPezyJ",defaultMessage:[{type:2,value:"count",style:null},{type:0,value:" survey "},{type:6,value:"count",options:{one:{value:[{type:0,value:"type"}]},other:{value:[{type:0,value:"types"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" selected"}],values:{count:o()?t&&t-u().length:l().length}})})}),(0,y.jsxs)(Lt,{children:[(0,y.jsx)(Rt,(0,s.Z)({variables:p()},n)),(0,y.jsx)(Ut,(0,s.Z)({variables:p()},n)),(0,y.jsx)(Vt,(0,s.Z)({variables:p()},n))]})]})},Ht=function(){var e=(0,l.useState)(null),t=(0,i.Z)(e,2),a=t[0],n=t[1],o=(0,l.useState)(""),u=(0,i.Z)(o,2),c=u[0],d=u[1],v=(0,L.N)(c.trim(),500),p=(0,l.useState)(1),g=(0,i.Z)(p,2),f=g[0],m=g[1],h=(0,r.cH)(),x=h.deselectAll,b=h.isSelectAll,T=h.getSelectedItems,E=function(){m(1),x()},w=j(),k=w.preferences,P=k.sortBy,I=k.sortOrder,N=k.statuses,O=k.createdBy,A=k.surveyTypes,B=k.engagementTypes,R=k.pageSize,D=(0,l.useState)(null!==R&&void 0!==R?R:r.IV),U=(0,i.Z)(D,2),F=U[0],$=U[1],V=(0,S.d)({notifyOnNetworkStatusChange:!0,onCompleted:function(){return null===a||void 0===a?void 0:a.hideOverlay()},onError:function(){return null===a||void 0===a?void 0:a.showNoRowsOverlay()}}),W=V.loading,Y=V.execute,H=V.page,J=V.data,X=V.refetch,G=(null!==H&&void 0!==H?H:{}).total,Q=void 0===G?0:G,_=(0,z.Q)(Q);return(0,l.useEffect)((function(){Y({variables:{searchTerm:v,page:{size:F,number:f},sortOrder:I,sortBy:P,filters:{createdBy:null===O||void 0===O?void 0:O.map((function(e){return e.uuid})),status:N,engagementTypeUuid:null===B||void 0===B?void 0:B.map((function(e){return e.uuid})),executionType:A}}})}),[N,O,P,I,v,f,B,A,F]),W&&(null===a||void 0===a||a.showLoadingOverlay()),(0,y.jsxs)(C.RootContainer,{children:[(0,y.jsx)(M.q,{}),(0,y.jsx)(gt,{search:c,itemCount:Q,onSearch:function(e){E(),d(e.target.value)},onCreate:function(){return X()}}),(0,y.jsxs)(C.SubHeaderRoot,{children:[(0,y.jsx)(St,{onChange:E}),b()||T().length?(0,y.jsx)(Yt,{gridApi:a,totalItems:Q,appliedSearchTerm:v,resetToFirstPage:function(){1===f&&X(),E()}}):null]}),(0,y.jsx)(pt,(0,s.Z)((0,s.Z)({gridApi:a,setGridApi:n,onSort:E,paginationPageSize:F,onRowDelete:function(){1!==(null===J||void 0===J?void 0:J.length)||1===f?X():m((function(e){return e-1}))}},w),{},{data:J,refetch:X})),Q>r.IV&&(0,y.jsx)(C.Footer,{children:(0,y.jsx)(Z.t,{kind:Z.T.light,totalItems:Q,currentPageNumber:f,onPageNumberChange:m,pageSizes:_,currentPageSize:F,onPageSizeChange:function(e){$(e),m(1),w.patchPreferences({pageSize:e})}})})]})},Jt=function(){return(0,y.jsx)(b,{children:(0,y.jsx)(r.he,{children:(0,y.jsx)(Ht,{})})})}},56799:function(e,t,a){a.d(t,{R:function(){return d}});var n=a(33028),r=a(23994),s=a(8967),i=a(28958),l={BaseButton:{style:function(e){var t=e.$theme.colors;return{borderLeftStyle:"none",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",color:t.mono800,backgroundColor:"transparent",paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,marginRight:0,":hover":{color:t.mono1000,backgroundColor:"transparent"}}}}},o={Body:{style:function(e){var t=e.$theme,a=t.lighting,n=t.colors;return{boxShadow:a.shadow600,border:"1px solid ".concat(n.mono300)}}}},u=(0,a(9930).zo)("div",{display:"flex",flexShrink:1}),c=a(37574),d=function(e){return(0,c.jsx)(u,{onClick:function(e){return e.stopPropagation()},children:(0,c.jsx)(r.yz,(0,n.Z)((0,n.Z)({overrides:o,focusLock:!0},e),{},{children:(0,c.jsx)(s.hU,{size:20,overrides:l,"aria-label":e.ariaLabel,children:(0,c.jsx)(i.g4x,{})})}))})}}}]);
//# sourceMappingURL=585.8f894803.chunk.js.map