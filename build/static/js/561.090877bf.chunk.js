"use strict";(self.webpackChunk_jifflenow_selfserve=self.webpackChunk_jifflenow_selfserve||[]).push([[561],{44561:function(e,t,a){a.r(t),a.d(t,{default:function(){return ue}});var n=a(68079),i=a(32723),l=a(33028),o=a(34795),r=a(55364),s=a(35207),u=a(24944),c=a(70104),d=a(55976),g=a(57154),f=a(33179),p=a(65944),h=a(57579),v=a(63056),x=a(65470),y=a(67475),m=a(37574),j=(0,r.vU)({localization:{id:"EFZsLi",defaultMessage:[{type:0,value:"Enable Localization"}]}}),b=function(e){var t=e.checked,a=e.onChange,n=(0,s.Z)().formatMessage;return(0,m.jsx)(y.Z,{name:"localisation",ariaLabel:n(j.localization),checked:t,onChange:a})},L=function(e){return(0,m.jsxs)(x.Root,{children:[(0,m.jsxs)(x.Container,{children:[(0,m.jsx)(x.Title,{children:(0,m.jsx)(v.Z,{id:"7tYjvy",defaultMessage:[{type:0,value:"Localization"}]})}),(0,m.jsx)(x.PageHint,{children:(0,m.jsx)(v.Z,{id:"ggyw1i",defaultMessage:[{type:0,value:"Localization allows your eMeet inbound request page to support multiple languages"}]})})]}),(0,m.jsx)(x.RightContainer,{children:(0,m.jsx)(b,(0,l.Z)({},e))})]})},Z=a(27189),z=a(9930),C=a(28958),w=(0,z.zo)("div",(function(e){var t=e.$theme.sizing;return{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:t.scale600,paddingBottom:t.scale600}})),M=(0,z.zo)("header",(function(e){var t=e.$theme.sizing;return{display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:t.scale800,paddingRight:t.scale800,paddingTop:t.scale200,paddingBottom:t.scale200}})),k=(0,z.zo)("header",(function(e){var t=e.$theme.sizing;return{paddingLeft:t.scale800,paddingRight:t.scale800}})),B=(0,z.zo)("div",(function(e){return{borderBottomColor:e.$theme.colors.mono300,borderBottomStyle:"solid",borderBottomWidth:"1px"}})),O=(0,z.zo)("span",(function(e){var t=e.$theme.sizing;return{marginRight:t.scale400,marginLeft:t.scale400}})),S=(0,z.zo)("span",(function(e){var t=e.$theme,a=t.colors,n=t.typography;return(0,l.Z)((0,l.Z)({},n.Paragraph2),{},{color:a.mono900})})),D=(0,z.zo)("div",(function(e){var t=e.$theme,a=t.typography,n=t.colors;return(0,l.Z)((0,l.Z)({},a.LabelLarge),{},{color:n.mono800,marginBottom:0})})),E=(0,z.zo)("div",(function(e){var t=e.$theme.sizing;return{display:"flex",justifyContent:"flex-end",paddingTop:t.scale750,paddingLeft:t.scale800,paddingRight:t.scale800}})),R=(0,z.zo)("input",{display:"none"}),$=(0,z.zo)("div",(function(){return{display:"flex",alignItems:"center",justifyContent:"space-between"}})),P=(0,z.zo)("div",(function(e){var t=e.$theme.typography;return(0,l.Z)({},t.LabelSmall)})),Q=(0,z.zo)(C.lPr,(function(e){var t=e.$theme,a=t.sizing,n=t.colors;return{color:n.positive,backgroundColor:n.positive50,borderRadius:a.scale400}})),N=(0,z.zo)(C.wrp,(function(e){var t=e.$theme,a=t.sizing,n=t.colors;return{color:n.negative,backgroundColor:n.negative50,borderRadius:a.scale400}})),T=new Intl.DisplayNames([],{type:"language"}),I=function(e){var t=e.language,a=e.checked,n=e.disabled,i=e.onChange,l=T.of(t);return(0,m.jsxs)(w,{children:[(0,m.jsx)(O,{children:(0,m.jsx)(S,{children:"en"===t?l:"".concat(l," (").concat(t,")")})}),(0,m.jsx)(M,{children:(0,m.jsx)(Z.Gd,{children:"en"===t?(0,m.jsx)(S,{children:(0,m.jsx)(v.Z,{id:"PsVgUE",defaultMessage:[{type:0,value:"Default On"}]})}):(0,m.jsx)(y.Z,{name:t,ariaLabel:l,checked:a,onChange:function(e){return i(t,e.target.checked)},disabled:n})})})]})},_=function(e){var t=e.localizationData,a=e.onChange,n=t.supportedLocales,i=t.enabledLocales,l=t.enableLocalisation;return(0,m.jsxs)(k,{children:[(0,m.jsx)(D,{children:(0,m.jsx)(v.Z,{id:"orhD0u",defaultMessage:[{type:0,value:"Language"}]})}),null===n||void 0===n?void 0:n.map((function(e,t){var n=-1!==i.indexOf(e);return(0,m.jsxs)("div",{children:[(0,m.jsx)(I,{language:e,checked:n,disabled:!l,onChange:a}),(0,m.jsx)(B,{})]},t)}))]})},F=a(96234),W=a(44363),U=a(82975),q=(0,z.zo)("div",{display:"flex",flexDirection:"column",flexGrow:1}),A=function(){var e=(0,z.hQ)(),t=(0,F.Z)(e,2)[1],a={speed:2,primaryColor:t.colors.mono200,secondaryColor:t.colors.mono300};return(0,m.jsx)(q,{children:(0,m.jsx)(U.W2,{children:(0,m.jsxs)(W.ZP,(0,l.Z)((0,l.Z)({width:"1000",height:"600",viewBox:"0 0 1000 600"},a),{},{children:[(0,m.jsx)("rect",{y:"25",x:"0",width:"1000",height:"50"}),(0,m.jsx)("rect",{y:"150",x:"0",width:"1000",height:"30"}),(0,m.jsx)("rect",{y:"285",x:"0",width:"230",height:"13"}),(0,m.jsx)("rect",{y:"280",x:"955",width:"42",height:"24",rx:"12",ry:"12"}),(0,m.jsx)("rect",{y:"330",x:"0",width:"1000",height:"1"}),(0,m.jsx)("rect",{y:"355",x:"0",width:"230",height:"13"}),(0,m.jsx)("rect",{y:"350",x:"955",width:"42",height:"24",rx:"12",ry:"12"}),(0,m.jsx)("rect",{y:"400",x:"0",width:"1000",height:"1"})]}))})})},V=a(30969),H=a(8967),Y=a(94198),G=a(19397),X=a(85196),J={BaseButton:{style:function(e){var t=e.$theme.sizing;return{minWidth:"122px",marginRight:t.scale300,marginBottom:t.scale300}}}},K={BaseButton:{style:function(e){return{minWidth:"70px",height:"24px",marginLeft:e.$theme.sizing.scale400}}}},ee={TableHeadCell:{style:{width:"20px"}},TableBodyCell:{style:{width:"20px"}}},te=(0,r.vU)({languageLabel:{id:"nQl1Zv",defaultMessage:[{type:0,value:"Language"}]},importStatusLabel:{id:"OI57c4",defaultMessage:[{type:0,value:"Import Status"}]},onOffLabel:{id:"VM19NV",defaultMessage:[{type:0,value:"On/Off"}]},onLabel:{id:"4w0h63",defaultMessage:[{type:0,value:"On"}]},offLabel:{id:"tjY0h8",defaultMessage:[{type:0,value:"Off"}]},successLabel:{id:"ikt386",defaultMessage:[{type:0,value:"Success"}]},failureLabel:{id:"SEpOgQ",defaultMessage:[{type:0,value:"Failure"}]},invalidLanguageLabel:{id:"irzPBk",defaultMessage:[{type:0,value:"Language Not Supported"}]}}),ae=new Intl.DisplayNames([],{type:"language"}),ne=function(e){var t=e.importResponse,a=t.localeImported,i=t.localeErrored,l=e.localizationData,o=l.enabledLocales,r=l.supportedLocales,u=e.onClose,c=(0,s.Z)().formatMessage,d=[].concat((0,n.Z)(a),(0,n.Z)(i)).map((function(e){var t=a.indexOf(e)>-1,n=o.indexOf(e)>-1,i=r.indexOf(e)>-1;return{success:t,name:i?null===ae||void 0===ae?void 0:ae.of(e):e,importStatus:c(te[t?"successLabel":i?"failureLabel":"invalidLanguageLabel"]),status:c(te[n?"onLabel":"offLabel"])}}));return(0,m.jsxs)(X.u_,{isOpen:!0,size:X.NO.medium,onClose:u,children:[(0,m.jsx)(X.xB,{children:(0,m.jsx)(v.Z,{id:"3AQtlf",defaultMessage:[{type:2,value:"failureCount",style:null},{type:0,value:" out of "},{type:2,value:"totalCount",style:null},{type:0,value:" "},{type:6,value:"totalCount",options:{one:{value:[{type:0,value:"language"}]},other:{value:[{type:0,value:"languages"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" failed to import"}],values:{failureCount:i.length,totalCount:a.length+i.length}})}),(0,m.jsx)(X.fe,{children:(0,m.jsxs)(Y.Z,{data:d,children:[(0,m.jsx)(G.Z,{overrides:ee,children:function(e){return e.success?(0,m.jsx)(Q,{size:20}):(0,m.jsx)(N,{size:20})}}),(0,m.jsx)(G.Z,{header:c(te.languageLabel),children:function(e){return(0,m.jsx)(P,{children:e.name})}}),(0,m.jsx)(G.Z,{header:c(te.importStatusLabel),children:function(e){return(0,m.jsx)(P,{children:e.importStatus})}}),(0,m.jsx)(G.Z,{header:c(te.onOffLabel),children:function(e){return(0,m.jsx)(P,{children:e.status})}})]})})]})},ie=function(e){var t=(0,V.useState)(!1),a=(0,F.Z)(t,2),n=a[0],i=a[1],o=e.importResponse,r=o.localeImported,s=o.localeErrored,u=s.length,c=r.length+s.length;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)($,{children:[(0,m.jsx)(v.Z,{id:"ZNP403",defaultMessage:[{type:2,value:"failureCount",style:null},{type:0,value:" out of "},{type:2,value:"totalCount",style:null},{type:0,value:" "},{type:6,value:"totalCount",options:{one:{value:[{type:0,value:"language"}]},other:{value:[{type:0,value:"languages"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" failed to import"}],values:{failureCount:u,totalCount:c}}),(0,m.jsx)(H.zx,{kind:H.TO.secondary,overrides:K,onClick:function(){return i(!0)},children:(0,m.jsx)(v.Z,{id:"Cw3CRP",defaultMessage:[{type:0,value:"View"}]})})]}),n&&(0,m.jsx)(ne,(0,l.Z)((0,l.Z)({},e),{},{onClose:function(){return i(!1)}}))]})},le=function(e){var t=e.localizationData.enableLocalisation,a=(0,f.Zn)().location,n=a.id,i=a.attributes.systemName,o=(0,u.useMutation)((0,d.importTranslation)({path:{eventName:i},query:{location_uuid:n}}),{onSuccess:function(t){t.localeErrored.length>0?(0,g.Eo)((0,m.jsx)(ie,(0,l.Z)({importResponse:t},e)),{autoHideDuration:0}):(0,g.XA)((0,m.jsx)(v.Z,{id:"jo0XUW",defaultMessage:[{type:0,value:"File has been imported successfully."}]}))},onError:function(){(0,g.Eo)((0,m.jsx)(v.Z,{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]}))}}),r=o.mutate,s=o.isLoading,p=(0,V.createRef)();return(0,m.jsxs)(m.Fragment,{children:[s&&(0,m.jsx)(c.A,{}),(0,m.jsx)(H.zx,{type:"button",overrides:J,onClick:function(){var e;return null===(e=p.current)||void 0===e?void 0:e.click()},disabled:!t,children:(0,m.jsx)(v.Z,{id:"z2775Q",defaultMessage:[{type:0,value:"Import"}]})}),(0,m.jsx)(R,{type:"file",name:"language",ref:p,accept:".csv",multiple:!1,onChange:function(){var e,t;if(null!==(e=p.current)&&void 0!==e&&null!==(t=e.files)&&void 0!==t&&t.length){var a=new FormData;a.append("file",p.current.files[0],p.current.files[0].name),r(a),p.current.value=""}}})]})},oe=a(81700),re=function(e){var t=e.enabled,a=(0,f.Zn)().location,n=a.id,i=a.attributes.systemName;return(0,m.jsx)(H.zx,(0,l.Z)((0,l.Z)({},t&&{$as:"a",href:(0,oe.stringifyUrl)({url:"/".concat(i,"/api/v2/translations/export.csv"),query:{location_uuid:n}})}),{},{overrides:J,kind:H.TO.secondary,disabled:!t,download:"translations.csv",children:(0,m.jsx)(v.Z,{id:"rPiBYu",defaultMessage:[{type:0,value:"Export"}]})}))},se=(0,r.vU)({genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]}}),ue=function(){var e=(0,f.Zn)().location,t=e.id,a=e.attributes.systemName,r=(0,s.Z)().formatMessage,v=(0,u.useQueryClient)(),x={path:{eventName:a},query:{location_uuid:t}},y=(0,u.useQuery)(["localization",x],d.getLocalizationPreferences),j=y.data,b=y.isLoading,Z=y.error,z=y.refetch,C=(0,u.useMutation)((0,d.putLocalizationPreferences)(x),{onMutate:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var a,n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.locales,n=t.enableLocalisation,e.next=3,v.cancelQueries(["localization",x]);case 3:return o=v.getQueryData(["localization",x]),v.setQueryData(["localization",x],(0,l.Z)((0,l.Z)({},o),{},{enabledLocales:a,enableLocalisation:n})),e.abrupt("return",{previousState:o});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,a){(0,g.Eo)(r(se.genericError)),v.setQueryData(["localization",x],a.previousState)},onSettled:function(){v.invalidateQueries(["localization",x])}}),w=C.isLoading,M=C.mutate;return b?(0,m.jsx)(A,{}):Z?(0,m.jsx)(h.m,{onButtonClick:function(){return z()}}):j?(0,m.jsxs)(m.Fragment,{children:[w&&(0,m.jsx)(c.A,{}),(0,m.jsx)(p.q,{}),(0,m.jsx)(L,{checked:j.enableLocalisation,onChange:function(e){M({locales:j.enabledLocales,enableLocalisation:e.target.checked})}}),(0,m.jsxs)(E,{children:[(0,m.jsx)(re,{enabled:j.enableLocalisation}),(0,m.jsx)(le,{localizationData:j})]}),(0,m.jsx)(_,{localizationData:j,onChange:function(e,t){var a=j.enabledLocales,i=j.enableLocalisation,l=t?[].concat((0,n.Z)(a),[e]):a.filter((function(t){return t!==e}));M({locales:l,enableLocalisation:i})}})]}):null}}}]);
//# sourceMappingURL=561.090877bf.chunk.js.map