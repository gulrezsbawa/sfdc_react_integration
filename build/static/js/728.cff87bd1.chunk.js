"use strict";(self.webpackChunk_jifflenow_selfserve=self.webpackChunk_jifflenow_selfserve||[]).push([[728],{94728:function(e,a,t){t.r(a),t.d(a,{default:function(){return A}});var n=t(96234),i=t(30969),r=(t(83971),t(65944)),l=t(55976),o=t(33179),s=t(63056),d=t(65470),u=(0,t(9930).zo)("header",(function(e){var a=e.$theme.sizing;return{paddingLeft:a.scale800,paddingRight:a.scale800,paddingTop:a.scale200,paddingBottom:a.scale200}})),c=t(37574),v=function(){return(0,c.jsxs)(u,{children:[(0,c.jsx)(d.Title,{children:(0,c.jsx)(s.Z,{id:"M3AT73",defaultMessage:[{type:0,value:"Integrations"}]})}),(0,c.jsx)(d.PageHint,{children:(0,c.jsx)(s.Z,{id:"5OdKlY",defaultMessage:[{type:0,value:"Manage Integrations"}]})})]})},g=t(33028),f=t(35207),m=t(44141),p=t(5047),h=(t(274),t(54415)),y=t(8967),j=function(e){var a=e.agGridReact,t=e.refetch,n=void 0===a.props.rowData;return(0,c.jsxs)(h.aR,{children:[n?(0,c.jsx)(h.Pz,{size:93}):(0,c.jsx)(h.e5,{size:93}),(0,c.jsx)(h.CM,{children:n?(0,c.jsx)(s.Z,{id:"HxOy0b",defaultMessage:[{type:0,value:"Something went wrong. Please try again."}]}):(0,c.jsx)(s.Z,{id:"jQXpV/",defaultMessage:[{type:0,value:"No integrations to show"}]})}),n&&(0,c.jsx)(h.VX,{type:"button",kind:y.TO.secondary,onClick:t,children:(0,c.jsx)(s.Z,{id:"NJMO8m",defaultMessage:[{type:0,value:"Retry"}]})})]})},M=t(55364),x=t(23994),b=t(92570),S=t(28958),C=t(57154),w=(0,M.vU)({makeActive:{id:"Cuqw9Q",defaultMessage:[{type:0,value:"Make Active"}]},makeInactive:{id:"7OMYCo",defaultMessage:[{type:0,value:"Make Inactive"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]},inactiveSuccess:{id:"Z40tjH",defaultMessage:[{type:1,value:"name"},{type:0,value:" inactivated successfully"}]},activeSuccess:{id:"dkXEgV",defaultMessage:[{type:1,value:"name"},{type:0,value:" activated successfully"}]}}),Z=(0,M.vU)({labelIntegrationMore:{id:"Sjseq0",defaultMessage:[{type:0,value:"Integration more option"}]}}),k=function(e){var a,t;return null===(a=(t=e.item).onItemSelect)||void 0===a?void 0:a.call(t,e)},I=function(e){var a=e.data,t=e.api,n=e.refetch,i=(0,f.Z)().formatMessage,r=(0,o.Zn)().location,s=r.id,d=void 0===s?"":s,u=r.attributes.systemName,v=(0,l.useMutation)("updateSelfServeIntegrations",(0,l.updateSelfServeIntegrations)({path:{eventName:u,integrationUuid:a.uuid}}),{onSuccess:function(e){var r=e.data;n(),t.hideOverlay(),r.integration_users.length&&(0,C.XA)(i(w[a.enabled?"inactiveSuccess":"activeSuccess"],{name:a.integration_name}))},onError:function(){t.hideOverlay(),(0,C.Eo)(i(w.genericError))}}).mutate,g=function(){t.showLoadingOverlay(),v({active:!a.enabled,current_location_uuid:d})},m=[!a.enabled&&{label:i(w.makeActive),onItemSelect:g,dataPendo:"engagement-type/make-active"},a.enabled&&{label:i(w.makeInactive),onItemSelect:g,dataPendo:"engagement-type/make-inactive"}].filter(Boolean);return(0,c.jsx)(b.Z,{items:m,onItemSelect:k,overrides:h._h})},R=function(e){var a=(0,f.Z)().formatMessage;return(0,c.jsx)(x.yz,{popoverMargin:8,content:(0,c.jsx)(I,(0,g.Z)({},e)),placement:x.r4.bottomRight,overrides:h.M_,children:(0,c.jsx)(y.hU,{size:20,overrides:h.jj,"aria-label":a(Z.labelIntegrationMore),children:(0,c.jsx)(S.g4x,{})})})},O=(0,M.vU)({integration_name:{id:"GaVhX4",defaultMessage:[{type:0,value:"Name"}]},enabled:{id:"VYwlZW",defaultMessage:[{type:0,value:"Status"}]}}),_=[{field:"integration_name",sortable:!1},{field:"enabled",sortable:!1,cellRenderer:"statusCell"},{field:"actions",pinned:"right",resizable:!1,maxWidth:50,cellRenderer:"actionCell",headerComponent:"actionHeader",headerComponentParams:{columnHeaderNames:O}}],N={defaultColDef:{lockPinned:!0,resizable:!0},domLayout:"autoHeight",enableCellTextSelection:!0,suppressCellSelection:!0,loadingOverlayComponent:"listLoader",noRowsOverlayComponent:"noRowsAndError"},z=function(e){var a=e.setGridApi,t=e.data,n=e.refetch,i=(0,f.Z)().formatMessage;return(0,c.jsx)(h.fC,{className:"ag-theme-bright",children:(0,c.jsx)(m.AgGridReact,(0,g.Z)((0,g.Z)({},N),{},{rowData:t,columnDefs:_.map((function(e){return(0,g.Z)((0,g.Z)((0,g.Z)({},e),e.field&&O[e.field]?{headerName:i(O[e.field])}:null),e.field&&"actions"===e.field?{cellRendererParams:{refetch:n}}:null)})),modules:[p.I],onGridReady:function(e){var t=e.api;t.sizeColumnsToFit(),a(t)},frameworkComponents:{statusCell:d.StatusCell,actionCell:R,actionHeader:h.Bv,noRowsAndError:j,listLoader:h.Wi},noRowsOverlayComponentParams:{refetch:n}}))})},A=function(){var e=(0,i.useState)(null),a=(0,n.Z)(e,2),t=a[0],s=a[1],d=(0,o.Zn)(),u=d.location,g=d.privileges,f=u||{},m=f.id,p=void 0===m?"":m,h=f.attributes,y=(h=void 0===h?{}:h).systemName,j=void 0===y?"":y,M=(0,l.useSelfServeIntegrations)({path:{eventName:j},query:{current_location_uuid:p}},{enabled:null===g||void 0===g?void 0:g.canManageIntegrations,onSuccess:function(){return null===t||void 0===t?void 0:t.hideOverlay()},onError:function(){return null===t||void 0===t?void 0:t.showNoRowsOverlay()}}),x=M.data,b=M.isLoading,S=M.isFetching,C=M.refetch;return(b||S)&&(null===t||void 0===t||t.showLoadingOverlay()),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.q,{}),(0,c.jsx)(v,{}),(0,c.jsx)(z,{setGridApi:s,data:null===x||void 0===x?void 0:x.data.integrations,refetch:C})]})}}}]);
//# sourceMappingURL=728.cff87bd1.chunk.js.map