"use strict";(self.webpackChunk_jifflenow_selfserve=self.webpackChunk_jifflenow_selfserve||[]).push([[683],{63184:function(e,t,n){n.d(t,{$s:function(){return d},Hr:function(){return u},NI:function(){return s},eb:function(){return l}});var a=n(56666),i=n(33028),r=n(9930),o=n(56147),s=(0,r.zo)(o.N,(function(e){return{marginBottom:e.$theme.sizing.scale700}})),l=(0,r.zo)("header",(function(e){var t=e.$theme,n=t.typography,r=t.sizing,o=t.breakpoints,s=e.$isHidden;return(0,i.Z)((0,i.Z)({marginTop:0,display:s?"none":"block",marginBottom:r.scale800,maxWidth:"282px"},n.font350),{},(0,a.Z)({fontWeight:400},o.medium,{marginBottom:r.scale600,flexBasis:"100%"}))})),u=(0,r.zo)("div",(function(e){var t=e.$theme,n=t.colors,a=t.sizing,i=e.$isHidden;return{flexBasis:"100%",borderBottomColor:n.mono400,borderBottomStyle:"solid",borderBottomWidth:"1px",marginTop:a.scale600,marginBottom:a.scale600,display:i?"none":"block"}})),d=(0,r.zo)("header",(function(e){var t=e.$theme,n=t.typography,r=t.sizing,o=t.breakpoints,s=e.$isHidden;return(0,i.Z)((0,i.Z)({marginTop:0,marginBottom:r.scale800},n.font650),{},(0,a.Z)({display:s?"none":"block",flexBasis:"100%",maxWidth:"282px"},o.medium,(0,i.Z)((0,i.Z)({},n.font550),{},{marginBottom:r.scale600})))}))},23683:function(e,t,n){n.r(t),n.d(t,{ProfileDrawer:function(){return Xc},default:function(){return Xc}});var a,i,r=n(30969),o=n(45271),s=n(55976),l=n(57579),u=n(20430),d=n(37574),c=(0,r.createContext)(void 0),p=function(e){var t=e.children,n=(0,o.UO)().userId,a=(0,s.useFetchUser)(n),i=a.isLoading,p=a.error,f=a.refetch,m=a.data,g=(0,r.useMemo)((function(){return{data:m?m.data:{},refetch:f}}),[m,f]);return p?(0,d.jsx)(l.m,{onButtonClick:function(){return f()}}):(0,d.jsxs)(d.Fragment,{children:[!m&&i&&(0,d.jsx)(u.$,{}),m&&(0,d.jsx)(c.Provider,{value:g,children:t})]})},f=function(){var e=(0,r.useContext)(c);return e.data},m=n(96234),g=n(48463),v=n(70104),h=(0,r.createContext)(void 0),y=function(e){var t=e.onCompleted,n=(0,s.useEventTypes)(),a=n.isLoading,i=n.data,u=n.error,c=n.refetch,p=new URLSearchParams((0,o.TH)().search).get("location"),f=(0,g.tX)({variables:{uuid:new URLSearchParams((0,o.TH)().search).get("location")},skip:!p}),m=f.loading,h=f.roles,y=f.error,x=f.refetch;return(0,r.useEffect)((function(){p&&i&&h?t({eventTypes:i,location:h}):i&&!p&&t({eventTypes:i,location:void 0})}),[i,h,p,t]),u||y?(0,d.jsx)(l.m,{onButtonClick:function(){return u?c():x()}}):a||m?(0,d.jsx)(v.A,{noBackground:!0}):null},x=function(e){var t=e.children,n=(0,r.useState)(void 0),a=(0,m.Z)(n,2),i=a[0],o=a[1];return i?(0,d.jsx)(h.Provider,{value:i,children:t}):(0,d.jsx)(y,{onCompleted:function(e){return o(e)}})},b=function(){var e=(0,r.useContext)(h);return e},Z=n(32723),j=n(34795),S=n(55364),M=n(35207),C=n(57106),T=n(33028),A={selectedKey:void 0,tempSelectedKey:void 0},E=function(e,t){switch(t.type){case"setSelectedKey":return(0,T.Z)((0,T.Z)({},e),{},{selectedKey:t.payload});case"setTempSelectedKey":return(0,T.Z)((0,T.Z)({},e),{},{tempSelectedKey:t.payload});default:return e}},w=(0,r.createContext)({state:A,dispatch:function(){}}),I=function(e){var t=e.children,n=(0,r.useReducer)(E,A),a=(0,m.Z)(n,2),i=a[0],o=a[1],s=(0,r.useMemo)((function(){return{state:i,dispatch:o}}),[i]);return(0,d.jsx)(w.Provider,{value:s,children:t})},R=function(){var e=(0,r.useContext)(w);if(void 0===e)throw new Error("useNavProvider must be used within a NavProvider");return e},k=(0,S.vU)({confirmationHeader:{id:"penBJD",defaultMessage:[{type:0,value:"Unsaved Changes"}]},confirmationMessage:{id:"bu9gFH",defaultMessage:[{type:0,value:"You have unsaved changes, would you like to save and continue?"}]},cancelButtonLabel:{id:"qFwf8L",defaultMessage:[{type:0,value:"Discard"}]},successButtonLabel:{id:"R1HYj0",defaultMessage:[{type:0,value:"Save"}]}}),L=(0,r.createContext)({isDirty:!1,setIsDirty:function(){},setShowConfirmation:function(){},onCloseConfirmation:function(){},onSuccessConfirmation:function(){}}),z=function(e){var t=e.children,n=(0,M.Z)().formatMessage,a=(0,r.useState)(!1),i=(0,m.Z)(a,2),o=i[0],s=i[1],l=(0,r.useState)(!1),u=(0,m.Z)(l,2),c=u[0],p=u[1],f=(0,r.useState)((function(){})),g=(0,m.Z)(f,2),v=g[0],h=g[1],y=(0,r.useState)((function(){})),x=(0,m.Z)(y,2),b=x[0],S=x[1],T=R(),A=T.state.tempSelectedKey,E=T.dispatch,w=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!1),e.next=3,b();case 3:void 0===e.sent&&(s(!1),v());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=(0,r.useMemo)((function(){return{isDirty:o,setIsDirty:s,setShowConfirmation:p,onSuccessConfirmation:S,onCloseConfirmation:h}}),[o]);return(0,d.jsxs)(L.Provider,{value:I,children:[c&&(0,d.jsx)(C.U,{closeable:!0,onClose:function(){p(!1),A&&E({type:"setTempSelectedKey",payload:void 0})},onCancel:function(){p(!1),v()},onSuccess:w,heading:n(k.confirmationHeader),message:n(k.confirmationMessage),cancelLabel:n(k.cancelButtonLabel),successLabel:n(k.successButtonLabel)}),t]})},D=function(){var e=(0,r.useContext)(L);if(void 0===e)throw new Error("useDirtyCheck must be used within a ProfileSectionDirtyCheckProvider");return e},B=n(27690),O=n(10560),U=n(25870),P={DrawerContainer:{style:{borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0}}},N=function(e){var t=e.children,n=(0,o.k6)(),a=(0,U.bS)().app===U.fY.WideScale;return(0,d.jsx)(B.dy,{size:(0,O.a)("medium")&&a?"90%":"100%",isOpen:!0,closeable:!1,onClose:function(){1===n.length?n.replace("/"):n.goBack()},animate:a,overrides:a?void 0:P,children:t})},F=n(59740),Q=n(68079),W=n(54558),H=n(44012),$=n(63056),q=n(52427),J=n(52850),K=n(99519),V=n(56666),X=n(9930),G=n(56147),Y=n(8967),_=(0,X.zo)("div",{display:"flex",flexDirection:"column",height:"100vh"}),ee=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",flex:"1 1 0%",overflowY:"scroll"},t.medium,{paddingLeft:"223px"})})),te=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing;return(0,V.Z)({width:"100%",paddingLeft:a.scale600,paddingRight:a.scale600,paddingTop:"68px",paddingBottom:a.scale700,flex:"1 1 0%",overflowY:"scroll"},n.medium,{paddingLeft:"87px",paddingRight:a.scale900,paddingTop:a.scale850,paddingBottom:a.scale850})})),ne=(0,X.w1)(B.gM,(function(e){return{boxShadow:e.$hasMenu?"none":"0px 10px 20px rgba(216, 216, 216, 0.4);",flexShrink:0}})),ae=(0,X.w1)(B.bk,(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({justifyContent:"flex-end"},t.medium,{paddingLeft:"112px",boxShadow:"0px -1px 8px rgba(216, 216, 216, 0.4)"})})),ie=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing,i=t.colors;return(0,V.Z)({display:"flex",justifyContent:"center",paddingTop:a.scale400,paddingBottom:a.scale400,paddingRight:a.scale900,paddingLeft:a.scale900,backgroundColor:i.mono100},n.medium,{justifyContent:"flex-end"})})),re=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.mediaQuery;return(0,T.Z)((0,T.Z)({},n.HeadingSmall),{},(0,V.Z)({minWidth:"250px"},a.medium,(0,T.Z)({},n.HeadingMedium)))})),oe=(0,X.zo)(G.N,(function(e){return{display:"flex",flexDirection:"row",marginBottom:0,color:e.$theme.colors.mono700}})),se=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{paddingBottom:t.scale500,paddingLeft:t.scale600,paddingRight:t.scale600,paddingTop:t.scale500}})),le=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"none"},t.medium,{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"})})),ue=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({marginLeft:"auto"},t.medium,{display:"none"})})),de=(0,X.zo)(Y.zx,(function(e){var t=e.$theme,n=t.sizing,a=t.mediaQuery;return(0,V.Z)({minWidth:"80px",marginRight:n.scale400},a.small,{minWidth:"133px"})})),ce=(0,X.zo)("h2",(function(e){var t=e.$theme,n=t.typography,a=t.sizing,i=t.colors;return(0,T.Z)((0,T.Z)({},n.Subtitle1),{},{color:i.mono700,paddingTop:a.scale200,display:"flex",marginTop:0})})),pe=(0,X.zo)("div",{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"center"}),fe=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.colors;return(0,T.Z)((0,T.Z)({},n.Paragraph1),{},{color:a.mono800})})),me=(0,X.zo)("div",(function(e){return{display:"flex",minWidth:e.$location?0:"204px"}})),ge=(0,X.zo)("div",{display:"flex",alignItems:"center"}),ve=(0,X.zo)("div",{display:"flex",alignItems:"center",minWidth:"204px"}),he=(0,X.zo)("div",{marginLeft:"auto"}),ye=(0,X.zo)("div",(function(e){return{color:e.$theme.colors.mono700,textTransform:"uppercase"}})),xe=(0,X.zo)("label",(function(e){var t=e.$theme,n=t.typography,a=t.sizing,i=t.colors,r=t.mediaQuery;return(0,T.Z)((0,T.Z)({},n.Subtitle1),{},(0,V.Z)({display:"flex",color:i.mono800,marginBottom:a.scale200,marginRight:a.scale600},r.small,{marginBottom:0}))})),be=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.mediaQuery;return(0,V.Z)({display:"flex",marginBottom:n.scale200},a.small,{marginBottom:0})})),Ze=(0,X.zo)("div",{fontWeight:600}),je=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{marginLeft:t.scale200,marginRight:t.scale200}})),Se=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.colors;return(0,T.Z)((0,T.Z)({},n.Subtitle1),{},{color:a.mono900,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})})),Me=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.colors;return(0,T.Z)((0,T.Z)({},n.font400),{},{color:a.mono700})})),Ce=(0,X.w1)(Me,(function(e){return{marginLeft:e.$theme.sizing.scale200,flex:"none"}})),Te=(0,X.zo)("div",{flex:"none"}),Ae=(0,r.createContext)(null),Ee=function(e){var t=e.children,n=(0,r.useState)(null),a=(0,m.Z)(n,2),i=a[0],o=a[1],s=(0,r.useMemo)((function(){return{campaign:i,setCampaign:o}}),[i,o]);return(0,d.jsx)(Ae.Provider,{value:s,children:t})},we=function(){var e=(0,r.useContext)(Ae);return e},Ie=n(23994),Re={DropdownContainer:{style:{minWidth:"204px"}},Popover:{props:{placement:Ie.r4.bottomLeft}}},ke=["systemName"],Le=function(e){return{id:e.location,label:e.displayName,mode:e.mode}},ze=q.ou.local(),De=function(e){var t=e.setDefaultValue,n=void 0===t||t,a=e.eventType,i=e.eventTypes,l=f().id,u=we(),c=u.campaign,p=u.setCampaign,g=(0,r.useState)([]),v=(0,m.Z)(g,2),h=v[0],y=v[1],x=(0,M.Z)().formatMessage,b=new URLSearchParams((0,o.TH)().search).get("location"),Z=(0,s.useUserMappedCampaigns)({id:l,eventType:null!==i&&void 0!==i&&i.length?i:a,dateInterval:"".concat(ze.toISODate(),"--").concat(ze.plus({years:2}).toISODate()),onResolve:function(e){var t=e.data.map((function(e){var t=e.id,n=e.attributes,a=n.systemName,i=(0,F.Z)(n,ke);return(0,T.Z)({location:t,eventName:a},i)}));y(t),n&&p(b&&t.find((function(e){return e.location===b}))||t[0])}}),j=Z.run,S=Z.isLoading;(0,r.useEffect)((function(){j({eventTypes:i})}),[i]);return b?null:(0,d.jsx)(J.Ph,{searchInput:!0,clearable:!1,onCloseResetsInput:!0,onBlurResetsInput:!0,placeholder:"Select",isLoading:S,options:h.map(Le),value:(c?[c]:[]).map(Le),getOptionLabel:function(e){var t=e.option,n=t.label,a=t.mode;return(0,d.jsxs)(d.Fragment,{children:[n,a&&(0,d.jsx)(ye,{children:x(K.n[a])})]})},onChange:function(e){var t=e.option,n=h.find((function(e){return e.location===(null===t||void 0===t?void 0:t.id)}));p(n)},overrides:Re})},Be=n(55750),Oe=n(88597),Ue=(0,S.vU)({eventType:{id:"Fp0Jt0",defaultMessage:[{type:0,value:"Instance Type"}]}}),Pe=function(e){return{id:e,label:Oe.mS[e]}},Ne=function(e){var t=e.types,n=void 0===t?[]:t,a=e.onChange,i=(0,M.Z)().formatMessage,r=(0,s.useEventTypes)(),o=r.isLoading,l=r.data;return(0,d.jsx)(Be.QV,{label:i(Ue.eventType),onChange:function(e){return a(e.map((function(e){return e.id})))},options:(null===l||void 0===l?void 0:l.data.map(Pe))||[],overrides:Oe.OD,value:n.map(Pe),isLoading:o,filterOptions:function(e){return e.filter((function(e){return"Emeet"!==e.id}))}})},Fe=function(e){var t=e.eventType,n=(0,r.useState)([]),a=(0,m.Z)(n,2),i=a[0],s=a[1],l=new URLSearchParams((0,o.TH)().search).get("location");return(0,d.jsxs)(d.Fragment,{children:["Emeet"!==t&&!l&&(0,d.jsx)(Ne,{types:i,onChange:function(e){return s(e)}}),(0,d.jsx)(De,{eventType:t,eventTypes:i},t)]})},Qe=(0,S.vU)({modalHeader:{id:"g6QKE+",defaultMessage:[{type:0,value:"Your changes will be lost."}]},modalMessage:{id:"rO2w17",defaultMessage:[{type:0,value:"Keep changes?"}]},cancelButtonLabel:{id:"qFwf8L",defaultMessage:[{type:0,value:"Discard"}]},successButtonLabel:{id:"83xnR6",defaultMessage:[{type:0,value:"Keep"}]}}),We=function(e){var t=e.isDisabled,n=void 0!==t&&t,a=e.isLoading,i=void 0!==a&&a,o=e.hasOnlyNext,s=void 0!==o&&o,l=e.hasForm,u=void 0!==l&&l,c=e.isLastItem,p=e.onNext,f=e.onDone,g=e.onSave,v=e.onDiscard,h=e.onSaveAndNext,y=e.pendoPrefix,x=(0,W.Pi)().meta.eMeetProfileSetupReminded,b=(0,M.Z)().formatMessage,Z=(0,r.useState)(!1),j=(0,m.Z)(Z,2),S=j[0],T=j[1];return(0,d.jsx)(ae,{children:s?c?(0,d.jsx)(de,{type:"button",disabled:n,isLoading:i,onClick:f,"data-pendo":"".concat(y,"/done"),children:(0,d.jsx)($.Z,{id:"80339c",defaultMessage:[{type:0,value:"Done"}]})}):(0,d.jsx)(de,{type:"button",disabled:n,isLoading:i,onClick:p,"data-pendo":"".concat(y,"/next"),children:(0,d.jsx)($.Z,{id:"E9qMfn",defaultMessage:[{type:0,value:"Next"}]})}):(0,d.jsxs)(d.Fragment,{children:[S&&(0,d.jsx)(C.U,{heading:b(Qe.modalHeader),message:b(Qe.modalMessage),cancelLabel:b(Qe.cancelButtonLabel),successLabel:b(Qe.successButtonLabel),onClose:function(){return T(!1)},onCancel:function(){T(!1),null===v||void 0===v||v()},onSuccess:function(){return T(!1)}}),(0,d.jsx)(de,{type:"button",kind:Y.TO.tertiary,disabled:n,onClick:function(){return T(!0)},"data-pendo":"".concat(y,"/discard"),children:(0,d.jsx)($.Z,{id:"qFwf8L",defaultMessage:[{type:0,value:"Discard"}]})}),x?(0,d.jsx)(de,{type:"button",disabled:n,isLoading:i,onClick:g,"data-pendo":"".concat(y,"/save"),children:(0,d.jsx)($.Z,{id:"R1HYj0",defaultMessage:[{type:0,value:"Save"}]})}):null,c?(0,d.jsx)(de,{type:"submit",disabled:n,isLoading:i,"data-pendo":"".concat(y,"/save-and-done"),children:(0,d.jsx)($.Z,{id:"xLqvQ8",defaultMessage:[{type:0,value:"Save And Done"}]})}):(0,d.jsx)(de,{type:u?"submit":"button",disabled:n,isLoading:i,onClick:u?void 0:h,"data-pendo":"".concat(y,"/save-and-next"),children:(0,d.jsx)($.Z,{id:"hb+6i7",defaultMessage:[{type:0,value:"Save And Next"}]})})]})})},He=n(28958),$e=n(7905),qe=n(24944),Je=n(57154),Ke=(0,S.vU)({label:{id:"qcV3Ic",defaultMessage:[{type:0,value:"Active"}]},success:{id:"p1O6nJ",defaultMessage:[{type:0,value:"User status updated successfully."}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]},modalHeader:{id:"O0/5Nt",defaultMessage:[{type:0,value:"Are you sure?"}]},modalMessage:{id:"imj+Xn",defaultMessage:[{type:0,value:"Inactive user cannot access Jifflenow."}]},cancelButtonLabel:{id:"qFwf8L",defaultMessage:[{type:0,value:"Discard"}]},successButtonLabel:{id:"R1HYj0",defaultMessage:[{type:0,value:"Save"}]}}),Ve=function(){var e=(0,M.Z)().formatMessage,t=(0,s.usePortalV2Client)(),n=(0,qe.useQueryClient)(),a=f(),i=a.id,o=a.attributes.active,l=(0,r.useState)(!1),u=(0,m.Z)(l,2),c=u[0],p=u[1],g=(0,r.useState)(!1),h=(0,m.Z)(g,2),y=h[0],x=h[1],b=function(){x(!1)},S=function(){var a=(0,j.Z)((0,Z.Z)().mark((function a(){var r,l;return(0,Z.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return p(!0),a.prev=1,a.next=4,(0,s.patchUserProfile)(t,{active:!o},i);case 4:n.invalidateQueries("fetchUser"),p(!1),x(!1),(0,Je.XA)(e(Ke.success)),a.next=18;break;case 10:if(a.prev=10,a.t0=a.catch(1),p(!1),!(a.t0 instanceof s.HttpError&&403===a.t0.response.status)){a.next=17;break}return l=null!==(r=a.t0.errors[0].title)&&void 0!==r?r:e(Ke.genericError),(0,Je.Eo)(l),a.abrupt("return");case 17:(0,Je.Eo)(e(Ke.genericError));case 18:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(){return a.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[c&&(0,d.jsx)(v.A,{}),y&&(0,d.jsx)(C.U,{heading:e(Ke.modalHeader),message:e(Ke.modalMessage),cancelLabel:e(Ke.cancelButtonLabel),successLabel:e(Ke.successButtonLabel),onClose:b,onCancel:b,onSuccess:S}),(0,d.jsx)(oe,{label:e(Ke.label),"data-pendo":"profile/is-active-toggle",children:(0,d.jsx)($e.XZ,{checkmarkType:"toggle_round",id:"user_active_status",checked:o,onChange:function(){o?x(!0):S()},disabled:c,ariaLabel:e(Ke.label)})})]})},Xe={Body:{style:function(e){var t=e.$theme,n=t.colors,a=t.borders;return{backgroundColor:n.white,borderWidth:a.radius100,borderStyle:"solid",borderColor:n.mono200,borderBottomLeftRadius:a.radius100,borderBottomRightRadius:a.radius100,borderTopRightRadius:a.radius100,borderTopLeftRadius:a.radius100,boxShadow:"0px 10px 20px rgba(216, 216, 216, 0.4)",minWidth:"156px",zIndex:1}}}},Ge={DropdownContainer:{style:{minWidth:"204px"}},Popover:{props:{placement:Ie.r4.bottomLeft}}},Ye=function(){var e=(0,B.yT)().closeDrawer,t=(0,U.bS)().app,n=(0,W.Pi)().data,a=n.id,i=n.attributes.privileges.canMarkUsersActive,r=f(),o=r.id,s=r.attributes,l=s.firstName,u=void 0===l?"":l,c=s.lastName,p=void 0===c?"":c,m=a===o;return(0,d.jsxs)(ne,{$hasMenu:!0,children:[t===U.fY.WideScale&&(0,d.jsx)(B.cC,{onClick:function(){return e()}}),(u||p)&&(0,d.jsx)(re,{children:"".concat(u," ").concat(p)}),i&&!m&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(le,{children:(0,d.jsx)(Ve,{})}),(0,d.jsx)(ue,{children:(0,d.jsx)(Ie.yz,{overrides:Xe,placement:Ie.r4.bottomRight,content:function(){return(0,d.jsx)(se,{children:(0,d.jsx)(Ve,{})})},returnFocus:!0,autoFocus:!0,children:(0,d.jsx)(Y.zx,{kind:Y.TO.minimal,children:(0,d.jsx)(He.g4x,{color:"mono700",size:24})})})})]})]})},_e=(0,X.zo)("div",{display:"flex"}),et=(0,X.zo)("p",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.ParagraphMedium),{},{marginTop:0,marginBottom:0,marginLeft:"auto"})})),tt=function(e){var t=e.label,n=e.checked,a=e.intermediate,i=e.handleSelectAll,r=e.handleDeselectAll,o=e.showCheckbox,s=e.columnName,l=e.disabled;return(0,d.jsx)(_e,{children:o?(0,d.jsx)(et,{children:t}):(0,d.jsx)($e.XZ,{checked:n,isIndeterminate:a,onChange:function(e){e.target.checked?i((0,V.Z)({},s,!0)):r((0,V.Z)({},s,!1))},disabled:l,children:t})})},nt=function(e){var t=e.rowId,n=e.rowName,a=e.rowChecked,i=e.handleSelectItem,r=e.disabled,o=e.ariaLabel;return(0,d.jsx)($e.XZ,{checked:a,onChange:function(e){e.target.checked?i((0,V.Z)({uuid:t},n,!0)):i((0,V.Z)({uuid:t},n,!1))},disabled:r,ariaLabel:o})},at=((0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{height:t.scale1400,boxShadow:"0px -1px 8px rgba(216, 216, 216, 0.4)",display:"flex",justifyContent:"flex-end",alignItems:"center",position:"sticky",bottom:0,left:0,paddingRight:t.scale600}})),(0,X.zo)(Y.zx,(function(e){var t=e.$theme.sizing;return{width:"99px",height:t.scale900,marginRight:t.scale300}})),n(44363)),it=n(37317),rt=n(53052),ot=function(e){var t=e.height,n=(0,X.hQ)(),a=(0,m.Z)(n,2)[1],i={style:{width:"100%",height:"".concat(t)},width:"1000",height:"100",viewBox:"0 0 1000 100",speed:2,primaryColor:a.colors.mono200,secondaryColor:a.colors.mono300};return(0,d.jsx)(at.ZP,(0,T.Z)((0,T.Z)({},i),{},{children:(0,d.jsx)("rect",{y:"0",rx:1,ry:20,width:"1000",height:"100"})}))},st=(0,r.forwardRef)((function(e,t){var n=(0,X.hQ)(),a=(0,m.Z)(n,2)[1];return(0,r.useImperativeHandle)(t,(function(){return{getReactContainerStyle:function(){return{alignSelf:"flex-start",marginTop:a.sizing.scale600}}}})),(0,d.jsx)(it.Z,{flexGridColumnCount:1,overrides:{Block:{style:function(e){var t=e.$theme.sizing;return{marginTop:t.scale100,marginBottom:t.scale100}}}},children:Array.from({length:8}).map((function(e,t){return(0,d.jsx)(rt.ZP,{children:(0,d.jsx)(ot,{height:64})},t)}))})})),lt=(0,X.zo)("div",(function(e){return{marginTop:e.$theme.sizing.scale1400}})),ut=(0,X.zo)("p",{display:"flex",justifyContent:"center"}),dt=(0,X.zo)("div",(function(e){return{display:"flex",justifyContent:"center",marginTop:e.$theme.sizing.scale1000}})),ct=function(e){var t=e.onAddNew,n=e.emptyMessage,a=e.addNewButtonMessage,i=e.showAddButton;return(0,d.jsxs)(lt,{children:[(0,d.jsx)(ut,{children:n}),i&&(0,d.jsx)(dt,{children:(0,d.jsx)(Y.zx,{onClick:t,children:a})})]})},pt=n(92683),ft=(0,S.vU)({search:{id:"4bIsxJ",defaultMessage:[{type:0,value:"Search"}]}}),mt=function(e){var t=e.search,n=e.onSearchChange,a=(0,M.Z)().formatMessage;return(0,d.jsx)(pt.II,{type:"search",value:t,IconAfter:He.olm,onChange:function(e){return null===n||void 0===n?void 0:n(e.target.value)},placeholder:a(ft.search)})},gt=(0,r.createContext)(null),vt=function(e){var t=e.eventType,n=e.children,a=(0,r.useMemo)((function(){return{eventType:null!==t&&void 0!==t?t:""}}),[t]);return(0,d.jsx)(gt.Provider,{value:a,children:n})},ht=function(){var e=(0,r.useContext)(gt);return e},yt={Emeet:"Emeet",Jem:"TradeShow",Jfx:"OngoingSales",Jss:"StaffScheduling",Jbc:"Ebc"},xt=q.ou.local(),bt=function(e){var t=e.id,n=e.attributes;return{id:t,label:n.displayName,mode:n.mode}},Zt=function(e){var t=e.locations,n=e.selectedLocations,a=e.onChange,i=e.isLoading,r=(0,M.Z)().formatMessage,o=t.map(bt),s=n.map(bt);return(0,d.jsx)(J.Ph,{searchInput:!0,clearable:!1,onCloseResetsInput:!0,onBlurResetsInput:!0,placeholder:"Select",isLoading:i,options:o,value:s,getOptionLabel:function(e){var t=e.option,n=t.label,a=t.mode;return(0,d.jsxs)(d.Fragment,{children:[n,a&&(0,d.jsx)(ye,{children:r(K.n[a])})]})},onChange:function(e){var n=(0,m.Z)(e.value,1)[0].id;return a(t.filter((function(e){return e.id===n})))},overrides:Ge})},jt=(0,S.vU)({eventType:{id:"Fp0Jt0",defaultMessage:[{type:0,value:"Instance Type"}]}}),St={TradeShow:"eEvent",Ebc:"Ebc",OngoingSales:"eCampaign",StaffScheduling:"Staff Scheduling",Emeet:"Emeet"},Mt=function(e){return{id:e,label:St[e]}},Ct=function(e){var t=e.eventTypes,n=e.selectedEventTypes,a=e.onChange,i=(0,M.Z)().formatMessage,r=t.map(Mt),o=n.map(Mt);return(0,d.jsx)(Be.QV,{label:i(jt.eventType),onChange:function(e){return a(e.map((function(e){return e.id})))},options:r,overrides:Oe.OD,value:o})},Tt=(0,X.zo)("div",(function(){return{display:"flex",position:"relative",flexGrow:1}})),At=(0,X.zo)("div",{height:"100%",display:"flex",flexDirection:"column"}),Et=(0,X.zo)("div",(function(e){return{display:"flex",justifyContent:"flex-end",marginTop:e.$theme.sizing.scale600,position:"absolute",right:0}})),wt=(0,X.w1)(te,{height:"100%",display:"flex",flexDirection:"column"}),It=(0,X.zo)("div",{display:"flex",alignItems:"center",justifyContent:"center",flex:"1 1 0%"}),Rt=(0,X.zo)("label",(function(e){var t=e.$theme,n=t.typography,a=t.colors;return(0,T.Z)((0,T.Z)({},n.Paragraph1),{},{color:a.mono800})})),kt=(0,X.w1)(te,(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",paddingBottom:0},t.medium,{paddingBottom:0})})),Lt=(0,X.w1)(ie,(function(e){return{position:"sticky",left:0,bottom:0,marginTop:"auto",paddingTop:e.$theme.sizing.scale850}})),zt=n(55819),Dt=n(980),Bt=n(40619),Ot=function(e){var t=e.title,n=b().location||{},a=n.filterStatus,i=n.mode,r=n.displayName,o=n.startDate,s=n.endDate;return(0,d.jsxs)(xe,{children:[(0,d.jsx)(Te,{children:t}),a&&(0,d.jsx)(je,{children:(0,d.jsx)(Oe.N3,{mode:i,status:a})}),r&&(0,d.jsx)(Dt.P,{content:r,showArrow:!0,children:(0,d.jsx)(Se,{children:r})}),o&&s&&(0,d.jsxs)(Ce,{children:["(",(0,Bt._Q)((0,Bt.w)(o),(0,Bt.w)(s)),")"]})]})},Ut=n(41361),Pt=n(71663),Nt=function(e){var t=e.isDirty,n=e.onSave,a=D(),i=a.setIsDirty,o=a.onSuccessConfirmation;(0,r.useEffect)((function(){return i(t),function(){i(!1)}}),[t,i]),(0,r.useEffect)((function(){return o((function(){return function(){return n()}})),function(){o((function(){return function(){}}))}}),[n,o])},Ft=(0,S.vU)({saveSuccess:{id:"AqDViG",defaultMessage:[{type:0,value:"Saved Successfully."}]},genericError:{id:"HxOy0b",defaultMessage:[{type:0,value:"Something went wrong. Please try again."}]}}),Qt=(0,S.vU)({modalHeader:{id:"g6QKE+",defaultMessage:[{type:0,value:"Your changes will be lost."}]},modalMessage:{id:"rO2w17",defaultMessage:[{type:0,value:"Keep changes?"}]},cancelButtonLabel:{id:"qFwf8L",defaultMessage:[{type:0,value:"Discard"}]},successButtonLabel:{id:"83xnR6",defaultMessage:[{type:0,value:"Keep"}]}}),Wt=function(e){var t=e.user,n=e.onNavigate,a=e.selectedLocation,i=e.search,o=e.state,l=e.dispatch,u=(0,M.Z)().formatMessage,c=(0,Pt.y)(),p=(0,s.useQueryClient)(),f=t.id,g=(0,r.useState)(!1),h=(0,m.Z)(g,2),y=h[0],x=h[1],b=a.id,S=a.attributes.systemName,A=o.mapped,E=o.unmapped,w=new Map([].concat((0,Q.Z)(A.mappedItems),(0,Q.Z)(E.mappedItems))),I=!!w.size||void 0!==A.requestAll||void 0!==A.participateAll||void 0!==E.requestAll||void 0!==E.participateAll,R=function(){var e,t=[],n=(0,Ut.Z)(w);try{for(n.s();!(e=n.n()).done;){var a=(0,m.Z)(e.value,2),i=a[0],r=a[1],o=r.canRequest,s=r.canParticipate;t.push({mappingEntityUuid:i,mappingAttributes:{canRequest:o,canParticipate:s}})}}catch(l){n.e(l)}finally{n.f()}return(0,T.Z)((0,T.Z)((0,T.Z)({},(void 0!==A.requestAll||void 0!==A.participateAll)&&{mapped:{selectAll:(0,T.Z)((0,T.Z)({},void 0!==A.requestAll&&{canRequest:A.requestAll}),void 0!==A.participateAll&&{canParticipate:A.participateAll})}}),(void 0!==E.requestAll||void 0!==E.participateAll)&&{unmapped:{selectAll:(0,T.Z)((0,T.Z)({},void 0!==E.requestAll&&{canRequest:E.requestAll}),void 0!==E.participateAll&&{canParticipate:E.participateAll})}}),{},{mappings:t})},k=(0,s.useUserMappingsMutation)({path:{eventName:S,userId:f,mappingType:"EngagementMapping"},query:{search_term:i,location_uuid:b}}),L=k.mutateAsync,z=k.isLoading,D=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){var t;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=R(),e.next=4,L(t);case 4:return(0,Je.XA)(u(Ft.saveSuccess)),l({type:"resetValues"}),p.resetQueries(["userMappings",{path:{mappingType:"EngagementMapping"}}]),e.abrupt("return",void 0);case 10:return e.prev=10,e.t0=e.catch(0),(0,Je.Eo)(u(Ft.genericError)),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:if(e.t1=e.sent,e.t2=void 0,e.t0=e.t1===e.t2,!e.t0){e.next=7;break}e.t0=null===n||void 0===n?void 0:n();case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Nt({isDirty:I,onSave:D}),(0,r.useEffect)((function(){c(I)}),[I,c]);return(0,d.jsxs)(d.Fragment,{children:[z&&(0,d.jsx)(v.A,{}),y&&(0,d.jsx)(C.U,{heading:u(Qt.modalHeader),message:u(Qt.modalMessage),cancelLabel:u(Qt.cancelButtonLabel),successLabel:u(Qt.successButtonLabel),onClose:function(){return x(!1)},onCancel:function(){x(!1),l({type:"discardChanges"})},onSuccess:function(){return x(!1)}}),(0,d.jsx)(We,{isDisabled:!I,onDiscard:function(){return x(!0)},onSave:D,onSaveAndNext:B,pendoPrefix:"profile/campaign/engagement-type"})]})},Ht=n(68083),$t={Root:{style:function(e){return{display:"flex",flexDirection:"column",flexGrow:1,marginTop:e.$theme.sizing.scale600}}},TabList:{style:function(e){return{height:e.$theme.sizing.scale1000}}},TabHighlight:{style:{marginLeft:"1px"}},TabBorder:{style:{display:"none"}}},qt={TabPanel:{style:function(e){return{paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,marginTop:e.$theme.sizing.scale600}}}},Jt=n(94198),Kt=n(19397),Vt=(0,X.zo)("label",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.Paragraph1),{},{marginTop:0,marginBottom:0})})),Xt=(0,X.zo)("div",(function(e){return{paddingTop:e.$theme.sizing.scale1400,display:"flex",flexDirection:"column",alignItems:"center"}})),Gt=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.ParagraphMedium),{},{display:"flex",justifyContent:"center"})})),Yt=(0,S.vU)({requestMeeting:{id:"0RfZmM",defaultMessage:[{type:0,value:"Request meeting"}]}}),_t=function(e){var t=e.checked,n=e.canEdit,a=e.onChange,i=(0,M.Z)().formatMessage;return(0,d.jsx)($e.XZ,{checked:t,onChange:function(e){var t=e.target.checked;return a(t)},disabled:!n,ariaLabel:i(Yt.requestMeeting)})},en=(0,S.vU)({participateInMeeting:{id:"wMOggB",defaultMessage:[{type:0,value:"Participate in meeting"}]}}),tn=function(e){var t=e.checked,n=e.canEdit,a=e.onChange,i=(0,M.Z)().formatMessage;return(0,d.jsx)($e.XZ,{checked:t,onChange:function(e){var t=e.target.checked;return a(t)},disabled:!n,ariaLabel:i(en.participateInMeeting)})},nn=["isEmpty"],an=(0,S.vU)({requestMeetingLabel:{id:"k/5vlS",defaultMessage:[{type:0,value:"Request meeting"}]}}),rn=function(e){var t=e.canEdit,n=e.requestAll,a=e.modifiedRequestMappingCount,i=e.onChange,r=(0,M.Z)().formatMessage;return(0,d.jsx)($e.XZ,{checked:n,isIndeterminate:a>0,onChange:function(e){var t=e.target.checked;return i(t)},disabled:!t,children:r(an.requestMeetingLabel)})},on=function(){var e=(0,M.Z)().formatMessage;return(0,d.jsx)(Gt,{children:e(an.requestMeetingLabel)})},sn=function(e){var t=e.isEmpty,n=(0,F.Z)(e,nn);return t?(0,d.jsx)(on,{}):(0,d.jsx)(rn,(0,T.Z)({},n))},ln=["isEmpty"],un=(0,S.vU)({participateMeetingLabel:{id:"ijCY3h",defaultMessage:[{type:0,value:"Participate in meeting"}]}}),dn=function(e){var t=e.canEdit,n=e.participateAll,a=e.modifiedParticipateMappingCount,i=e.onChange,r=(0,M.Z)().formatMessage;return(0,d.jsx)($e.XZ,{checked:n,isIndeterminate:a>0,onChange:function(e){var t=e.target.checked;return i(t)},disabled:!t,children:r(un.participateMeetingLabel)})},cn=function(){var e=(0,M.Z)().formatMessage;return(0,d.jsx)(Gt,{children:e(un.participateMeetingLabel)})},pn=function(e){var t=e.isEmpty,n=(0,F.Z)(e,ln);return t?(0,d.jsx)(cn,{}):(0,d.jsx)(dn,(0,T.Z)({},n))},fn={TableHeadCell:{style:{paddingLeft:0}},TableBodyCell:{style:{paddingLeft:0}}},mn={BaseButton:{style:function(e){return{marginTop:e.$theme.sizing.scale1000}}}},gn=(0,S.vU)({emptyMessage:{id:"bvzR/r",defaultMessage:[{type:0,value:"No engagement types added"}]},emptyMessageWithoutAddMapped:{id:"f3q6bW",defaultMessage:[{type:0,value:"User is currently not mapped to any Engagement Type."}]},emptyMessageWithoutAddUnmapped:{id:"VCbm5t",defaultMessage:[{type:0,value:"User is currently mapped to all Engagement Types."}]},addEngagementTypeLabel:{id:"BSN9Q2",defaultMessage:[{type:0,value:"Add Engagement type"}]}}),vn=function(e){var t=e.selectedLocation,n=e.isNoEngagementType,a=e.activeTab,i=(0,M.Z)().formatMessage,r=(0,o.k6)(),s=(0,W.Pi)().data.attributes.role,l=t.id,u=t.attributes.systemName;return(0,d.jsxs)(Xt,{children:[i(gn[n?"emptyMessage":"mapped"===a?"emptyMessageWithoutAddMapped":"emptyMessageWithoutAddUnmapped"]),n&&"CSM"===s&&(0,d.jsx)(Y.zx,{overrides:mn,onClick:function(){return r.push("/events/".concat(u,"/engagement-types?location=").concat(l))},children:i(gn.addEngagementTypeLabel)})]})},hn=["CSM","MM","JMM"],yn=["CSM","MM"],xn=function(e){var t,n=e.items,a=e.activeTab,i=e.state,r=e.dispatch,o=e.selectedLocation,s=e.user,l=(0,W.Pi)().data,u=l.id,c=l.attributes,p=c.role,f=c.eventRole,g=s.id,v=s.attributes.role,h=(hn.includes(p)||!!f&&hn.includes(f))&&u!==g,y=yn.includes(v),x=i[a],b=x.initialItems,Z=x.mappedItems,j=x.requestAll,S=x.participateAll,M=x.mappedCount,C=x.unMappedCount,A=0,E=0,w=(0,Ut.Z)(Z);try{for(w.s();!(t=w.n()).done;){var I,R,k=(0,m.Z)(t.value,2),L=k[0],z=k[1],D=b.get(L);void 0===j&&z.canRequest!==(null===(I=D)||void 0===I?void 0:I.canRequest)&&A++,void 0!==j&&z.canRequest!==j&&A++,void 0===S&&z.canParticipate!==(null===(R=D)||void 0===R?void 0:R.canParticipate)&&E++,void 0!==S&&z.canParticipate!==S&&E++}}catch(O){w.e(O)}finally{w.f()}var B=n.map((function(e){var t=Z.get(e.id);return t||(0,T.Z)((0,T.Z)({},e),{},{canRequest:null!==j&&void 0!==j?j:e.canRequest,canParticipate:null!==S&&void 0!==S?S:e.canParticipate})}));return(0,d.jsxs)(Jt.Z,{data:B,emptyMessage:(0,d.jsx)(vn,{isNoEngagementType:!M&&!C,selectedLocation:o,activeTab:a}),overrides:fn,children:[(0,d.jsx)(Kt.Z,{children:function(e){return(0,d.jsx)(Vt,{children:e.name},e.id)}}),(0,d.jsx)(Kt.Z,{header:(0,d.jsx)(sn,{isEmpty:!n.length,canEdit:h&&!y,requestAll:j,onChange:function(e){return r({type:"requestAll",payload:{activeTab:a,requestAll:e}})},modifiedRequestMappingCount:A}),children:function(e){return(0,d.jsx)(_t,{checked:e.canRequest,onChange:function(t){return function(e,t){return r({type:"setCanRequest",payload:{activeTab:a,item:(0,T.Z)((0,T.Z)({},e),{},{canRequest:t})}})}(e,t)},canEdit:h&&!y},e.id)}}),(0,d.jsx)(Kt.Z,{header:(0,d.jsx)(pn,{isEmpty:!n.length,canEdit:h,participateAll:S,onChange:function(e){return r({type:"participateAll",payload:{activeTab:a,participateAll:e}})},modifiedParticipateMappingCount:E}),children:function(e){return(0,d.jsx)(tn,{checked:e.canParticipate,canEdit:h,onChange:function(t){return function(e,t){return r({type:"setCanParticipate",payload:{activeTab:a,item:(0,T.Z)((0,T.Z)({},e),{},{canParticipate:t})}})}(e,t)}},e.id)}})]})},bn=n(92778),Zn=n(21809),jn=function(e){var t=(0,qe.useMutation)((0,s.engagementMappingPreferencesMutationFn)({path:{eventName:e.location.attributes.systemName},query:{location_uuid:e.location.id}})).mutate,n=(0,Zn.Q)(e.totalItems);return(0,d.jsx)(Lt,{children:(0,d.jsx)(bn.t,{currentPageNumber:e.pageNumber,currentPageSize:e.pageSize,onPageNumberChange:e.onPageNumberChange,onPageSizeChange:function(n){e.onPageSizeChange(n),e.onPageNumberChange(1),t({data:(0,V.Z)({},e.eventType,{pageSize:n})})},pageSizes:n,totalItems:e.totalItems})})},Sn=function(e){var t=e.id,n=e.attributes,a=e.relationships,i=n,r=i.canParticipate,o=i.canRequest;return{name:a.engagement.data.attributes.displayName,id:t,canRequest:o,canParticipate:r}},Mn=function(e){return[e.id,e]},Cn=function(e){var t=e.search,n=e.selectedLocation,a=e.activeTab,i=e.dispatch,o=e.pageNumber,u=e.setPageNumber,c=e.user.id,p=n.id,f=n.attributes.systemName,g=(0,r.useState)(0),v=(0,m.Z)(g,2),h=v[0],y=v[1];(0,r.useEffect)((function(){return u(1)}),[t,p,u]);var x="Emeet"===ht().eventType?"emeetInstances":"eventInstances";(0,qe.useQuery)(["engagementMappingPreferences",{path:{eventName:f},query:{location_uuid:p}}],s.getEngagementPreferencesQueryFn,{onSuccess:function(e){var t,n,a=e.data;y(null!==(t=null===(n=a[x])||void 0===n?void 0:n.pageSize)&&void 0!==t?t:10)},onError:function(){y(10)}});var b=(0,s.useUserMappingsQuery)({path:{eventName:f,userId:c,mappingType:"EngagementMapping"},query:{page:{number:o,size:h},search_term:t,location_uuid:p,mapped:"mapped"===a}},{enabled:h>0,onSuccess:function(e){var t=e.data,n=e.meta,r=n.mapped,o=n.unmapped;i({type:"updateMapping",payload:{activeTab:a,mappedCount:r.number,unMappedCount:o.number,initialItems:new Map(t.map(Sn).map(Mn))}})}}),Z=b.data,j=b.isLoading,S=b.error,M=b.refetch;if(j||0===h)return(0,d.jsx)(st,{});if(S||!Z)return(0,d.jsx)(l.m,{onButtonClick:function(){return M()}});var C=Z.data.map(Sn),A=Z.meta.page.size;return(0,d.jsxs)(At,{children:[(0,d.jsx)(xn,(0,T.Z)((0,T.Z)({},e),{},{items:C})),!!C.length&&A>10&&(0,d.jsx)(jn,{eventType:x,location:n,onPageNumberChange:u,onPageSizeChange:y,pageNumber:o,pageSize:h,totalItems:A})]})},Tn=n(67475),An=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.colors,a=t.sizing,i=t.typography;return(0,T.Z)((0,T.Z)({},i.ParagraphXSmall),{},{display:"flex",justifyContent:"center",backgroundColor:n.primary,borderRadius:a.scale300,color:n.white,marginRight:a.scale300,paddingLeft:a.scale200,paddingRight:a.scale200})})),En=(0,X.zo)("div",(function(e){return{display:"flex",alignItems:"center",marginLeft:e.$theme.sizing.scale200}})),wn=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.colors;return{paddingTop:n.scale600,paddingLeft:n.scale500,paddingBottom:n.scale600,paddingRight:n.scale500,border:"1px solid ".concat(a.mono600),borderRadius:"4px",boxShadow:"0px 10px 20px rgba(216, 216, 216, 0.4)"}})),In=(0,X.zo)("div",(function(e){return{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:e.$theme.sizing.scale300}})),Rn=(0,X.zo)("p",(function(e){var t=e.$theme,n=t.typography,a=t.sizing;return(0,T.Z)((0,T.Z)({},n.ParagraphMedium),{},{marginBottom:0,marginTop:0,marginRight:a.scale900})})),kn=(0,X.zo)("div",(function(e){return{display:"flex",alignItems:"center",marginLeft:e.$theme.sizing.scale600}})),Ln=(0,S.vU)({defaultCanManage:{id:"sTYpyO",defaultMessage:[{type:0,value:"Manage all meeting types"}]},defaultCanParticipate:{id:"xj1kI2",defaultMessage:[{type:0,value:"Can participate in all future created engagement types"}]},defaultCanRequest:{id:"iFlFbV",defaultMessage:[{type:0,value:"Can request all future created engagement types"}]}}),zn=function(e){var t=e.name,n=e.disabled,a=e.value,i=e.onChange,r=(0,M.Z)().formatMessage;return(0,d.jsxs)(In,{children:[(0,d.jsx)(Rn,{children:r(Ln[t])}),(0,d.jsx)(Tn.Z,{checked:a,onChange:function(e){return i(t,e.target.checked)},disabled:n})]})},Dn=(0,S.vU)({title:{id:"XpuuF3",defaultMessage:[{type:0,value:"Map future engagement types"}]},success:{id:"aIGRUk",defaultMessage:[{type:0,value:"Updated Successfully."}]},genericError:{id:"Zfk/kU",defaultMessage:[{type:0,value:"Error Updating."}]}}),Bn=["CSM","MM","JMM"],On=["CSM","MM"],Un=function(e){var t=e.selectedLocation,n=e.user,a=(0,M.Z)().formatMessage,i=(0,W.Pi)().data,r=i.id,o=i.attributes,l=o.role,u=o.eventRole,c=n.id,p=n.attributes.role,f=t.id,m=t.attributes.systemName,g=(0,s.useUserMappingsSettingsQuery)({query:{location_uuid:f},path:{userId:c,mappingType:"EngagementMapping",eventName:m}}),h=g.data,y=g.refetch,x=null===h||void 0===h?void 0:h.data,b=(0,s.useUserMappingsSettingsMutation)({path:{eventName:m,userId:c,mappingType:"EngagementMapping"},query:{location_uuid:f}}),S=b.mutateAsync,C=b.isLoading,A=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(t,n){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({data:(0,T.Z)((0,T.Z)({},x),{},(0,V.Z)({},t,n))});case 3:y(),(0,Je.XA)(a(Dn.success)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,Je.Eo)(a(Dn.genericError));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),E=(Bn.includes(l)||u&&Bn.includes(u))&&r!==c,w=On.includes(p),I=function(){return x?(0,d.jsxs)(wn,{children:[(0,d.jsx)(zn,{name:"defaultCanRequest",value:x.defaultCanRequest,onChange:A,disabled:!E||w}),(0,d.jsx)(zn,{name:"defaultCanParticipate",value:x.defaultCanParticipate,onChange:A,disabled:!E})]}):null};return(0,d.jsxs)(d.Fragment,{children:[C&&(0,d.jsx)(v.A,{}),(0,d.jsx)(Ie.yz,{content:(0,d.jsx)(I,{}),placement:Ie.r4.bottomRight,returnFocus:!0,autoFocus:!0,children:(0,d.jsxs)(Y.zx,{kind:"tertiary",children:[a(Dn.title),(0,d.jsxs)(kn,{children:[(0,d.jsx)(An,{children:"2"}),(0,d.jsx)(He.Zrf,{size:15}),(0,d.jsx)(En,{children:(0,d.jsx)(He.pLl,{size:10})})]})]})})]})},Pn=(0,S.vU)({mappedTabLabel:{id:"a12BDI",defaultMessage:[{type:0,value:"Mapped \u2022 "},{type:2,value:"count",style:null}]},unMappedTabLabel:{id:"Kan0xD",defaultMessage:[{type:0,value:"Unmapped \u2022 "},{type:2,value:"count",style:null}]},noCampaignsListed:{id:"zvFElx",defaultMessage:[{type:0,value:"No engagement types to show as you are not mapped to any campaigns yet."}]}}),Nn=new Set(["CSM","MM","JMM"]),Fn=function(e){var t=(0,M.Z)().formatMessage,n=(0,W.Pi)().data.attributes,a=n.role,i=n.eventRole,o=(0,r.useState)("mapped"),s=(0,m.Z)(o,2),l=s[0],u=s[1],c=(0,r.useState)(1),p=(0,m.Z)(c,2),f=p[0],g=p[1],v=e.state[l],h=v.mappedCount,y=v.unMappedCount;return(0,d.jsxs)(Tt,{children:[(0,d.jsxs)(Ht.mQ,{overrides:$t,activeKey:l,onChange:function(e){var t=e.activeKey;return u(t),void g(1)},children:[(0,d.jsx)(Ht.OK,{title:(0,d.jsx)(Ht.J$,{children:t(Pn.mappedTabLabel,{count:h})}),overrides:(0,Ht.i$)(qt),children:(0,d.jsx)(Cn,(0,T.Z)({activeTab:l,pageNumber:f,setPageNumber:g},e))},"mapped"),(Nn.has(a)||i&&Nn.has(i))&&(0,d.jsx)(Ht.OK,{title:(0,d.jsx)(Ht.J$,{children:t(Pn.unMappedTabLabel,{count:y})}),overrides:(0,Ht.i$)(qt),children:(0,d.jsx)(Cn,(0,T.Z)({activeTab:l,pageNumber:f,setPageNumber:g},e))},"unmapped")]}),(0,d.jsx)(Et,{children:(0,d.jsx)(Un,{selectedLocation:e.selectedLocation,user:e.user})})]})},Qn={mappedCount:0,unMappedCount:0,requestAll:void 0,participateAll:void 0,mappedItems:new Map,initialItems:new Map},Wn={mapped:Qn,unmapped:Qn},Hn=function(e,t){switch(t.type){case"requestAll":var n,a=t.payload,i=a.activeTab,r=a.requestAll,o=e[i],s=o.initialItems,l=o.mappedItems,u=new Map((0,Q.Z)(l)),d=(0,Ut.Z)(l);try{for(d.s();!(n=d.n()).done;){var c,p=(0,m.Z)(n.value,2),f=p[0],g=p[1];(null===(c=s.get(f))||void 0===c?void 0:c.canParticipate)===g.canParticipate?u.delete(f):u.set(f,(0,T.Z)((0,T.Z)({},g),{},{canRequest:r}))}}catch(ie){d.e(ie)}finally{d.f()}return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},i,(0,T.Z)((0,T.Z)({},e[i]),{},{requestAll:r,mappedItems:u})));case"participateAll":var v,h=t.payload,y=h.activeTab,x=h.participateAll,b=e[y],Z=b.initialItems,j=b.mappedItems,S=new Map((0,Q.Z)(j)),M=(0,Ut.Z)(j);try{for(M.s();!(v=M.n()).done;){var C,A=(0,m.Z)(v.value,2),E=A[0],w=A[1];(null===(C=Z.get(E))||void 0===C?void 0:C.canRequest)===w.canRequest?S.delete(E):S.set(E,(0,T.Z)((0,T.Z)({},w),{},{canParticipate:x}))}}catch(ie){M.e(ie)}finally{M.f()}return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},y,(0,T.Z)((0,T.Z)({},e[y]),{},{participateAll:x,mappedItems:S})));case"updateMapping":var I=t.payload,R=I.activeTab,k=I.mappedCount,L=I.unMappedCount,z=I.initialItems,D=e[R];return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},R,(0,T.Z)((0,T.Z)({},D),{},{mappedCount:null!==k&&void 0!==k?k:D.mappedCount,unMappedCount:null!==L&&void 0!==L?L:D.unMappedCount,initialItems:z?new Map([].concat((0,Q.Z)(D.initialItems),(0,Q.Z)(null!==z&&void 0!==z?z:[]))):D.initialItems})));case"setCanRequest":var B=t.payload,O=B.activeTab,U=B.item,P=e[O],N=P.initialItems,F=P.mappedItems,W=P.requestAll,H=new Map((0,Q.Z)(F)),$=N.get(U.id);return(null===$||void 0===$?void 0:$.canParticipate)===U.canParticipate?void 0===W?(null===$||void 0===$?void 0:$.canRequest)===U.canRequest?H.delete(U.id):H.set(U.id,U):W===U.canRequest?H.delete(U.id):H.set(U.id,U):H.set(U.id,U),(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},O,(0,T.Z)((0,T.Z)({},P),{},{mappedItems:H})));case"setCanParticipate":var q=t.payload,J=q.activeTab,K=q.item,X=e[J],G=X.initialItems,Y=X.mappedItems,_=X.participateAll,ee=new Map((0,Q.Z)(Y)),te=G.get(K.id);return(null===te||void 0===te?void 0:te.canRequest)===K.canRequest?void 0===_?(null===te||void 0===te?void 0:te.canParticipate)===K.canParticipate?ee.delete(K.id):ee.set(K.id,K):_===K.canParticipate?ee.delete(K.id):ee.set(K.id,K):ee.set(K.id,K),(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},J,(0,T.Z)((0,T.Z)({},X),{},{mappedItems:ee})));case"resetValues":return Wn;case"discardChanges":var ne=e.mapped,ae=e.unmapped;return{mapped:(0,T.Z)((0,T.Z)({},ne),{},{requestAll:void 0,participateAll:void 0,mappedItems:new Map}),unmapped:(0,T.Z)((0,T.Z)({},ae),{},{requestAll:void 0,participateAll:void 0,mappedItems:new Map})};default:return e}},$n=(0,S.vU)({title:{id:"cLoOOc",defaultMessage:[{type:0,value:"Engagements Types for"}]}}),qn=function(e){var t=e.onNavigate,n=e.isLoading,a=e.eventTypes,i=e.selectedEventTypes,o=e.setSelectedEventTypes,s=e.locations,l=e.selectedLocations,u=e.setSelectedLocations,c=e.user,p=(0,M.Z)().formatMessage,f=ht().eventType,g=(0,r.useState)(""),v=(0,m.Z)(g,2),h=v[0],y=v[1],x=new URLSearchParams(window.location.search).get("location"),b=(0,zt.N)(h),Z=(0,r.useReducer)(Hn,Wn),j=(0,m.Z)(Z,2),S=j[0],C=j[1];return(0,r.useEffect)((function(){C({type:"resetValues"})}),[C,b,i]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(kt,{children:[(0,d.jsxs)(ge,{children:[(0,d.jsx)(Ot,{title:p($n.title)}),!x&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(ve,{children:["Emeet"!==f&&(0,d.jsx)(Ct,{eventTypes:a,selectedEventTypes:i,onChange:function(e){C({type:"resetValues"}),o(e)}}),(0,d.jsx)(Zt,{locations:s,selectedLocations:l,onChange:function(e){C({type:"resetValues"}),u(e)}})]}),(0,d.jsx)(he,{children:(0,d.jsx)(mt,{search:h,onSearchChange:y})})]})]}),(0,d.jsx)(Fn,{search:b,state:S,selectedLocation:l[0],dispatch:C,user:c})]}),!n&&!!l.length&&(0,d.jsx)(Wt,{user:c,search:b,state:S,selectedLocation:l[0],onNavigate:t,dispatch:C})]})},Jn=function(e){var t=e.locations,n=f().id,a=new URLSearchParams((0,o.TH)().search).get("location"),i=(0,r.useState)([a&&t.find((function(e){return e.id===a}))||t[0]]),u=(0,m.Z)(i,2),c=u[0],p=u[1],g=c[0],v=g.id,h=g.attributes.systemName,y=(0,s.useEventUser)({path:{subSystem:h,userId:n},query:{location_uuid:v}}),x=y.isLoading,b=y.isError,Z=y.refetch,j=y.data;return x?(0,d.jsx)(wt,{children:(0,d.jsx)(st,{})}):b||!j?(0,d.jsx)(wt,{children:(0,d.jsx)(l.m,{onButtonClick:function(){return Z()}})}):(0,d.jsx)(qn,(0,T.Z)((0,T.Z)({},e),{},{selectedLocations:c,setSelectedLocations:p,user:j.data}))},Kn=["isError","refetch"],Vn=function(){var e=ht().eventType;return(0,d.jsx)(wt,{children:(0,d.jsx)(It,{children:(0,d.jsx)(Rt,{children:"Emeet"===e?(0,d.jsx)($.Z,{id:"W7Etja",defaultMessage:[{type:0,value:"No engagement types to show as you are not mapped to any eMeet yet."}]}):(0,d.jsx)($.Z,{id:"zvFElx",defaultMessage:[{type:0,value:"No engagement types to show as you are not mapped to any campaigns yet."}]})})})})},Xn=function(e){var t=e.children;return(0,d.jsxs)(_,{children:[(0,d.jsx)(Ye,{}),(0,d.jsx)(ee,{children:t})]})},Gn=function(e){var t=function(){var e=ht().eventType,t=(b().location||{}).subType,n=(0,r.useState)([]),a=(0,m.Z)(n,2),i=a[0],o=a[1],l=f().id,u=(0,s.useEventTypes)({enabled:"Emeet"!==e}),d=u.isLoading,c=u.error,p=u.refetch,g=u.data,v=(g=void 0===g?{}:g).data,h=void 0===v?[]:v,y=(0,s.useUserMappedCampaignsV2)({path:{userId:l},query:{"filter[dateInterval][]":["".concat(xt.toISODate(),"--").concat(xt.plus({years:2}).toISODate())],"filter[eventType][]":"Emeet"===e?["Emeet"]:i.length?i:t?[yt[t]]:h.filter((function(e){return"Emeet"!==e}))}},{enabled:"Emeet"===e||!!i.length||!!h.length}),x=y.isLoading,Z=y.error,j=y.refetch,S=y.data,M=(S=void 0===S?{}:S).data,C=void 0===M?[]:M;return{isLoading:d||x,isError:c||Z,refetch:function(){return c?p():j()},eventTypes:"Emeet"!==e?h.filter((function(e){return"Emeet"!==e})):["Emeet"],selectedEventTypes:i,setSelectedEventTypes:o,locations:C}}(),n=t.isError,a=t.refetch,i=(0,F.Z)(t,Kn);return i.isLoading&&!i.locations.length?(0,d.jsx)(Xn,{children:(0,d.jsx)(kt,{children:(0,d.jsx)(st,{})})}):n?(0,d.jsx)(Xn,{children:(0,d.jsx)(wt,{children:(0,d.jsx)(l.m,{onButtonClick:function(){return a()}})})}):(0,d.jsx)(Xn,{children:i.locations.length?(0,d.jsx)(Jn,(0,T.Z)((0,T.Z)({},i),e)):(0,d.jsx)(Vn,{})})},Yn=n(6167),_n=n(44584),ea=n(65903),ta=n(91139),na=n(34831),aa=n(71246),ia=function(e){var t=e.rules,n=e.value,a=e.role,i=t.name,r=t.conditions,o=t.type,s={name:i,show:!1,optionsToShow:[]};return r.forEach((function(e){var t=e.action,i=e.operator,r=e.valuesToCompare,l=e.valuesToDisplay,u=e.roleNamesToCheck,d=void 0===u?[]:u,c="role"===o?null===d||void 0===d?void 0:d.includes(a):r.includes(n);("is"===i?c:!c)&&"show"===t&&(s.show=!0,s.optionsToShow=l)})),s},ra=function(e,t,n){return e.filter((function(e){var a=e.name,i=e.rules;if(null!==i&&void 0!==i&&i.length&&i[0].source&&i[0].conditions.length){var r,o=(0,m.Z)(i,1)[0],s=o.source,l=o.conditions,u=o.type;return ia({value:null!==(r=null===t||void 0===t?void 0:t[s.split(".")[1]])&&void 0!==r?r:"",rules:{conditions:l,name:a,type:u},role:n}).show}return!0}))},oa=function(e){var t=(0,_n.cl)().values,n=(0,W.Pi)().data.attributes.role,a=ra(e,t.customFields,n),i=(0,r.useState)(a),o=(0,m.Z)(i,2),s=o[0],l=o[1],u=(0,_n.cI)(),d=u.change,c=u.getFieldState,p=(0,r.useMemo)((function(){return t=function(e){return e.filter((function(e){var t;return(null===(t=e.rules)||void 0===t?void 0:t.length)&&e.rules[0].source&&e.rules[0].conditions.length})).map((function(e){var t=e.name,n=e.rules;return{name:t,source:n[0].source,conditions:n[0].conditions,type:n[0].type}}))}(e),t.reduce((function(e,t){return e[t.source]=e[t.source]||[],e[t.source].push(t),e}),{});var t}),[e]);return{fields:s,handleRules:function(t){var a,i=t.value,r=t.name,o=p[r]||[];if(o.length){var u=function(e){var t=e.value,n=e.rulesList,a=e.sourceBasedRulesObject,i=e.role,r=n.map((function(e){return ia({rules:e,value:t,role:i})})).reduce((function(e,t){return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},t.name,t))}),{});return Object.keys(r).filter((function(e){return a[e]})).flatMap((function(e){return a[e]})).reduce((function e(t,n){var i=[].concat((0,Q.Z)(t),[n]);return a[n.name]&&(i=a[n.name].reduce(e,i)),i}),[]).reduce((function(e,t){var n=t.name;return e[n]={name:n,show:!1,optionsToShow:[]},e}),r)}({rulesList:o,sourceBasedRulesObject:p,value:null===(a=i[0])||void 0===a?void 0:a.id,role:n});e.filter((function(e){var t=e.name;return u[t]&&!u[t].show&&c(t)})).forEach((function(e){var t=e.name;return d(t,"")}));var f=e.filter((function(e){var t=e.name;return t===r||(u[t]?u[t].show:s.findIndex((function(e){return e.name===t}))>=0)})).map((function(e){var t,n=e.options,a=e.name;return e.options=(null===(t=u[a])||void 0===t?void 0:t.optionsToShow)||n,e}));l(f)}}}},sa=n(63184),la=function(e){var t=e.name,n=e.type,a=e.placeholder,i=e.label,r=e.disabled;return(0,d.jsx)(aa.g,{name:t,validations:"email"===n?[].concat((0,Q.Z)(e.validations),[aa.i.EMAIL]):e.validations,parse:function(e){return e},render:function(e){var o=e.input,s=e.meta;return(0,d.jsx)(sa.NI,{label:i,error:s.touched&&s.error,children:(0,d.jsx)(pt.II,(0,T.Z)((0,T.Z)({},o),{},{id:t,type:n,placeholder:a,disabled:r}))})}})},ua=n(32415),da=function(){var e=(0,X.hQ)(),t=(0,m.Z)(e,2),n=t[0],a=t[1],i={className:n((0,V.Z)({marginBottom:a.sizing.scale800,width:"100%",maxHeight:"102px",marginLeft:a.sizing.scale300,marginRight:a.sizing.scale300},a.breakpoints.small,{maxWidth:"208px"})),height:102,width:208,speed:2,primaryColor:a.colors.mono200,secondaryColor:a.colors.mono300};return(0,d.jsx)(at.ZP,(0,T.Z)((0,T.Z)({},i),{},{ariaLabel:"",children:(0,d.jsx)("rect",{y:"0",width:"208",height:"102"})}))},ca=n(49892),pa=(0,X.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center"}),fa=function(){return(0,d.jsxs)(pa,{children:[(0,d.jsx)(ca.P,{size:"128px"}),(0,d.jsx)(Y.zx,{onClick:function(){window.location.reload()},children:(0,d.jsx)($.Z,{id:"j4eB66",defaultMessage:[{type:0,value:"Reload Page"}]})})]})},ma={resize_enabled:!1,language:"en"},ga=function(e){var t=e.placeholder,n=e.disabled,a=e.input,i=a.name,r=a.value,o=a.onChange,s=a.onFocus,l=a.onBlur,u=e.meta,c=u.touched,p=u.error,f=u.active,m=(0,ua.z)({placeholder:t,input:{name:i,value:r,onChange:o,onFocus:s,onBlur:l},meta:{touched:c,error:p,active:f},config:(0,T.Z)((0,T.Z)({},ma),{},{readOnly:n})}),g=m.showLoader,v=m.setElement,h=m.editorStyle;return m.ckeditorError?(0,d.jsx)(fa,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{id:i,ref:v,style:h}),g&&(0,d.jsx)(da,{})]})},va=n(55835);!function(e){e.TEXTFIELD="textfield",e.TEXTAREA="textarea",e.NUMBERFIELD="numberfield",e.CHECKBOX="checkbox",e.DROPDOWN="dropdown",e.MULTISELECT_DROPDOWN="multiselect_dropdown",e.PAGE_BREAK="page_break",e.HEADER="header"}(i||(i={}));var ha,ya=(a={},(0,V.Z)(a,i.TEXTFIELD,la),(0,V.Z)(a,i.NUMBERFIELD,la),(0,V.Z)(a,i.DROPDOWN,(function(e){var t=e.name,n=e.label,a=e.options,i=e.disabled,r=e.creatable,o=e.clearable,s=e.handleRules,l=e.validations,u=e.helpText;return(0,d.jsx)(aa.g,{name:t,validations:l,parse:function(e){var t;return null===(t=e[0])||void 0===t?void 0:t.id},format:function(e){return e?[{id:e,label:e}]:[]},render:function(e){var c=e.input,p=e.meta;return(0,d.jsx)(sa.NI,{label:n,error:p.touched&&p.error,caption:u,children:(0,d.jsx)(J.Ph,(0,T.Z)((0,T.Z)({},c),{},{id:t,required:l.includes(aa.i.REQUIRED),searchable:!0,creatable:r,clearable:o,disabled:i,backspaceClearsInputValue:!0,onCloseResetsInput:!1,onBlurResetsInput:!1,options:null===a||void 0===a?void 0:a.map((function(e){return"object"===typeof e?e:{id:e,label:e}})),onChange:function(e){var n=e.value;c.onChange(n),null===s||void 0===s||s({name:t,value:n})}}))})}})})),(0,V.Z)(a,i.TEXTAREA,(function(e){var t=e.name,n=e.placeholder,a=e.label,i=e.validations,r=e.disabled;return(0,d.jsx)(aa.g,{name:t,validations:i,render:function(e){var t=e.input,i=e.meta;return(0,d.jsx)(sa.NI,{label:a,error:i.touched&&i.error,children:(0,d.jsx)(ga,{input:t,meta:i,disabled:r,placeholder:n})})}})})),(0,V.Z)(a,i.CHECKBOX,(function(e){var t=e.name,n=e.type,a=e.label,i=e.validations,o=e.checked,s=(0,r.useState)(o),l=(0,m.Z)(s,2),u=l[0],c=l[1];return(0,d.jsx)(aa.g,{name:t,validations:i,render:function(e){var i=e.input,r=e.meta;return(0,d.jsx)(sa.NI,{error:r.touched&&r.error,children:(0,d.jsx)($e.XZ,(0,T.Z)((0,T.Z)({},i),{},{id:t,type:n,checked:u,onChange:function(e){var t=e.target;c(t.checked),i.onChange(t.checked)},children:(0,d.jsx)(va.d9,{color:"inherit",className:"anchor-primary",dangerouslySetInnerHTML:{__html:a}})}))})}})})),(0,V.Z)(a,i.MULTISELECT_DROPDOWN,(function(e){var t=e.name,n=e.label,a=e.options,i=e.creatable,r=e.clearable,o=e.validations,s=e.disabled;return(0,d.jsx)(aa.g,{name:t,validations:o,parse:function(e){return e.map((function(e){return e.id}))},format:function(e){return e?e.map((function(e){return{id:e,label:e}})):[]},render:function(e){var l=e.input,u=e.meta;return(0,d.jsx)(sa.NI,{label:n,error:u.touched&&u.error,children:(0,d.jsx)(J.Ph,(0,T.Z)((0,T.Z)({},l),{},{multi:!0,id:t,required:o.includes(aa.i.REQUIRED),searchable:!0,disabled:s,creatable:i,clearable:r,backspaceClearsInputValue:!0,onCloseResetsInput:!1,onBlurResetsInput:!1,options:null===a||void 0===a?void 0:a.map((function(e){return{id:e,label:e}})),onChange:function(e){var t=e.value;l.onChange(t)}}))})}})})),(0,V.Z)(a,i.HEADER,(function(e){var t;return(0,d.jsx)(sa.eb,{$isHidden:e.hidden,dangerouslySetInnerHTML:{__html:null!==(t=e.label)&&void 0!==t?t:""}})})),(0,V.Z)(a,i.PAGE_BREAK,(function(e){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(sa.Hr,{$isHidden:e.hidden}),(0,d.jsx)(sa.$s,{$isHidden:e.hidden,children:e.label})]})})),a),xa=function(e){var t=e.fields.reduce((function(e,t){return 0===t.name.indexOf("customFields.")?e[1].push(t):e[0].push(t),e}),[[],[]]),n=(0,m.Z)(t,2),a=n[0],i=n[1],o=oa(i),s=o.fields,l=o.handleRules;return(0,d.jsx)(d.Fragment,{children:[].concat((0,Q.Z)(a),(0,Q.Z)(s)).map((function(e,t){var n,a=ya[e.fieldType],i=null!==(n=e.validations)&&void 0!==n?n:{},o=i.required,s=i.email,u=[o&&aa.i.REQUIRED,s&&aa.i.EMAIL].filter(Boolean);return(0,r.createElement)(a,(0,T.Z)((0,T.Z)({},e),{},{key:t,validations:u},"dropdown"===e.fieldType?{handleRules:l}:null))}))})};!function(e){e.TEXT="text",e.NUMBER="number",e.EMAIL="email",e.HIDDEN="hidden"}(ha||(ha={}));var ba,Za=["firstName","lastName","email","phone","secondaryEmails","title","company"],ja=["conditions","source"],Sa=["values_to_display","values_to_check","role_names_to_check"],Ma={textfield:ha.TEXT,numberfield:ha.NUMBER,email:ha.EMAIL},Ca=function(e){return"customFields.".concat(e)},Ta=function(e){var t,n=e.user,a=e.field,i=a.type,r=a.attributes,o=r.fieldName,s=r.displayName,l=r.fieldInfo,u="InternalUserCustomForm"===i||"ExternalUserCustomForm"===i,d=l,c=d.helpText,p=d.placeholder,f=d.show,m=d.mandatory,g=l,v=g.disabled,h=g.hidden,y=g.label,x=g.rules_with_values,b=void 0===x?[]:x,Z=g.values,j=g.widget,S=void 0===j?"textfield":j,M=g.required;return(0,T.Z)((0,T.Z)({disabled:!u&&"email"===o||v,fieldType:S,helpText:c,hidden:h||f,name:u?Ca(o):o,label:s||y,placeholder:p,rules:b.map((function(e){var t=e.conditions,n=void 0===t?[]:t,a=e.source,i=(0,F.Z)(e,ja);return(0,T.Z)((0,T.Z)({},i),{},{source:Ca(a),conditions:n.map((function(e){var t=e.values_to_display,n=e.values_to_check,a=e.role_names_to_check,i=(0,F.Z)(e,Sa);return(0,T.Z)((0,T.Z)({},i),{},{valuesToCompare:n,valuesToDisplay:t,roleNamesToCheck:a})}))})})),options:Z,type:Ma["email"===o?"email":S],validations:{required:Boolean(M||m)},value:n[o]||(null===n||void 0===n||null===(t=n.customFields)||void 0===t?void 0:t[o])},"multiselect_dropdown"===S?{multi:!0}:null),"checkbox"===S?{checked:"yes"===Z}:null)},Aa=n(85196),Ea=(0,X.zo)(Y.zx,(function(e){var t=e.$theme,n=t.sizing,a=t.mediaQuery;return(0,V.Z)({minWidth:"80px",marginRight:n.scale400},a.small,{minWidth:"133px"})})),wa=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.sizing;return(0,T.Z)((0,T.Z)({},n.Paragraph1),{},{marginBottom:a.scale400})})),Ia=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.colors;return(0,T.Z)((0,T.Z)({},n.Paragraph2),{},{fontWeight:600,color:a.black})})),Ra={BaseButton:{style:function(e){return{marginLeft:e.$theme.sizing.scale300}}}},ka={Root:{style:{zIndex:1}}},La=function(e){var t=e.pendoName,n=void 0===t?"confirmation-dialog":t,a=e.onClose,i=e.onCancel,r=e.onSuccess,o=e.showMessage,s=e.showNote;return(0,d.jsxs)(Aa.u_,{size:Aa.NO.medium,overrides:ka,closeable:!1,onClose:a,isOpen:!0,children:[(0,d.jsx)(Aa.xB,{children:(0,d.jsx)($.Z,{id:"oLTTAD",defaultMessage:[{type:0,value:"Are you sure?"}]})}),(0,d.jsxs)(Aa.fe,{children:[o&&(0,d.jsx)(wa,{children:(0,d.jsx)($.Z,{id:"/51RSW",defaultMessage:[{type:0,value:"This user has one or more other user accounts mapped to them. Updating their role will undo this mapping."}]})}),s&&(0,d.jsx)(Ia,{children:(0,d.jsx)($.Z,{id:"WjoFA4",defaultMessage:[{type:0,value:"Please review the mapped engagement types, topics (if enabled) and respective settings after role update."}]})})]}),(0,d.jsxs)(Aa.mz,{children:[(0,d.jsx)(Ea,{type:"button",overrides:Ra,onClick:i,"data-pendo":"".concat(n,"/cancel"),kind:Y.TO.tertiary,children:(0,d.jsx)($.Z,{id:"yhU8J6",defaultMessage:[{type:0,value:"No"}]})}),(0,d.jsx)(Ea,{type:"button",overrides:Ra,onClick:r,"data-pendo":"".concat(n,"/submit"),children:(0,d.jsx)($.Z,{id:"3ebjtX",defaultMessage:[{type:0,value:"Yes"}]})})]})]})},za=function(){var e=we().campaign,t=(b().location||{}).subType,n=void 0===t?null===e||void 0===e?void 0:e.subType:t;return ht().eventType||yt[n]},Da=n(34176),Ba=(0,X.w1)(ee,(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",height:"calc(100vh - 64px)"},t.medium,{paddingLeft:"223px",paddingTop:0})})),Oa=(0,X.w1)(te,(function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing;return(0,V.Z)({overflowY:"auto",height:"calc(100vh - 238px)",paddingLeft:a.scale600,paddingRight:a.scale600,paddingTop:a.scale800,paddingBottom:a.scale700},n.medium,{height:"calc(100vh - 198px)",paddingLeft:"87px",paddingRight:a.scale900})})),Ua=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing;return(0,V.Z)({display:"flex",alignItems:"center",paddingTop:"68px",paddingLeft:a.scale600,paddingRight:a.scale600,paddingBottom:0},n.medium,{paddingLeft:"87px",paddingRight:a.scale900,paddingTop:a.scale850})})),Pa=(0,X.zo)(G.N,(function(e){return{width:"100%",maxWidth:"280px",marginBottom:e.$theme.sizing.scale900}})),Na=(0,X.zo)("span",(function(e){var t=e.$theme,n=t.colors,a=t.typography;return(0,T.Z)((0,T.Z)({},a.Paragraph1),{},{color:n.mono900})})),Fa=(0,X.zo)("div",(function(e){var t=e.$error,n=e.$theme.sizing;return{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:t?n.scale100:n.scale650,paddingBottom:n.scale650}})),Qa=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{marginRight:t.scale400,marginLeft:t.scale400}})),Wa=(0,X.zo)("div",(function(e){return{marginTop:e.$theme.sizing.scale100}})),Ha=(0,X.zo)("div",{display:"flex",justifyContent:"space-between"}),$a=(0,X.zo)("div",{display:"flex",justifyContent:"space-between",alignItems:"center"}),qa=(0,X.zo)("div",(function(e){return{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:e.$theme.sizing.scale650}})),Ja=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)({},t.Paragraph1)})),Ka=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)({},t.Caption1)})),Va={Emeet:"eMeet",Jem:"eEvent",Jfx:"eCampaign",Jss:"Staff Scheduling",Jbc:"Briefing Center"},Xa=(0,S.vU)({label:{id:"oXydhG",defaultMessage:[{type:1,value:"eventType"},{type:0,value:" Role"}]}}),Ga=function(e){var t=e.input,n=e.meta,a=n.initial,i=n.touched,o=n.error,s=e.isDisabled,l=e.dropdownOptions,u=(0,M.Z)().formatMessage,c=(0,r.useState)(!1),p=(0,m.Z)(c,2),f=p[0],g=p[1],v=we().campaign,h=(0,r.useState)(!1),y=(0,m.Z)(h,2),x=y[0],Z=y[1],j=(0,_n.cI)().change,S=(b().location||{}).subType,C=void 0===S?null===v||void 0===v?void 0:v.subType:S,A=(0,_n.cl)().values.mappedTo;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Pa,{label:u(Xa.label,{eventType:C?Va[C]:""}),error:i&&o,children:(0,d.jsx)(J.Ph,(0,T.Z)((0,T.Z)({},t),{},{required:!0,id:"eventRole",disabled:s,options:l,onChange:function(e){var n,i,r=e.value;t.onChange(r);var o=null===(n=r[0])||void 0===n?void 0:n.id,s=null===(i=t.value[0])||void 0===i?void 0:i.id;a!==o&&(!("EX"===s&&"EA"===a||"EA"===s&&"EX"===a)&&(null===A||void 0===A?void 0:A.length)&&Z(!0),g(!0))}}))}),f&&(0,d.jsx)(La,{showMessage:x,showNote:!0,onSuccess:function(){j("mappedTo",[]),g(!1),Z(!1)},onClose:function(){g(!1),Z(!1)},onCancel:function(){j("eventRole",a),g(!1),Z(!1)}})]})},Ya=function(e){var t=e.roles,n=e.isDisabled,a=(0,M.Z)().formatMessage,i=t.map((function(e){var t=e.clientDisplayName;return{label:a(na.uJ[t]),id:t}}));return(0,d.jsx)(aa.g,{name:"eventRole",parse:function(e){var t;return null===(t=e[0])||void 0===t?void 0:t.id},format:function(e){return e?[{id:e,label:e}]:[]},render:Ga,validations:[aa.i.REQUIRED],dropdownOptions:i,isDisabled:n})},_a=(0,S.vU)({labelForEA:{id:"WYN1aM",defaultMessage:[{type:0,value:"Managed Attendees at Company"}]},labelForEX:{id:"ERlEI1",defaultMessage:[{type:0,value:"Executive Admins at Company"}]},labelForEventLevelEA:{id:"xXXID9",defaultMessage:[{type:0,value:"\u2018Managed Attendees\u2019 for this "},{type:1,value:"eventType"},{type:0,value:" instance"}]},labelForEventLevelEX:{id:"mUqM5B",defaultMessage:[{type:0,value:"\u2018Executive Admins\u2019 for this "},{type:1,value:"eventType"},{type:0,value:" instance"}]},placeholder:{id:"sWi4wO",defaultMessage:[{type:0,value:"Search by name"}]},helpText:{id:"BDxELD",defaultMessage:[{type:0,value:"Please enter 1 or more characters to search"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]},managedAttendeesHelpText:{id:"GAe8i2",defaultMessage:[{type:0,value:"To manage or view instance attendees go to Event Instances \u2192 Settings"}]},executiveAdminsHelpText:{id:"L6VzPe",defaultMessage:[{type:0,value:"To manage or view instance EA go to Event Instances \u2192 Settings"}]},none:{id:"N7Db8V",defaultMessage:[{type:0,value:"None"}]}}),ei=function(e){return{label:e.name,id:e.uuid}},ti=function(e){var t=e.campaign,n=e.name,a=e.isDisabled,i=e.role,o=(0,M.Z)().formatMessage,l=f().id,u=(b().location||{}).subType,c=void 0===u?null===t||void 0===t?void 0:t.subType:u,p=(0,r.useState)(""),g=(0,m.Z)(p,2),v=g[0],h=g[1],y=(0,r.useState)([]),x=(0,m.Z)(y,2),Z=x[0],j=x[1],S="EA"===i,C=(0,s.useMappableUsers)({userId:l,systemName:null===t||void 0===t?void 0:t.eventName,locationId:null===t||void 0===t?void 0:t.location,searchUsersByRole:S?"EX":"EA",onResolve:function(e){var t=e.users;return j(t)},onReject:function(){return(0,Je.Eo)(o(_a.genericError))}}),A=C.run,E=C.isPending,w=C.cancel,I=Z.map(ei).filter((function(e){return e.id!==l})),R=(0,zt.N)(v.trim());return(0,r.useEffect)((function(){j([])}),[i]),(0,r.useEffect)((function(){if(!R)return w(),void j([]);A({search:R})}),[R]),(0,d.jsx)(aa.g,{name:n,render:function(e){var t=e.input,i=e.meta;return(0,d.jsx)(Pa,{error:i.touched&&i.error,label:o(S?_a.labelForEventLevelEA:_a.labelForEventLevelEX,{eventType:Va[c]}),caption:"mappedUsers"===n?o(S?_a.managedAttendeesHelpText:_a.executiveAdminsHelpText):void 0,children:(0,d.jsx)(J.Ph,(0,T.Z)((0,T.Z)({},t),{},{multi:!0,searchable:!0,options:I,isLoading:E,disabled:null!==a&&void 0!==a&&a,backspaceClearsInputValue:!0,filterOptions:!1,onCloseResetsInput:!1,onBlurResetsInput:!1,placeholder:o(a?_a.none:_a.placeholder),onInputChange:function(e){return h(e.target.value.trim())},noResultsMsg:R?"":o(_a.helpText),onChange:function(e){var n=e.value;return t.onChange(n)}}))})}})},ni=(0,S.vU)({cisEnabled:{id:"XVT4W3",defaultMessage:[{type:0,value:"Calendar Integration"}]},irpEnabled:{id:"IUFtzE",defaultMessage:[{type:0,value:"Enable for IRP"}]},doubleBookingEnabled:{id:"rfTNWx",defaultMessage:[{type:0,value:"Double Booking"}]},showOnlyForMM:{id:"wK5fSt",defaultMessage:[{type:0,value:"Show only for Meeting Managers"}]},showInMeeting:{id:"4KL8Fz",defaultMessage:[{type:0,value:"Show as external attendee"}]},endorsement:{id:"+PI/xE",defaultMessage:[{type:0,value:"Endorsement"}]},partialParticipationInMeeting:{id:"qchnqa",defaultMessage:[{type:0,value:"Enable partial participation in meeting"}]}}),ai=function(e){var t=e.isDisabled,n=e.name,a=(0,(0,M.Z)().formatMessage)(ni[n]);return(0,d.jsx)(_n.gN,{name:n,render:function(e){var i=e.input,r=i.value,o=i.onChange,s=e.meta,l=s.error,u=s.submitError;return(0,d.jsxs)(Fa,{$error:u||l,children:[(0,d.jsx)(Na,{children:a}),(0,d.jsx)(Qa,{children:(0,d.jsx)(Tn.Z,{name:n,ariaLabel:a,checked:"endorsement"===n?!r:r,disabled:t,onChange:function(e){var t=e.target.checked;return o("endorsement"===n?!t:t)}})})]})}})},ii={BaseButton:{style:function(e){var t=e.$theme,n=t.colors,a=t.sizing;return{backgroundColor:n.white,borderLeftStyle:"none",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderTopRightRadius:"none",borderBottomRightRadius:"none",borderTopLeftRadius:"none",borderBottomLeftRadius:"none",marginLeft:a.scale600}}}},ri={Root:{style:{maxWidth:"204px"}}},oi=["value","onChange"],si=(0,S.vU)({moaPlaceholder:{id:"rxHQo8",defaultMessage:[{type:0,value:"Select one"}]}}),li=function(e){var t=e.input,n=t.value,a=t.onChange,i=(0,F.Z)(t,oi),o=e.in_person_attendance_custom_label,s=e.virtual_attendance_custom_label,l=e.isDisabled,u=(0,M.Z)().formatMessage,c=(0,r.useState)(),p=(0,m.Z)(c,2),f=p[0],g=p[1],v=(0,r.useMemo)((function(){return[{id:"in_person",label:o},{id:"virtual",label:s}]}),[o,s]);(0,r.useEffect)((function(){g(v.filter((function(e){return e.id===n})))}),[n,v]);var h=function(e){g(e),a(e[0].id)};return(0,d.jsx)(J.Ph,(0,T.Z)((0,T.Z)({},i),{},{disabled:l,clearable:!1,placeholder:u(si.moaPlaceholder),value:f,options:v,onChange:function(e){var t=e.value;return h(t)},overrides:ri}))},ui=function(e){return(0,d.jsxs)(qa,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(Ja,{children:(0,d.jsx)($.Z,{id:"GOXASO",defaultMessage:[{type:0,value:"Mode of attendance"}]})}),(0,d.jsx)(Ka,{children:(0,d.jsx)($.Z,{id:"GRlwuP",defaultMessage:[{type:0,value:"Change in mode of attendance applies to future meetings only and not to the existing meeting"}]})})]}),(0,d.jsx)(aa.g,{name:"modeOfAttendance",render:function(t){return(0,d.jsx)(li,(0,T.Z)((0,T.Z)({},t),e))}})]})},di=function(e){return{label:e.name,id:e.uuid}},ci=function(e){var t,n=e.name,a=e.label,i=e.location,r=e.eventName,o=e.isDisabled,l=(0,qe.useQuery)(["tagsList",{path:{eventName:r},query:{search:"",tag_cloud_uuid:n,per_page:"500",current_location_uuid:i||""}}],s.getTagsList),u=l.data,c=l.isLoading,p=l.isSuccess,f=u?null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.tags.map(di):[];return(0,d.jsx)(_n.gN,{name:n,parse:function(e){return{tagCloudUuid:n,tags:e.map((function(e){return e.id}))}},format:function(e){var t;return null!==e&&void 0!==e&&null!==(t=e.tags)&&void 0!==t&&t.length&&p?e.tags.map((function(e){var t,n,a=null===u||void 0===u||null===(t=u.data)||void 0===t||null===(n=t.tags)||void 0===n?void 0:n.find((function(t){return t.uuid===e}));return{label:null===a||void 0===a?void 0:a.name,id:null===a||void 0===a?void 0:a.uuid}})):[]},render:function(e){var t=e.input,n=t.value,i=t.onChange,r=e.meta,s=r.touched,l=r.error;return(0,d.jsx)(Pa,{label:a,error:s&&l,children:(0,d.jsx)(J.Ph,{options:f,isLoading:c,disabled:o,searchable:!0,multi:!0,backspaceClearsInputValue:!0,onChange:function(e){var t=e.value;i(t)},value:n})})}})},pi=function(e){var t=e.eventName,n=e.location,a=e.isDisabled,i=(0,qe.useQuery)(["tagCloudList",{path:{eventName:t},query:{current_location_uuid:n}}],s.getTagCloudList),r=i.data;return i.isSuccess?(0,d.jsx)("div",{children:null===r||void 0===r?void 0:r.data.tag_cloud_list.map((function(e){return(0,d.jsx)(ci,{name:e.uuid,label:e.name,location:n||"",eventName:t,isDisabled:a},e.uuid)}))}):null},fi=(0,S.vU)({taskManager:{id:"hZNj1b",defaultMessage:[{type:0,value:"Activity Manager"}]}}),mi=function(e){var t=e.isDisabled,n=e.name,a=(0,(0,M.Z)().formatMessage)(fi.taskManager);return(0,d.jsx)(_n.gN,{name:n,render:function(e){var i=e.input,r=i.value,o=i.onChange,s=e.meta,l=s.error,u=s.submitError;return(0,d.jsxs)(Fa,{$error:u||l,children:[(0,d.jsx)(Na,{children:a}),(0,d.jsx)(Qa,{children:(0,d.jsx)(Tn.Z,{name:n,ariaLabel:a,checked:r,disabled:t,onChange:function(e){return o(e.target.checked)}})})]})}})},gi=function(e){var t=e.height,n=(0,X.hQ)(),a=(0,m.Z)(n,2)[1],i={style:{width:"40%",height:"".concat(t),marginTop:a.sizing.scale600,marginBottom:a.sizing.scale600},width:"1000",height:"100",viewBox:"0 0 1000 100",speed:2,primaryColor:a.colors.mono200,secondaryColor:a.colors.mono300};return(0,d.jsx)(at.ZP,(0,T.Z)((0,T.Z)({},i),{},{children:(0,d.jsx)("rect",{y:"0",rx:1,ry:20,width:"1000",height:"100"})}))},vi=function(e){var t=e.height,n=(0,X.hQ)(),a=(0,m.Z)(n,2)[1],i={style:{width:"100%",height:"".concat(t),marginTop:a.sizing.scale600,marginBottom:a.sizing.scale600},width:"1000",height:"100",viewBox:"0 0 1000 100",speed:2,primaryColor:a.colors.mono200,secondaryColor:a.colors.mono300};return(0,d.jsx)(at.ZP,(0,T.Z)((0,T.Z)({},i),{},{children:(0,d.jsx)("rect",{y:"0",rx:1,ry:20,width:"1000",height:"100"})}))},hi=(0,r.forwardRef)((function(e,t){var n=(0,X.hQ)(),a=(0,m.Z)(n,2)[1];return(0,r.useImperativeHandle)(t,(function(){return{getReactContainerStyle:function(){return{alignSelf:"flex-start",marginTop:a.sizing.scale600}}}})),(0,d.jsx)(Oa,{children:(0,d.jsxs)(it.Z,{flexGridColumnCount:1,overrides:{Block:{style:function(e){var t=e.$theme.sizing;return{marginTop:t.scale100,marginBottom:t.scale100}}}},children:[Array.from({length:2}).map((function(e,t){return(0,d.jsx)(rt.ZP,{children:(0,d.jsx)(gi,{height:40})},t)})),Array.from({length:8}).map((function(e,t){return(0,d.jsx)(rt.ZP,{children:(0,d.jsx)(vi,{height:40})},t)}))]})})})),yi=(0,S.vU)({canRequest:{id:"EtV2I0",defaultMessage:[{type:0,value:"Can request meetings of the following engagement types for this "},{type:1,value:"eventType"}]},canParticipate:{id:"LY2j4L",defaultMessage:[{type:0,value:"Can participate in meetings of the following engagement types for this "},{type:1,value:"eventType"}]},none:{id:"N7Db8V",defaultMessage:[{type:0,value:"None"}]}}),xi=function(e){var t=e.id,n=e.attributes,a=e.relationships,i=n,r=i.canParticipate,o=i.canRequest;return{label:a.engagement.data.attributes.displayName,id:t,canRequest:o,canParticipate:r}},bi=function(e){var t=e.eventName,n=e.userId,a=e.location,i=(0,M.Z)().formatMessage,r=we().campaign,o=(b().location||{}).subType,u=void 0===o?null===r||void 0===r?void 0:r.subType:o,c=(0,s.useUserMappingsQuery)({path:{eventName:t,userId:n,mappingType:"EngagementMapping"},query:{page:{number:1,size:100},search_term:"",location_uuid:a,mapped:!0}}),p=c.data,f=c.isLoading,m=c.error,g=c.refetch,v=null===p||void 0===p?void 0:p.data.map(xi),h=null===v||void 0===v?void 0:v.filter((function(e){return e.canRequest})),y=null===v||void 0===v?void 0:v.filter((function(e){return e.canParticipate}));return m?(0,d.jsx)(l.m,{onButtonClick:function(){return g()}}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(_n.gN,{name:"userCanRequest",render:function(){return(0,d.jsx)(Pa,{label:i(yi.canRequest,{eventType:u?Va[u]:""}),children:(0,d.jsx)(J.Ph,{multi:!0,loading:f,value:h,options:h,disabled:!0,placeholder:i(yi.none)})})}}),(0,d.jsx)(_n.gN,{name:"userCanParticiate",render:function(){return(0,d.jsx)(Pa,{label:i(yi.canParticipate,{eventType:u?Va[u]:""}),children:(0,d.jsx)(J.Ph,{multi:!0,loading:f,value:y,options:y,disabled:!0,placeholder:i(yi.none)})})}})]})},Zi=(0,S.vU)({mappedTopic:{id:"D8tdMg",defaultMessage:[{type:0,value:"Mapped topics of this "},{type:1,value:"eventType"}]},none:{id:"N7Db8V",defaultMessage:[{type:0,value:"None"}]}}),ji=function(e){var t,n,a=e.id,i=e.relationships;return{label:(null===i||void 0===i||null===(t=i.topic)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.attributes).name,id:a}},Si=function(e){var t=e.eventName,n=e.userId,a=e.location,i=(0,M.Z)().formatMessage,r=we().campaign,o=(b().location||{}).subType,u=void 0===o?null===r||void 0===r?void 0:r.subType:o,c=(0,s.useUserMappingsQuery)({path:{eventName:t,userId:n,mappingType:"TopicMapping"},query:{page:{number:1,size:100},search_term:"",location_uuid:a,mapped:!0}}),p=c.data,f=c.isLoading,m=c.error,g=c.refetch,v=p?p.data.map(ji):[];return m?(0,d.jsx)(l.m,{onButtonClick:function(){return g()}}):(0,d.jsx)(_n.gN,{name:"userMappedTopic",render:function(){return(0,d.jsx)(Pa,{label:i(Zi.mappedTopic,{eventType:u?Va[u]:""}),children:(0,d.jsx)(J.Ph,{multi:!0,loading:f,value:v,options:v,disabled:!0,placeholder:i(Zi.none)})})}})},Mi=(0,S.vU)({canManageSelfServeSettings:{id:"PvVyay",defaultMessage:[{type:0,value:"Can manage settings for this "},{type:1,value:"eventType"}]}}),Ci=function(e){var t=e.settings,n=(0,M.Z)().formatMessage,a=(0,W.Pi)().data,i=a.attributes,o=i.role,s=i.privileges.canManageSettings,l=a.id,u=null!==t&&void 0!==t?t:{},c=u.locationSpecificDetails,p=(c=void 0===c?{}:c).canManageSelfServeSettings,m=void 0!==p&&p,g=u.eventRole,v=(g=void 0===g?{}:g).name,h=void 0===v?"":v,y=f(),x=y.id,Z=y.attributes.role,j=we().campaign,S=(b().location||{}).subType,C=void 0===S?null===j||void 0===j?void 0:j.subType:S,A=n(Mi.canManageSelfServeSettings,{eventType:C?Va[C]:""}),E=l===x,w=(0,r.useCallback)((function(){return(0,d.jsx)(_n.gN,{type:"checkbox",name:"canManageSelfServeSettings",render:function(e){var t=e.input,n=e.meta,a=n.error,i=n.submitError;return(0,d.jsxs)(Fa,{$error:i||a,children:[(0,d.jsx)(Na,{children:A}),(0,d.jsx)(Qa,{children:(0,d.jsx)(Tn.Z,(0,T.Z)((0,T.Z)({},t),{},{ariaLabel:A,disabled:E}))})]})}})}),[E,A]);return"CSM"!==Z?E?"MM"===h&&m?(0,d.jsx)(w,{}):null:"MM"===o&&s&&"MM"===h&&m||"CSM"===o?(0,d.jsx)(w,{}):null:null},Ti=n(5026),Ai=function(e){return(0,d.jsxs)(He.JO$,(0,T.Z)((0,T.Z)({width:"26",height:"24",viewBox:"0 0 26 24"},e),{},{children:[(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.275 8.26a.5.5 0 0 0-.693.143l-2.909 4.421-3.386-3.92a.5.5 0 1 0-.756.653l3.818 4.421a.5.5 0 0 0 .796-.052l3.273-4.973a.5.5 0 0 0-.143-.693Z",fill:"#706E6B"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.227 12c0-6.068-4.857-11-10.863-11C5.358 1 .5 5.932.5 12c0 6.07 4.858 11 10.864 11a.5.5 0 0 0 0-1C5.922 22 1.5 17.53 1.5 12c0-5.528 4.422-10 9.864-10 5.442 0 9.863 4.472 9.863 10v1.651a.5.5 0 0 0 1 0V12Z",fill:"#706E6B"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.864 9.27a.5.5 0 0 1 .5-.5h9.818a.5.5 0 0 1 .5.5v7.736a.5.5 0 0 1-.5.5H5.364a.5.5 0 0 1-.5-.5V9.27Zm1 .5v6.736h8.818V9.77H5.864Z",fill:"#706E6B"}),(0,d.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.09 6.559a.5.5 0 0 1 .5.5v3.315a.5.5 0 0 1-1 0V7.06a.5.5 0 0 1 .5-.5Zm4.364 0a.5.5 0 0 1 .5.5v3.315a.5.5 0 0 1-1 0V7.06a.5.5 0 0 1 .5-.5ZM14.045 13.139a.5.5 0 0 1-.5.5H6.999a.5.5 0 0 1 0-1h6.546a.5.5 0 0 1 .5.5Z",fill:"#706E6B"})]}))},Ei=(0,S.vU)({label:{id:"yhFbOE",defaultMessage:[{type:0,value:"Choose Email to Sync Free/Busy"}]}}),wi=function(e){var t=e.mappedCISUserEmails,n=e.isDisabled,a=(0,M.Z)().formatMessage,i=null===t||void 0===t?void 0:t.map((function(e){return{label:e,id:e}}));return(0,d.jsx)(aa.g,{name:"cisEmail",parse:function(e){var t;return null===(t=e[0])||void 0===t?void 0:t.id},format:function(e){return e?[{id:e,label:e}]:[]},render:function(e){var t=e.input,r=e.meta,o=r.touched,s=r.error;return(0,d.jsx)(Pa,{label:a(Ei.label),error:o&&s,children:(0,d.jsx)(J.Ph,(0,T.Z)((0,T.Z)({},t),{},{id:"cisEmail",disabled:n,options:i,onChange:function(e){var n=e.value;return t.onChange(n)}}))})}})},Ii=(0,S.vU)({fetchFreeBusy:{id:"Gnwlz3",defaultMessage:[{type:0,value:"Fetch Free/Busy"}]},LastSyncedTime:{id:"4NLhWt",defaultMessage:[{type:0,value:"Last Synced Time"}]},fetchFreeBusyAriaLabel:{id:"4xgcZL",defaultMessage:[{type:0,value:"Fetch free/busy"}]}}),Ri=function(e){var t=e.cisDetails,n=e.onHandleFetchFreeBusy,a=(0,M.Z)().formatMessage;return(0,d.jsxs)(Ha,{children:[(0,d.jsx)(wi,{mappedCISUserEmails:null===t||void 0===t?void 0:t.userMappedEmails}),(0,d.jsxs)($a,{children:[(null===t||void 0===t?void 0:t.lastSyncTime)&&(0,d.jsx)(Wa,{children:"".concat(a(Ii.LastSyncedTime),": ").concat(q.ou.fromISO(null===t||void 0===t?void 0:t.lastSyncTime).toFormat("FFF"))}),(0,d.jsx)(Ti.RH,{content:a(Ii.fetchFreeBusy),children:(0,d.jsx)(Y.hU,{type:"button",size:20,overrides:ii,onClick:n,"aria-label":a(Ii.fetchFreeBusyAriaLabel),children:(0,d.jsx)(Ai,{})})})]})]})},ki=["cisEmail","modeOfAttendance","taskManager","mappedTo","canManageSelfServeSettings"],Li=(0,S.vU)({title:{id:"KBcuGD",defaultMessage:[{type:0,value:"Settings for"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]},success:{id:"Enum3M",defaultMessage:[{type:0,value:"User settings updated successfully."}]},fetchFreeBusySuccess:{id:"XZBUGi",defaultMessage:[{type:0,value:"Synchronization with external calendar has been initiated. This might a take few minutes."}]}}),zi=new Set(["CSM","MM","JMM"]),Di=["MM","JMM","EX","EA","AM","Partner"],Bi=["ET"],Oi=["EX","EA","AM","Partner"],Ui=(0,ea.Z)(),Pi=function(e){var t=e.handleSubmit,n=e.dirty,a=e.submitSucceeded,i=e.children,o=e.onSave,s=e.isLastItem,l=e.values,u=(0,Pt.y)();return Nt({isDirty:n,onSave:function(){return o(l)}}),(0,r.useEffect)((function(){u(n&&!(s&&a))}),[n,s,a,u]),(0,d.jsxs)("form",{onSubmit:t,noValidate:!0,children:[(0,d.jsx)(Oa,{children:i}),(0,d.jsx)(_n.lP,{subscription:{submitting:!0,validating:!0,dirty:!0,values:!0,valid:!0},children:function(e){var t=e.submitting,n=e.validating,a=e.dirty,i=e.values,r=e.form,l=e.valid;return(0,d.jsx)(We,{hasForm:!0,isLastItem:s,onDiscard:function(){return r.reset()},onSave:function(){return l&&o(i)},isDisabled:!a||t||n,isLoading:t,pendoPrefix:"profile/campaign/settings"})}})]})},Ni=function(e){var t,n,a=e.settings,i=e.mappedTo,r=e.eventRole,o=e.cisDetails,s=e.locationSpecificDetails;return(0,T.Z)((0,T.Z)((0,T.Z)({eventRole:r.name,mappedTo:null!==(t=null===i||void 0===i?void 0:i.users.map((function(e){return{label:e.name,id:e.uuid}})))&&void 0!==t?t:[]},a.reduce((function(e,t){var n=t.name,a=t.value;return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},n,a))}),{})),{},{cisEmail:null===o||void 0===o?void 0:o.cisEmail,modeOfAttendance:null===s||void 0===s?void 0:s.modeOfAttendance,taskManager:null===s||void 0===s?void 0:s.taskManager},null===s||void 0===s||null===(n=s.tagClouds)||void 0===n?void 0:n.reduce((function(e,t){var n=t.tagCloudUuid,a=t.tags;return(0,T.Z)((0,T.Z)({},e),n?(0,V.Z)({},n,{tagCloudUuid:n,tags:a}):{})}),{})),{},{canManageSelfServeSettings:null===s||void 0===s?void 0:s.canManageSelfServeSettings})},Fi=function(e){var t=(0,M.Z)().formatMessage,n=(0,Da.x)()(),a=(0,B.yT)().closeDrawer,i=(0,U.bS)().app===U.fY.WideScale,o=e.user,l=o.id,u=o.attributes.userType,c=(0,W.Pi)().data,p=c.attributes.role,f=c.id,h=e.campaign,y=h.eventName,x=h.location,b=h.eventType,S=(0,r.useState)(null),C=(0,m.Z)(S,2),A=C[0],E=C[1],w=(0,r.useState)(!1),I=(0,m.Z)(w,2),R=I[0],k=I[1],L=(0,r.useState)(),z=(0,m.Z)(L,2),D=z[0],O=z[1],P=(0,r.useMemo)((function(){return A?Ni(A):{}}),[A]),N=(0,r.useMemo)((function(){return(0,ta.Z)({field:"eventRole",updates:{mappedTo:function(e,t,n){var a=t,i=a.eventRole,r=a.mappedTo;if(!Object.keys(n).length)return r;var o=A&&Ni(A);return o&&("EA"===o.eventRole&&"EA"===i||"EX"===o.eventRole&&"EX"===i)?o.mappedTo:r}}})}),[A]),H=(0,qe.useQuery)(["tagCloudList",{path:{eventName:y},query:{current_location_uuid:x}}],s.getTagCloudList).data,$=(0,g.ev)({onError:function(){return(0,Je.Eo)(t(Li.genericError))}}).roles,q=void 0===$?[]:$,J=(0,s.useUsersSettings)({userId:f,onReject:function(){return(0,Je.Eo)(t(Li.genericError))}}),K=J.data,X=(K=void 0===K?{}:K).data,G=J.isLoading,Y=J.run,_=(null!==X&&void 0!==X?X:{}).eventRole,ee=(_=void 0===_?{}:_).name,te=void 0===ee?"":ee,ne=te&&zi.has(te),ae=!ne||!(null!==A&&void 0!==A&&A.eventRole.canEdit)||"JMM"===p&&!Oi.includes(A.eventRole.name),ie=q.filter(function(e){return function(t){var n=t.clientDisplayName;return e.includes(n)}}("internal"===u?Di:Bi)).filter((function(e){var t=e.clientDisplayName;return"JMM"!==p||ae||Oi.includes(t)})),re=(0,s.useUsersSettings)({userId:l,onResolve:function(e){var t=e.data;return E(t)},onReject:function(){return(0,Je.Eo)(t(Li.genericError))}}),oe=re.isLoading,se=re.run,le=re.reload,ue=(0,g.eN)({variables:{names:["in_person_attendance_custom_label","virtual_attendance_custom_label","enable_mode_of_attendance"]},context:{headers:{"X-Location-Uuid":x}},notifyOnNetworkStatusChange:!0,onCompleted:function(e){return O(e.bulkFetchLocationConfigsByName.reduce((function(e,t){var n=t.configName,a=t.configValue;return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},n,a.value))}),{}))}}),de=ue.loading,ce=ue.refetch;(0,r.useEffect)((function(){ce()}),[ce,x]),(0,r.useEffect)((function(){se({locationId:x,subSystem:y}),Y({locationId:x,subSystem:y})}),[y,x,e.eventType,p]);var pe=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(a){var i,r,o,u,d,c,p,f,m,g;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),i=Object.entries(a),r=i.filter((function(e){return!(null!==H&&void 0!==H&&H.data.tag_cloud_list.find((function(t){return t.uuid===e[0]})))})).reduce((function(e,t){return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},t[0],t[1]))}),{}),o=i.filter((function(e){return null===H||void 0===H?void 0:H.data.tag_cloud_list.find((function(t){return t.uuid===e[0]}))})).reduce((function(e,t){return[].concat((0,Q.Z)(e),[t[1]])}),[]),u=r.cisEmail,d=r.modeOfAttendance,c=r.taskManager,p=r.mappedTo,f=r.canManageSelfServeSettings,m=(0,F.Z)(r,ki),g=(0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)({},m),p?{mappedTo:p.map((function(e){return e.id}))}:null),u&&{cisDetails:{cisEmail:u}}),d||c||o?{locationSpecificDetails:(0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)({},d?{modeOfAttendance:d}:null),c?{taskManager:c}:null),o?{tagClouds:o}:null),"MM"===m.eventRole?{canManageSelfServeSettings:f}:null)}:null),e.next=9,(0,s.putUserSettings)({client:n,userId:l,subSystem:y,payload:{data:g}});case 9:return k(!1),(0,Je.XA)(t(Li.success)),e.abrupt("return",void 0);case 14:return e.prev=14,e.t0=e.catch(0),k(!1),(0,Je.Eo)(t(Li.genericError)),e.abrupt("return",(0,V.Z)({},Yn.Ck,{code:"GenericError"}));case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,(0,s.fetchFreeBusyCISConfig)(n,y,l,x);case 4:(0,Je.XA)(t(Li.fetchFreeBusySuccess)),k(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),k(!1),(0,Je.Eo)(t(Li.genericError));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),me=oe||G||de,ge=function(){var t=(0,j.Z)((0,Z.Z)().mark((function t(n){var r;return(0,Z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe(n);case 2:return void 0===(r=t.sent)&&(e.isLastItem&&i&&a(),!e.isLastItem&&e.onNavigate()),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ve=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(t){var n;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(t);case 2:return void 0===(n=e.sent)&&le(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he="CSM"===p||"MM"===p;return(0,d.jsxs)(d.Fragment,{children:[R&&(0,d.jsx)(v.A,{}),me&&(0,d.jsx)(hi,{}),!me&&A&&(0,d.jsx)(_n.l0,{decorators:[Ui,N],onSubmit:ge,initialValues:P,render:function(t){var n,a=t.values,i=a.eventRole,r=a.cisEnabled;return(0,d.jsxs)(Pi,(0,T.Z)((0,T.Z)({},t),{},{onSave:ve,isLastItem:e.isLastItem,children:[(0,d.jsx)(Ya,{roles:ie,isDisabled:f===l||ae&&"CSM"!==p}),A.mappedTo&&("EA"===i||"EX"===i)&&(0,d.jsx)(ti,{campaign:e.campaign,name:"mappedTo",role:i,isDisabled:!A.mappedTo.canEdit}),"StaffScheduling"!==b&&"MM"===i&&(X||"CSM"===p)&&(0,d.jsx)(Ci,{settings:X}),ne&&A.settings.map((function(e){var t=e.canEdit,n=e.name;return(0,d.jsx)(ai,{name:n,isDisabled:!t},n)})),r&&(0,d.jsx)(Ri,{cisDetails:A.cisDetails,onHandleFetchFreeBusy:fe}),"true"===(null===D||void 0===D?void 0:D.enable_mode_of_attendance)&&(0,d.jsx)(ui,(0,T.Z)({},D)),"StaffScheduling"===b&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(mi,{name:"taskManager",isDisabled:!he}),(null===A||void 0===A||null===(n=A.locationSpecificDetails)||void 0===n?void 0:n.tagClouds)&&(0,d.jsx)(pi,{eventName:y,location:x,isDisabled:!he})]}),!ne&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(bi,{eventName:y,userId:l,location:x}),(0,d.jsx)(Si,{eventName:y,userId:l,location:x})]})]}))}})]})},Qi=(0,S.vU)({title:{id:"KBcuGD",defaultMessage:[{type:0,value:"Settings for"}]},noCampaignsListed:{id:"uJQw+C",defaultMessage:[{type:0,value:"No settings to show as you are not mapped to any campaigns yet."}]}}),Wi=function(e){var t=(0,M.Z)().formatMessage,n=f(),a=we().campaign,i=new URLSearchParams(window.location.search).get("location"),r=za();return(0,d.jsxs)(_,{children:[(0,d.jsx)(Ye,{}),(0,d.jsxs)(Ba,{children:[(0,d.jsxs)(Ua,{children:[(0,d.jsx)(Ot,{title:t(Qi.title)}),(0,d.jsx)(me,{$location:!!i,children:(0,d.jsx)(Fe,{eventType:r})})]}),a?(0,d.jsx)(Fi,(0,T.Z)({user:n,campaign:a,eventType:r},e)):(0,d.jsx)(pe,{children:(0,d.jsx)(fe,{children:null===a?(0,d.jsx)(hi,{}):t(Qi.noCampaignsListed)})})]})]})},Hi=function(e){return(0,d.jsx)(Ee,{children:(0,d.jsx)(Wi,(0,T.Z)({},e))})},$i=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{display:"flex",alignItems:"center",justifyContent:"space-between",height:t.scale900,marginBottom:t.scale600}})),qi=(0,X.zo)("div",{}),Ji=(0,X.zo)(va.aM,(function(e){return{marginTop:0,marginBottom:e.$theme.sizing.scale600}})),Ki=function(e){var t=e.consent,n=e.optOut;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Ji,{children:(0,d.jsx)("span",{className:"anchor-primary",dangerouslySetInnerHTML:{__html:t}})}),(0,d.jsx)(Ji,{children:(0,d.jsx)("span",{className:"anchor-primary",dangerouslySetInnerHTML:{__html:n}})})]})},Vi=(0,X.zo)(G.N,(function(e){var t=e.$theme.sizing;return{width:"282px",marginRight:t.scale700,marginBottom:t.scale700}})),Xi=(0,X.zo)(G.N,(function(e){var t=e.$theme.sizing;return{marginRight:t.scale700,marginBottom:t.scale700}})),Gi=(0,X.zo)(G.N,(function(e){var t=e.$theme.sizing;return{width:"282px",marginRight:t.scale700,marginBottom:t.scale700,position:"relative"}})),Yi=(0,X.w1)(te,{height:"calc(100vh - 128px)",overflowY:"scroll"}),_i=(0,X.zo)("div",{width:"282px"}),er=(0,X.zo)(Y.zx,{position:"absolute",right:0,top:"-8px"}),tr=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing;return(0,V.Z)({marginBottom:a.scale500},n.medium,{display:"flex",alignItems:"center"})})),nr=(0,X.zo)(G.N,(function(e){var t=e.$theme,n=t.colors;return{width:"282px",display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:t.sizing.scale700,color:n.mono700}})),ar=(0,X.zo)("div",{width:"282px"}),ir=(0,X.w1)(nr,{marginBottom:0}),rr=(0,X.w1)(ar,(function(e){var t=e.$theme,n=t.typography,a=t.colors,i=t.sizing;return(0,T.Z)((0,T.Z)({},n.LabelSmall),{},{color:a.contentSecondary,marginTop:i.scale100,marginBottom:i.scale700})})),or=n(86451),sr=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.colors,a=t.sizing;return{backgroundColor:n.white,width:"80px",height:"80px",position:"relative",marginBottom:a.scale300}})),lr=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.mediaQuery;return(0,V.Z)({marginRight:n.scale400,marginBottom:n.scale400},a.medium,{marginBottom:0})})),ur=(0,X.zo)("input",{display:"none"}),dr={Initials:{style:function(e){var t=e.$theme.typography;return(0,T.Z)({},t.font1150)}}},cr={BaseButton:{style:function(e){return{marginLeft:e.$theme.sizing.scale600}}}},pr={BaseButton:{style:function(e){var t=e.$theme.colors;return{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:t.white,borderTopWidth:"1px",borderLeftWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px",borderLeftStyle:"solid",borderRightStyle:"solid",borderTopStyle:"solid",borderBottomStyle:"solid",borderLeftColor:t.mono700,borderRightColor:t.mono700,borderTopColor:t.mono700,borderBottomColor:t.mono700,borderTopLeftRadius:"50%",borderTopRightRadius:"50%",borderBottomLeftRadius:"50%",borderBottomRightRadius:"50%",position:"absolute",right:"-2px",top:0}}}},fr={BaseButton:{style:function(e){var t=e.$theme.sizing;return{marginLeft:"-".concat(t.scale500)}}}},mr=n(26326);!function(e){e.RELOAD_ME="reloadMe",e.CLOSE_PROFILE="closeProfile"}(ba||(ba={}));var gr,vr=function(e){var t;null===(t=window.Office)||void 0===t||t.context.ui.messageParent(e)},hr=function(e){return(0,d.jsx)(Y.hU,(0,T.Z)({overrides:pr,size:10},e))},yr=function(e){return(0,d.jsx)(hr,(0,T.Z)((0,T.Z)({type:"button"},e),{},{"aria-label":"close",children:(0,d.jsx)(He.x8P,{color:"#706E6B"})}))},xr=function(e){var t=e.revertAvatar,n=(0,qe.useQueryClient)(),a=(0,s.useAvatarDelete)().mutateAsync,i=(0,W.Pi)().data.id,o=f().id,l=(0,r.useState)(!1),u=(0,m.Z)(l,2),c=u[0],p=u[1],g=(0,r.useState)(!1),h=(0,m.Z)(g,2),y=h[0],x=h[1],b=function(){return p(!1)},S=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),x(!0),e.prev=2,e.next=5,a({userId:o});case 5:x(!1),t(),(0,Je.XA)((0,d.jsx)($.Z,{id:"S5Dz5U",defaultMessage:[{type:0,value:"Image deleted successfully"}]})),o===i&&(n.invalidateQueries("userMe"),vr(ba.RELOAD_ME)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),x(!1),(0,Je.Eo)((0,d.jsx)($.Z,{id:"Xn+o1E",defaultMessage:[{type:0,value:"Error deleting image"}]}));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[y&&(0,d.jsx)(v.A,{}),(0,d.jsx)(yr,{type:"button",onClick:function(){return p(!0)}}),(0,d.jsxs)(Aa.u_,{size:Aa.NO.small,onClose:b,isOpen:c,children:[(0,d.jsx)(Aa.xB,{children:(0,d.jsx)($.Z,{id:"gxuP11",defaultMessage:[{type:0,value:"Delete Photo"}]})}),(0,d.jsx)(Aa.fe,{children:(0,d.jsx)($.Z,{id:"/oY8rz",defaultMessage:[{type:0,value:"Are you sure you want to delete the profile image?"}]})}),(0,d.jsxs)(Aa.mz,{children:[(0,d.jsx)(mr.Lu,{type:"button",kind:Y.TO.secondary,onClick:b,children:(0,d.jsx)($.Z,{id:"6PdOcy",defaultMessage:[{type:0,value:"Cancel"}]})}),(0,d.jsx)(mr.Lu,{type:"button",overrides:cr,kind:Y.TO.primary,onClick:S,children:(0,d.jsx)($.Z,{id:"qviIFp",defaultMessage:[{type:0,value:"Delete"}]})})]})]})]})},br=(0,X.w1)(Aa.fe,(function(e){var t=e.$theme.sizing;return{maxHeight:"auto",paddingLeft:t.scale600,paddingRight:t.scale600}})),Zr=(0,X.zo)("div",(function(e){return{marginBottom:e.$theme.sizing.scale900}})),jr=(0,X.zo)(G.N,(function(e){return{marginBottom:e.$theme.sizing.scale700}})),Sr=n(69774),Mr=n(11717),Cr=function(e){return{name:e.field_name,label:e.optionLabel,helpText:e.helpText,validations:e.required?[aa.i.REQUIRED]:[]}},Tr=function(e){var t=e.name,n=e.label,a=e.helpText,i=e.validations;return(0,d.jsx)(aa.g,{type:"checkbox",name:t,validations:i,render:function(e){var t=e.input,i=e.meta;return(0,d.jsx)(jr,{caption:a,error:i.touched&&i.error,children:(0,d.jsx)($e.XZ,(0,T.Z)((0,T.Z)({},t),{},{children:(0,d.jsx)(va.d9,{color:"inherit",className:"anchor-primary",dangerouslySetInnerHTML:{__html:n}})}))})}})},Ar=function(e){var t,n=e.data,a=e.image,i=e.onCancel,o=e.onClose,l=e.onSuccess,u=e.onError,c=(0,qe.useQueryClient)(),p=(0,r.useState)({x:0,y:0,width:0,height:0}),g=(0,m.Z)(p,2),h=g[0],y=g[1],x=f().id,b=(0,W.Pi)().data.id,S=x===b,M=(0,s.useAvatarUpload)(),C=M.isLoading,A=M.mutateAsync,E=n.custom_consents.avatar_upload_consent_message.data.map(Cr),w=(t=S?"avatar_upload_self_consent_message":"avatar_upload_behalf_consent_message",E.find((function(e){return e.name===t}))),I=(0,r.useMemo)((function(){return(0,V.Z)({},w.name,!1)}),[w.name]),R=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(t){var n;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Mr.m4)(URL.createObjectURL(a),h,"round",a.type,Mr.ru.DATA_URL);case 3:return n=e.sent,e.next=6,A({avatar:{content:n,contentType:a.type,fileName:"avatar"},userId:x,consentField:w.name,consent:t[w.name]});case 6:l(n),(0,Je.XA)((0,d.jsx)($.Z,{id:"pW6Ha/",defaultMessage:[{type:0,value:"Image uploaded successfully"}]})),S&&(c.invalidateQueries("userMe"),vr(ba.RELOAD_ME)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),(0,Je.Eo)((0,d.jsx)($.Z,{id:"tIHsJX",defaultMessage:[{type:0,value:"Error uploading image"}]}));case 15:return e.abrupt("return",void 0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),k=(0,r.useMemo)((function(){return URL.createObjectURL(a)}),[a]);return(0,d.jsxs)(d.Fragment,{children:[C&&(0,d.jsx)(v.A,{}),(0,d.jsx)(Aa.u_,{onClose:o,isOpen:!0,children:(0,d.jsx)(_n.l0,{onSubmit:R,initialValues:I,render:function(e){var t=e.handleSubmit;return(0,d.jsxs)("form",{onSubmit:t,children:[(0,d.jsx)(Aa.xB,{children:(0,d.jsx)($.Z,{id:"V//fYB",defaultMessage:[{type:0,value:"Profile Photo"}]})}),(0,d.jsxs)(br,{children:[(0,d.jsx)(Zr,{children:(0,d.jsx)(Sr.f,{image:k,cropShape:"round",onCropChange:y,onError:u})}),(0,d.jsx)(Tr,(0,T.Z)({},w))]}),(0,d.jsxs)(Aa.mz,{children:[(0,d.jsx)(mr.Lu,{type:"button",kind:Y.TO.secondary,onClick:i,children:(0,d.jsx)($.Z,{id:"PyxZY2",defaultMessage:[{type:0,value:"Cancel"}]})}),(0,d.jsx)(mr.Lu,{type:"submit",overrides:cr,children:(0,d.jsx)($.Z,{id:"R1HYj0",defaultMessage:[{type:0,value:"Save"}]})})]})]})}})})]})},Er=function(e){var t=e.onClose,n=(0,s.usePrivacyMessages)({config:"user_management_privacy_message"}),a=n.isLoading,i=n.error,r=n.refetch,o=n.data,u=(o=void 0===o?{data:void 0}:o).data;return a?(0,d.jsx)(v.A,{}):i?(0,d.jsx)(Aa.u_,{onClose:t,isOpen:!0,children:(0,d.jsx)(br,{children:(0,d.jsx)(l.a,{onButtonClick:function(){return r()}})})}):u?(0,d.jsx)(Ar,(0,T.Z)({data:u},e)):null},wr=/(\.jpg|\.jpeg|\.png)$/i,Ir=function(){var e=f().attributes,t=e.avatar,n=e.firstName,a=e.lastName,i=(0,r.useState)(),o=(0,m.Z)(i,2),s=o[0],l=o[1],u=(0,r.useState)(t),c=(0,m.Z)(u,2),p=c[0],g=c[1],v=(0,r.useRef)(null),h=function(){return(0,Je.Eo)((0,d.jsx)($.Z,{id:"DaEeQV",defaultMessage:[{type:0,value:"Supported formats are JPEG and PNG"}]}))};return(0,d.jsxs)(lr,{children:[(0,d.jsxs)(sr,{children:[(0,d.jsx)(or.Z,{overrides:dr,name:"".concat(n," ").concat(a),src:p,size:"80px"}),p&&(0,d.jsx)(xr,{revertAvatar:function(){return g("")}})]}),(0,d.jsx)(ur,{type:"file",name:"profilePicture",accept:".png, .jpg, .jpeg",multiple:!1,ref:v,onChange:function(){var e,t,n;if(null!==(e=v.current)&&void 0!==e&&e.value&&!wr.test(v.current.value))h(),v.current.value="";else if(null!==(t=v.current)&&void 0!==t&&null!==(n=t.files)&&void 0!==n&&n.length){var a;l(null===(a=v.current)||void 0===a?void 0:a.files[0]),v.current.value=""}}}),s?(0,d.jsx)(Er,{image:s,onSuccess:function(e){g(e),l(null)},onClose:function(){return l(null)},onCancel:function(){return l(null)},onError:function(){l(null),h()}}):null,(0,d.jsx)(Y.zx,{type:"button",kind:Y.TO.minimal,onClick:function(){var e;return null===(e=v.current)||void 0===e?void 0:e.click()},overrides:fr,"data-pendo":"profile/edit/upload-photo",children:(0,d.jsx)($.Z,{id:"cV5W8O",defaultMessage:[{type:0,value:"Change photo"}]})})]})},Rr=n(87273),kr=n(8850),Lr=(0,S.vU)({personalLinkLabel:{id:"aTxU3z",defaultMessage:[{type:0,value:"Personal Meeting Link"}]},required:{id:"QvPaqy",defaultMessage:[{type:0,value:"Required"}]},userNameNotAvailableMessage:{id:"rx61hP",defaultMessage:[{type:0,value:"User name not available"}]}}),zr=function(e){return function(e){return(t=e.lastIndexOf("/")+1,function(e){return[e.slice(0,t),e.slice(t)]})(e);var t}(null!==e&&void 0!==e?e:"")},Dr=function(e){var t=e.personalLink,n=(0,M.Z)().formatMessage,a=(0,W.Pi)().data.id,i=(0,s.useValidatePersonalLinkFetcher)(),o=zr(t),l=(0,m.Z)(o,2),u=l[0],c=l[1],p=(0,r.useState)(!1),f=(0,m.Z)(p,2),g=f[0],v=f[1],h=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(t){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t?void 0:n(Lr.required));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=(0,r.useMemo)((function(){return function(e){var t,n;return function(){var a=(0,j.Z)((0,Z.Z)().mark((function a(i){var r,o,s,l=arguments;return(0,Z.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i===t){a.next=6;break}for(t=i,r=l.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=l[s];return a.next=5,e.apply(void 0,[i].concat(o));case 5:n=a.sent;case 6:return a.abrupt("return",n);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(t){var r;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==c){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,v(!0),e.next=6,i({token:t,userUuid:a});case 6:return r=e.sent,v(!1),e.abrupt("return",r?void 0:n(Lr.userNameNotAvailableMessage));case 11:return e.prev=11,e.t0=e.catch(2),v(!1),e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}())}),[n,c,a,i]),x=(0,kr.f)([h,y]);return(0,d.jsx)(_n.gN,{name:"personalUrlToken",type:"text",validate:x,children:function(e){var t=e.input,a=e.meta;return(0,d.jsx)(Xi,{label:n(Lr.personalLinkLabel),error:(a.dirty||a.touched)&&a.error,children:(0,d.jsxs)(mr.kC,{children:[(0,d.jsx)(mr.Zc,{children:u}),(0,d.jsx)(pt.II,(0,T.Z)((0,T.Z)({},t),{},{onChange:function(e){return n=e.target.value,void t.onChange(n.replace(/(?:(?![\x2D0-9A-Za-z])[\s\S])/g,""));var n},id:"personalUrlToken",autoComplete:"off",overrides:(0,Rr.O)(g)}))]})})}})},Br=(0,S.vU)({label:{id:"Uanmv4",defaultMessage:[{type:0,value:"Can request a new instance"}]}}),Or=function(){var e=(0,M.Z)().formatMessage;return(0,d.jsx)(_n.gN,{name:"canCreateEvent",render:function(t){var n=t.input,a=n.value,i=n.onChange;return(0,d.jsx)(nr,{label:e(Br.label),"data-pendo":"profile/can-request-new-instance",children:(0,d.jsx)($e.XZ,{checkmarkType:"toggle_round",id:"can_create_instance",checked:Boolean(a),onChange:function(e){return i(e.currentTarget.checked)}})})}})},Ur={BaseButton:{style:function(e){var t=e.$theme,n=t.sizing,a=t.colors;return{backgroundColor:a.white,padding:n.scale100,marginTop:n.scale0,marginLeft:n.scale400,color:a.primary,":hover":{backgroundColor:"none"},":focus":{backgroundColor:"none",outline:"none"}}}}},Pr=(0,S.vU)({verify:{id:"vpXVJq",defaultMessage:[{type:0,value:"Verify"}]},resendVerificationLink:{id:"WdF0Zu",defaultMessage:[{type:0,value:"Resend verification email"}]},inviteSentTime:{id:"9/MSzj",defaultMessage:[{type:0,value:"Verification email sent on "},{type:1,value:"dateTime"}]},success:{id:"T5qhIZ",defaultMessage:[{type:0,value:"Verification email is sent successfully"}]},genericError:{id:"a8QLOG",defaultMessage:[{type:0,value:"Error Saving."}]}}),Nr=function(e){var t=e.name,n=e.label,a=(0,M.Z)().formatMessage,i=(0,s.usePortalV1Client)(),l=(0,W.Pi)().data.id,u=(0,r.useState)(!1),c=(0,m.Z)(u,2),p=c[0],g=c[1],h=f().attributes,y=h.verified,x=h.inviteLastSent,b=h.userType,S=(0,o.UO)().userId!==l,C=(0,r.useState)(S&&!y&&"internal"===b),A=(0,m.Z)(C,2),E=A[0],w=A[1],I=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(t){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,(0,s.putVerifyUser)(i,{emails:[t]});case 4:g(!1),w(!1),(0,Je.XA)(a(Pr.success)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),g(!1),(0,Je.Eo)(a(Pr.genericError));case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[p&&(0,d.jsx)(v.A,{}),(0,d.jsx)(aa.g,{name:t,render:function(e){var i=e.input,r=e.meta;return(0,d.jsx)(Gi,{label:n,error:r.touched&&r.error,children:(0,d.jsxs)(d.Fragment,{children:[E&&(0,d.jsx)(er,{type:"button",kind:Y.TO.minimal,overrides:Ur,onClick:function(){return I(i.value)},"data-pendo":"profile/edit/verify-email",children:a(x?Pr.resendVerificationLink:Pr.verify)}),(0,d.jsx)(pt.II,(0,T.Z)((0,T.Z)({},i),{},{id:t,disabled:!0,type:"email"})),E&&x&&(0,d.jsx)(_i,{children:a(Pr.inviteSentTime,{dateTime:q.ou.fromISO(x).toFormat("FF")})})]})})}})]})},Fr=function(e){var t=e.name,n=e.label,a=e.disabled,i=e.validations,o=(0,r.useState)(""),l=(0,m.Z)(o,2),u=l[0],c=l[1],p=f().attributes.userType,g=(0,_n.U$)("secondaryEmails"),v=g.meta.error,h=g.input,y=h.value,x=h.onChange,b=(0,s.useValidateDomain)({onResolve:function(e){var t=e.errors;null!==t&&void 0!==t&&t.email&&((0,Je.Eo)((0,d.jsx)("span",{className:"anchor-primary",dangerouslySetInnerHTML:{__html:t.email}})),x(y.filter((function(e){return e!==u}))))}}).run;return(0,r.useEffect)((function(){u&&!v&&"internal"===p&&b({email:u,isAliasEmail:!0})}),[u,v,p]),(0,d.jsx)(aa.g,{name:t,multiple:!0,parse:function(e){return e.map((function(e){return e.id}))},format:function(e){return e?e.map((function(e){return{id:e,label:e}})):[]},validations:[aa.i.EMAIL].concat((0,Q.Z)(null!==i&&void 0!==i&&i.required?[aa.i.REQUIRED]:[])),render:function(e){var i=e.input,r=e.meta;return(0,d.jsx)(Vi,{label:n,error:r.error,children:(0,d.jsx)(J.Ph,(0,T.Z)((0,T.Z)({},i),{},{multi:!0,id:t,searchable:!0,creatable:!0,clearable:!0,disabled:a,backspaceClearsInputValue:!0,onCloseResetsInput:!1,onBlurResetsInput:!1,onChange:function(e){var t,n=e.value,a=null===(t=n.find((function(e){return e.isCreatable})))||void 0===t?void 0:t.id;a&&/^(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+@(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(a)&&c(a),i.onChange(n)},noResultsMsg:(0,d.jsx)($.Z,{id:"KLO1DV",defaultMessage:[{type:0,value:"Start typing to add an email address"}]})}))})}})},Qr=function(e){var t=e.fields;return(0,d.jsx)(d.Fragment,{children:t.map((function(e,t){var n;if("email"===e.name)return(0,d.jsx)(Nr,(0,T.Z)({},e),t);if("secondaryEmails"===e.name)return(0,d.jsx)(Fr,(0,T.Z)({},e),t);var a=ya[e.fieldType],i=null!==(n=e.validations)&&void 0!==n?n:{},o=i.required,s=i.email,l=[o&&aa.i.REQUIRED,s&&aa.i.EMAIL].filter(Boolean);return(0,r.createElement)(a,(0,T.Z)((0,T.Z)({},e),{},{key:t,validations:l}))}))})},Wr=(0,S.vU)({label:{id:"9dekFd",defaultMessage:[{type:0,value:"Can manage settings"}]},canManageHelpText:{id:"0g9JqN",defaultMessage:[{type:0,value:"Applicable only if the role is Meeting Manager at any instance"}]}}),Hr=function(){var e=(0,M.Z)().formatMessage,t=(0,W.Pi)().data,n=t.attributes,a=n.role,i=n.privileges.canManageSettings,r=t.id,o=f(),s=o.id,l=o.attributes.role,u=r===s;return"CSM"!==l&&("CSM"===a||i&&(u||"MM"===a))?(0,d.jsx)(_n.gN,{name:"canManageSettings",render:function(t){var n=t.input,a=n.value,i=n.onChange;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ir,{label:e(Wr.label),"data-pendo":"profile/can-manage-settings",children:(0,d.jsx)($e.XZ,{checkmarkType:"toggle_round",id:"canManageSettings",checked:a,onChange:function(e){return i(e.currentTarget.checked)},disabled:u})}),(0,d.jsx)(rr,{children:e(Wr.canManageHelpText)})]})}}):null},$r=function(e){var t=e.formRenderProps,n=t.dirty,a=t.handleSubmit,i=t.values,o=t.initialValues,s=e.user,l=e.formFields,u=l.standardFields,c=l.customFields,p=e.onCancel,f=e.onSave,g=(0,Pt.y)(),v=(0,U.bS)().app===U.fY.Outlook,h=new URLSearchParams(window.location.search).get("location"),y=s.id,x=s.attributes,b=x.selfConsentMessage,Z=x.optOutMessage,j=x.personalLink,S=x.userType,M=x.canRequestNewInstance,C=(0,W.Pi)().data,T=C.id,A=C.attributes.role,E=(0,_n.cI)(),w=E.change,I=E.submit,R=i.role,k=i.mappedUsers,L=o.role,z=T===y;Nt({isDirty:n,onSave:function(){return f(i)}}),(0,r.useEffect)((function(){g(n)}),[n,g]);var D=(0,r.useState)(!1),B=(0,m.Z)(D,2),O=B[0],P=B[1];return(0,r.useEffect)((function(){L!==R&&null!==k&&void 0!==k&&k.length&&P(!0)}),[L,R]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("form",{noValidate:!0,onSubmit:a,children:[(0,d.jsxs)(Yi,{children:[(0,d.jsxs)(tr,{children:[(0,d.jsx)(Ir,{}),j&&"internal"===S&&(0,d.jsx)(Dr,{personalLink:j})]}),(0,d.jsx)(ar,{children:(0,d.jsx)(Qr,{fields:u})}),!v&&("EA"===R||"EX"===R)&&!h&&(0,d.jsx)(ti,{name:"mappedUsers",role:R}),"CSM"===A&&"MM"===R&&M&&(0,d.jsx)(Or,{}),"internal"===S&&(0,d.jsx)(Hr,{}),(0,d.jsx)(ar,{children:(0,d.jsx)(xa,{fields:c})}),z&&(0,d.jsx)(Ki,{consent:b,optOut:Z})]}),(0,d.jsx)(_n.lP,{subscription:{submitting:!0,validating:!0,dirty:!0,values:!0,valid:!0},children:function(e){var t=e.submitting,n=e.validating,a=e.dirty,i=e.values,r=e.valid;return(0,d.jsx)(We,{onDiscard:p,isLoading:t,isDisabled:!a||t||n,hasForm:!0,onSave:function(){return r?f(i):I()},pendoPrefix:"profile/edit"})}})]}),O&&(0,d.jsx)(La,{showMessage:!0,onSuccess:function(){w("mappedUsers",[]),P(!1)},onClose:function(){P(!1)},onCancel:function(){w("role",L),P(!1)},pendoName:"profile/role-change-dialog"})]})},qr=["mappedUsers"],Jr=["MM","JMM","EX","EA","AM","Partner"],Kr=new Set(["CSM","MM","JMM"]),Vr=["EX","EA","AM","Partner"],Xr=["ET"],Gr=function(e){return function(t){var n=t.clientDisplayName;return e.includes(n)}},Yr=(0,ea.Z)(),_r=(0,S.vU)({role:{id:"pUwMkh",defaultMessage:[{type:0,value:"Company Role"}]},roleHelpText:{id:"YQlfBW",defaultMessage:[{type:0,value:"To change or view the instance role go to Event Instances \u2192 Settings"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]},success:{id:"rmcYox",defaultMessage:[{type:0,value:"User profile updated successfully."}]}}),eo=function(e){var t=e.user,n=e.fields,a=e.onCancel,o=e.onNavigate,l=(0,M.Z)().formatMessage,u=(0,qe.useQueryClient)(),c=(0,U.bS)().app===U.fY.Outlook,p=new URLSearchParams(window.location.search).get("location"),f=(0,s.usePortalV2Client)(),h=(0,W.Pi)().data,y=h.id,x=h.attributes.role,b=(0,r.useState)(!1),S=(0,m.Z)(b,2),C=S[0],A=S[1],E=t.id,w=t.attributes,I=t.relationships,R=y===E,k=(0,g.vV)({onError:function(){return(0,Je.Eo)(l(_r.genericError))}}),L=k.fetchRoles,z=k.roles,D=void 0===z?[]:z;(0,r.useEffect)((function(){!R&&L()}),[R,L]);var B=(0,r.useMemo)((function(){var e="JMM"===x&&!Vr.includes(w.role),t=Kr.has(x),a={name:"role",value:w.role,validations:{required:!0},fieldType:i.DROPDOWN,disabled:!!p||!t||e||R||"external"===w.userType,helpText:l(_r.roleHelpText),label:l(_r.role),options:R?[{label:l(na.uJ[w.role]),id:w.role}]:D.filter(Gr("internal"===w.userType?Jr:Xr)).filter((function(t){var n=t.clientDisplayName;return"JMM"!==x||e||Vr.includes(n)})).map((function(e){var t=e.clientDisplayName;return{label:l(na.uJ[t]),id:t}}))},r=n.filter((function(e){var t=e.attributes.fieldInfo,n=e.type;return!(("InternalUserStandardForm"===n||"ExternalUserStandardForm"===n)&&!t.show)})).map((function(e){return Ta({field:e,user:w})})).reduce((function(e,t){return 0===t.name.indexOf("customFields.")?e[1].push(t):e[0].push(t),e}),[[],[]]),o=(0,m.Z)(r,2),s=o[0],u=o[1],d=Za.filter((function(e){return s.find((function(t){return t.name===e}))})).map((function(e){return s.find((function(t){return t.name===e}))}));return{customFields:u,standardFields:[].concat((0,Q.Z)(d),(0,Q.Z)(c?[]:[a]))}}),[p,n,l,c,R,x,D,w]),O=(0,r.useMemo)((function(){var e,t;return(0,T.Z)((0,T.Z)((0,T.Z)({},w),w.personalLink?{personalUrlToken:zr(w.personalLink)[1]}:null),{},{mappedUsers:null!==(e=null===I||void 0===I||null===(t=I.mappedUsers)||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.attributes,a=n.firstName,i=n.lastName;return{label:"".concat(a," ").concat(i),id:t}})))&&void 0!==e?e:[]})}),[null===I||void 0===I?void 0:I.mappedUsers,w]),P=(0,r.useMemo)((function(){return(0,ta.Z)({field:"role",updates:{mappedUsers:function(e,t,n){var a=t,i=a.role,r=a.mappedUsers,o=n.role;return Object.keys(n).length?"EA"===O.role&&"EA"===i||"EX"===O.role&&"EX"===i?O.mappedUsers:"EX"===o&&"EA"===O.role||"EA"===o&&"EX"===O.role?[]:r:r}}})}),[O.role,O.mappedUsers]),N=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(t){var n,i,r,o,c;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mappedUsers,i=(0,F.Z)(t,qr),e.prev=1,A(!0),e.next=5,(0,s.patchUserProfile)(f,(0,T.Z)((0,T.Z)({},i),{},{relationships:{mappedUsers:null!==(r=null===n||void 0===n?void 0:n.map((function(e){return e.id})))&&void 0!==r?r:[]}}),E);case 5:return u.invalidateQueries("fetchUser"),a(),(0,Je.XA)(l(_r.success)),e.abrupt("return",void 0);case 11:if(e.prev=11,e.t0=e.catch(1),A(!1),!(e.t0 instanceof s.HttpError&&403===e.t0.response.status)){e.next=18;break}return c=null!==(o=e.t0.errors[0].title)&&void 0!==o?o:l(_r.genericError),(0,Je.Eo)((0,d.jsx)("span",{className:"anchor-primary",dangerouslySetInnerHTML:{__html:c}})),e.abrupt("return",void 0);case 18:return(0,Je.Eo)(l(_r.genericError)),e.abrupt("return",(0,V.Z)({},Yn.Ck,{code:"GenericError"}));case 20:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(t){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:void 0===e.sent&&(null===o||void 0===o||o());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[C&&(0,d.jsx)(v.A,{}),(0,d.jsx)(_n.l0,{onSubmit:H,initialValues:O,decorators:[Yr,P],render:function(e){return(0,d.jsx)($r,{formRenderProps:e,user:t,formFields:B,onCancel:a,onSave:N})}})]})},to=n(21449),no=n(52869),ao=n(78399),io=n(92377),ro=(0,S.vU)({title:{id:"qNLzyM",defaultMessage:[{type:0,value:"Profile"}]}}),oo=function(e){var t=e.children,n=(0,M.Z)().formatMessage;return(0,d.jsxs)($i,{children:[(0,d.jsx)(ce,{children:n(ro.title)}),(0,d.jsx)(qi,{children:t})]})},so={style:function(e){var t=e.$colIndex,n=e.$theme,a=n.typography,i=n.colors;return(0,T.Z)((0,T.Z)({maxWidth:"300px",paddingLeft:0},a.Paragraph2),0===t?{color:i.mono700}:null)}},lo={Root:{style:function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing;return(0,V.Z)({borderStyle:"none",paddingTop:a.scale750,width:"100%"},n.medium,{maxWidth:"420px"})}},TableHead:{style:{display:"none"}},TableBodyRow:{style:{":hover":{backgroundColor:"transparent"}}},TableBodyCell:so},uo={Root:{style:function(e){var t=e.$theme,n=t.colors,a=t.sizing;return{borderLeftColor:n.mono600,borderRightColor:n.mono600,borderTopColor:n.mono600,borderBottomColor:n.mono600,marginLeft:0,marginRight:a.scale400}}},Text:{style:function(e){return{color:e.$theme.colors.mono900,maxWidth:"160px"}}}},co={Root:{style:function(e){return{marginRight:e.$theme.sizing.scale600}}},Initials:{style:function(e){var t=e.$theme.typography;return(0,T.Z)({},t.font1150)}}},po={BaseButton:{style:{flex:1}}},fo={BaseButton:{style:function(e){var t=e.$theme.sizing;return{backgroundColor:"transparent",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,paddingLeft:t.scale100,paddingRight:t.scale100,paddingTop:t.scale100,paddingBottom:t.scale100}}}},mo=(0,X.zo)("img",(function(e){return{width:"80px",height:"80px",borderRadius:"100%",marginRight:e.$theme.sizing.scale600}})),go=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.small,{flexDirection:"row",alignItems:"center"})})),vo=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",marginTop:n.scale400},a.small,{marginTop:0})})),ho=(0,X.zo)("label",(function(e){var t=e.$theme,n=t.typography,a=t.sizing;return(0,T.Z)((0,T.Z)({},n.LabelSmall),{},{marginBottom:a.scale500})})),yo=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.colors;return(0,T.Z)((0,T.Z)({},n.LabelSmall),{},{color:a.mono700})})),xo=(0,X.zo)("div",{marginTop:"-1rem",marginBottom:"-1rem"}),bo=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",alignItems:"center"},t.medium,{})})),Zo=(0,X.zo)("div",(function(e){return{marginLeft:e.$theme.sizing.scale200}})),jo=(0,S.vU)({altAvatar:{id:"9we0Qj",defaultMessage:[{type:0,value:"User avatar"}]},role:{id:"pUwMkh",defaultMessage:[{type:0,value:"Company Role"}]},editButtonLabel:{id:"3OMo22",defaultMessage:[{type:0,value:"Edit Profile"}]},personalLinkLabel:{id:"aTxU3z",defaultMessage:[{type:0,value:"Personal Meeting Link"}]},copiedLabel:{id:"I0As3Q",defaultMessage:[{type:0,value:"Copied"}]},labelForEA:{id:"WYN1aM",defaultMessage:[{type:0,value:"Managed Attendees at Company"}]},labelForEX:{id:"ERlEI1",defaultMessage:[{type:0,value:"Executive Admins at Company"}]},createInstance:{id:"Uanmv4",defaultMessage:[{type:0,value:"Can request a new instance"}]},No:{id:"2ZukyI",defaultMessage:[{type:0,value:"No"}]},Yes:{id:"pa5AmU",defaultMessage:[{type:0,value:"Yes"}]},canManageSettingsLabel:{id:"9dekFd",defaultMessage:[{type:0,value:"Can manage settings"}]}}),So=["textfield","numberfield","checkbox","textarea","dropdown","multiselect_dropdown"],Mo=function(e){var t=e.onClick,n=(0,M.Z)().formatMessage;return(0,d.jsx)(Y.zx,{kind:Y.TO.secondary,onClick:t,overrides:(0,O.a)("medium")?{}:po,"data-pendo":"profile/view/edit-mode",children:n(jo.editButtonLabel)})},Co=function(e){var t=(0,M.Z)().formatMessage,n=(0,U.bS)().app===U.fY.Outlook,a=e.fields,i=e.onEditClick,o=e.user.attributes,s=(0,W.Pi)().data,l=s.id,u=s.attributes,c=u.role,p=u.privileges.canManageSettings,f=e.user,m=f.id,g=f.relationships,v=new URLSearchParams(window.location.search).get("location"),h=l===m,y=a.map((function(e){return Ta({field:e,user:o})})).reduce((function(e,t){return 0===t.name.indexOf("customFields.")&&e.push(t),e}),[]),x=ra(y,o.customFields||{},c),b=(0,r.useMemo)((function(){var e;return[].concat((0,Q.Z)(Za.filter((function(e){return a.find((function(t){var n=t.type,a=t.attributes;return("InternalUserStandardForm"===n||"ExternalUserStandardForm"===n)&&a.fieldName===e&&a.fieldInfo.show}))})).map((function(e){var t,n=o[e];return{label:null===(t=a.find((function(t){return t.attributes.fieldName===e})))||void 0===t?void 0:t.attributes.displayName,value:Array.isArray(n)?n.map((function(e,t){return(0,d.jsx)(io.Vp,{closeable:!1,variant:io.c7.outlined,overrides:uo,children:e},t)})):n}}))),(0,Q.Z)(n?[]:"internal"===o.userType?[{label:t(jo.role),value:t(na.uJ[o.role])}].concat((0,Q.Z)("EA"!==o.role&&"EX"!==o.role||v?[]:[{label:t(jo["EA"===o.role?"labelForEA":"labelForEX"]),value:null===g||void 0===g||null===(e=g.mappedUsers)||void 0===e?void 0:e.map((function(e,t){var n=e.attributes,a=n.firstName,i=n.lastName;return(0,d.jsxs)(io.Vp,{closeable:!1,variant:io.c7.outlined,overrides:uo,children:[a,"\xa0",i]},t)}))}])):[{label:t(jo.role),value:t(na.uJ[o.role])}]),(0,Q.Z)("CSM"===c&&"MM"===o.role&&o.canRequestNewInstance?[{label:t(jo.createInstance),value:o.canCreateEvent?t(jo.Yes):t(jo.No)}]:[]),(0,Q.Z)("internal"===o.userType&&"CSM"!==o.role&&("CSM"===c||p&&(h||"MM"===c))?[{label:t(jo.canManageSettingsLabel),value:t(o.canManageSettings?jo.Yes:jo.No)}]:[]),(0,Q.Z)(a.filter((function(e){var t=e.attributes.fieldName;return x.find((function(e){return-1!==e.name.indexOf(t)}))})).filter((function(e){var t=e.type,n=e.attributes.fieldInfo,a=n.widget,i=n.hidden;return("InternalUserCustomForm"===t||"ExternalUserCustomForm"===t)&&So.includes(a)&&!i})).map((function(e){var t,n=e.attributes,a=n.fieldInfo,i=a.label,r=a.widget,s=null===(t=o.customFields)||void 0===t?void 0:t[n.fieldName];return{label:i,value:s?Array.isArray(s)?s.map((function(e,t){return(0,d.jsx)(io.Vp,{closeable:!1,variant:io.c7.outlined,overrides:uo,children:e},t)})):"textarea"===r?(0,d.jsx)(xo,{dangerouslySetInnerHTML:{__html:s}}):s:"--"}}))))}),[t,o,n,v,null===g||void 0===g?void 0:g.mappedUsers,c,h,p,a,x]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(te,{children:[(0,O.a)("medium")?(0,d.jsx)(oo,{children:(0,d.jsx)(Mo,{onClick:i})}):null,(0,d.jsxs)(go,{children:[o.avatar?(0,d.jsx)(mo,{src:o.avatar,alt:t(jo.altAvatar)}):(0,d.jsx)(or.Z,{overrides:co,name:"".concat(o.firstName," ").concat(o.lastName),size:"80px"}),o.personalLink&&"internal"===o.userType&&(0,d.jsxs)(vo,{children:[(0,d.jsx)(ho,{children:t(jo.personalLinkLabel)}),(0,d.jsxs)(bo,{children:[(0,d.jsx)(yo,{children:o.personalLink}),(0,d.jsx)(Zo,{children:(0,d.jsx)(to.CopyToClipboard,{text:o.personalLink,children:(0,d.jsx)(Y.hU,{type:"button",size:16,overrides:fo,onClick:function(){return(0,Je.XA)((0,d.jsx)($.Z,{id:"ka2pV6",defaultMessage:[{type:0,value:"The link is copied to clipboard and is ready to be shared."}]}))},children:(0,d.jsx)(He.KK1,{})})})})]})]})]}),(0,d.jsx)(no.Z,{columns:["",""],data:b.map((function(e){return[e.label,e.value]})),overrides:lo,horizontalScrollWidth:"420px",divider:ao.d.clean}),h&&(0,d.jsx)(Ki,{consent:o.selfConsentMessage,optOut:o.optOutMessage})]}),(0,O.a)("medium")?null:(0,d.jsx)(B.bk,{children:(0,d.jsx)(Mo,{onClick:i})})]})},To=function(){var e=(0,X.hQ)(),t=(0,m.Z)(e,2)[1],n={speed:2,primaryColor:t.colors.mono200,secondaryColor:t.colors.mono300};return(0,d.jsxs)(at.ZP,(0,T.Z)((0,T.Z)({width:"600px",height:"500px",viewBox:"0 0 1000 500"},n),{},{children:[(0,d.jsx)("circle",{cx:"40",cy:"40",r:"40",stroke:"black",strokeWidth:"1"}),(0,d.jsx)("rect",{y:"112",width:"60",height:"10"}),(0,d.jsx)("rect",{y:"112",x:"150",rx:"3",ry:"3",width:"60",height:"10"}),(0,d.jsx)("rect",{y:"142",width:"60",height:"10"}),(0,d.jsx)("rect",{y:"142",x:"150",rx:"3",ry:"3",width:"60",height:"10"}),(0,d.jsx)("rect",{y:"172",width:"100",height:"10"}),(0,d.jsx)("rect",{y:"172",x:"150",rx:"3",ry:"3",width:"100",height:"10"}),(0,d.jsx)("rect",{y:"202",width:"100",height:"10"}),(0,d.jsx)("rect",{y:"202",x:"150",rx:"3",ry:"3",width:"100",height:"10"}),(0,d.jsx)("rect",{y:"232",width:"60",height:"10"}),(0,d.jsx)("rect",{y:"232",x:"150",rx:"3",ry:"3",width:"60",height:"10"}),(0,d.jsx)("rect",{y:"262",width:"60",height:"10"}),(0,d.jsx)("rect",{y:"262",x:"150",rx:"3",ry:"3",width:"60",height:"10"}),(0,d.jsx)("rect",{y:"292",width:"100",height:"10"}),(0,d.jsx)("rect",{y:"292",x:"150",rx:"3",ry:"3",width:"100",height:"10"}),(0,d.jsx)("rect",{y:"322",width:"100",height:"10"}),(0,d.jsx)("rect",{y:"322",x:"150",rx:"3",ry:"3",width:"100",height:"10"})]}))},Ao=(0,S.vU)({genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]}}),Eo=(0,r.createContext)(void 0),wo=function(){var e=(0,r.useState)(1),t=(0,m.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)({}),o=(0,m.Z)(i,2),s=o[0],l=o[1],u=(0,r.useState)(new Set),d=(0,m.Z)(u,2),c=d[0],p=d[1],f=(0,r.useState)({}),g=(0,m.Z)(f,2),v=g[0],h=g[1],y=function(e){l((function(t){return(0,T.Z)((0,T.Z)({},t),e)}));var t=(0,T.Z)({},v);Object.keys(t).forEach((function(n){t[n]=(0,T.Z)((0,T.Z)({},t[n]),e)})),h(t)},x=function(e){if(c.has(e.uuid)){var t=(0,T.Z)({},v);t[e.uuid]=(0,T.Z)((0,T.Z)({},t[e.uuid]),e),h(t)}else p((function(t){return new Set(t).add(e.uuid)})),h((function(t){return(0,T.Z)((0,T.Z)({},t),{},(0,V.Z)({},e.uuid,(0,T.Z)({},e)))}))},b=function(){return s},Z=function(e){return v[e]},j=function(){return v},S=function(){return 0===Array.from(c).length},M=function(){return c},C=function(){p(new Set),h({}),l({})};return(0,r.useMemo)((function(){return{pageNumber:n,setPageNumber:a,isAllSelected:b,toggleSelectAll:y,toggleSelectItem:x,isMappedUuidListEmpty:S,isItemSelected:Z,selections:j,mappedUuidList:M,clearAll:C}}),[b,c,v,n])},Io=function(e){return(0,d.jsx)(Eo.Provider,{value:wo(),children:e.children})},Ro=function(){var e=(0,r.useContext)(Eo);return e},ko=(0,r.createContext)(void 0),Lo=function(){var e=(0,r.useState)(1),t=(0,m.Z)(e,2),n=t[0],a=t[1],i=(0,r.useState)({}),o=(0,m.Z)(i,2),s=o[0],l=o[1],u=(0,r.useState)(new Set),d=(0,m.Z)(u,2),c=d[0],p=d[1],f=(0,r.useState)({}),g=(0,m.Z)(f,2),v=g[0],h=g[1],y=function(e){l((function(t){return(0,T.Z)((0,T.Z)({},t),e)}));var t=(0,T.Z)({},v);Object.keys(t).forEach((function(n){t[n]=(0,T.Z)((0,T.Z)({},t[n]),e)})),h(t)},x=function(e){if(c.has(e.uuid)){var t=(0,T.Z)({},v);t[e.uuid]=(0,T.Z)((0,T.Z)({},t[e.uuid]),e),h(t)}else p((function(t){return new Set(t).add(e.uuid)})),h((function(t){return(0,T.Z)((0,T.Z)({},t),{},(0,V.Z)({},e.uuid,(0,T.Z)({},e)))}))},b=function(){return s},Z=function(e){return v[e]},j=function(){return v},S=function(){return 0===Array.from(c).length},M=function(){return c},C=function(){p(new Set),h({}),l({})};return(0,r.useMemo)((function(){return{pageNumber:n,setPageNumber:a,isAllSelected:b,toggleSelectAll:y,toggleSelectItem:x,isUnMappedUuidListEmpty:S,isItemSelected:Z,selections:j,unMappedUuidList:M,clearAll:C}}),[b,c,v,n])},zo=function(e){return(0,d.jsx)(ko.Provider,{value:Lo(),children:e.children})},Do=function(){var e=(0,r.useContext)(ko);return e},Bo=(0,X.w1)(te,(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",height:"calc(100vh - 120px)",overflow:"scroll",paddingBottom:0},t.medium,{height:"calc(100vh - 120px)",paddingBottom:0})})),Oo=(0,X.zo)(G.N,(function(e){var t=e.$theme.sizing;return{paddingLeft:t.scale600,paddingRight:t.scale600,minWidth:"162px"}})),Uo=(0,X.zo)("div",{display:"flex",justifyContent:"space-between"}),Po=(0,X.zo)("div",{display:"flex"}),No=(0,X.w1)(ie,(function(e){return{position:"sticky",left:0,bottom:0,marginTop:"auto",paddingTop:e.$theme.sizing.scale850}})),Fo=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({marginLeft:0},t.medium,{marginLeft:"223px"})})),Qo=(0,X.zo)("div",(function(e){return{marginTop:e.$theme.sizing.scale1400}})),Wo=(0,X.zo)("p",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.font300),{},{display:"flex",justifyContent:"center"})})),Ho=(0,X.zo)("p",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.ParagraphMedium),{},{marginTop:0,marginBottom:0})})),$o=(0,X.zo)("div",{height:"100%",display:"flex",flexDirection:"column"}),qo={TableHeadCell:{style:{paddingLeft:0}},TableBodyCell:{style:{paddingLeft:0}}},Jo=(0,S.vU)({IsAnExpert:{id:"pVBLzm",defaultMessage:[{type:0,value:"Expert"}]},EmptyMessage:{id:"IK74Bs",defaultMessage:[{type:0,value:"No Topics added"}]},EmptyMessageMapped:{id:"H6dlnX",defaultMessage:[{type:0,value:"User is currently not mapped to any Topic."}]},EmptyMessageUnMapped:{id:"q/qdqk",defaultMessage:[{type:0,value:"User is currently mapped to all Topics."}]},AddNewButtonMessage:{id:"GBucJQ",defaultMessage:[{type:0,value:"Add Topic"}]}}),Ko=(0,S.vU)({mapToExpert:{id:"1ZzR4j",defaultMessage:[{type:0,value:"Map to expert"}]}}),Vo=["CSM","MM","JMM"],Xo=function(e){var t=e.items,n=e.isSelectAll,a=e.isItemSelected,i=e.toggleSelectAll,r=e.toggleSelectItem,o=e.hasSomeItemSelected,s=e.mappingsCount,l=e.listType,u=(0,M.Z)().formatMessage,c=we().campaign,p=c.eventName,m=c.location,g=f().id,v=(0,W.Pi)().data,h=v.id,y=v.attributes,x=y.role,b=y.eventRole,Z=n,j=!t.length,S=!s.mapped&&!s.unMapped,C=Vo.includes(x)||!!b&&Vo.includes(b),T=C&&h!==g;return(0,d.jsxs)(Jt.Z,{data:t,overrides:qo,emptyMessage:(0,d.jsx)(ct,{onAddNew:function(){return window.location.href="/".concat(p,"/topics/topic_listing?current_location_uuid=").concat(m)},emptyMessage:u(S?Jo.EmptyMessage:"mapped"===l?Jo.EmptyMessageMapped:Jo.EmptyMessageUnMapped),addNewButtonMessage:u(Jo.AddNewButtonMessage),showAddButton:S&&C}),children:[(0,d.jsx)(Kt.Z,{children:function(e){return(0,d.jsx)(Ho,{children:e.displayName})}}),(0,d.jsx)(Kt.Z,{header:(0,d.jsx)(tt,{columnName:"mapTo",label:u(Jo.IsAnExpert),checked:Z,intermediate:o,handleSelectAll:i,handleDeselectAll:i,showCheckbox:j,disabled:!T}),children:function(e){var t,n,i;return(0,d.jsx)(nt,{rowId:e.id,rowName:"mapTo",rowChecked:null!==(t=null!==(n=null===(i=a(e.id))||void 0===i?void 0:i.mapTo)&&void 0!==n?n:Z)&&void 0!==t?t:e.mapTo,handleSelectItem:r,disabled:!T,ariaLabel:u(Ko.mapToExpert)})}})]})},Go=10,Yo=function(e){var t=we().campaign,n=t.eventName,a=t.location,i=(0,Zn.Q)(e.totalItems),r=(0,qe.useMutation)((0,s.topicsPreferencesMutationFn)({path:{eventName:n},query:{location_uuid:a}}),{}).mutate;return(0,d.jsx)(No,{children:(0,d.jsx)(bn.t,{kind:bn.T.light,totalItems:e.totalItems,pageSizes:i,currentPageSize:e.pageSize,currentPageNumber:e.pageNumber,onPageNumberChange:e.onPageNumberChange,onPageSizeChange:function(t){e.onPageSizeChange(t),e.onPageNumberChange(1),r({data:(0,V.Z)({},e.eventType,{pageSize:t})})}})})},_o=function(e){var t=e.id,n=e.setTotalCount,a=e.searchTerm,i=e.refresh,o=e.mappingsCount,l=e.setDefaultSelections,u=we().campaign,c=u.eventName,p=u.location,f=(0,r.useState)([]),g=(0,m.Z)(f,2),v=g[0],h=g[1],y=(0,r.useState)(0),x=(0,m.Z)(y,2),b=x[0],Z=x[1],j=(0,r.useState)(0),S=(0,m.Z)(j,2),M=S[0],C=S[1],A=(0,r.useRef)(!1),E=ht().eventType,w=Ro(),I=w.pageNumber,R=w.setPageNumber,k=w.selections,L=w.isAllSelected,z=w.toggleSelectAll,D=w.toggleSelectItem,B=w.isItemSelected,O=w.clearAll,U=Do().clearAll,P="Emeet"===E?"emeetInstances":"eventInstances";(0,s.useQuery)(["topicsPreferences",{path:{eventName:c},query:{location_uuid:p}}],s.getTopicsPreferencesQueryFn,{onSuccess:function(e){var t,n,a=e.data;C(null!==(t=null===(n=a[P])||void 0===n?void 0:n.pageSize)&&void 0!==t?t:Go)},onError:function(){C(Go)}});var N=(0,s.useUserEngagementsMapping)({id:t,mappingType:"TopicMapping",subSystem:c,onResolve:function(e){var t,a=e,i=a.data,r=a.meta;Z(null===(t=r.page)||void 0===t?void 0:t.size),l((function(e){return(0,T.Z)((0,T.Z)({},e),{},{mapped:i.reduce((function(e,t){return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},t.id,t.attributes))}),{})})})),n({mapped:null===r||void 0===r?void 0:r.mapped.number,unMapped:null===r||void 0===r?void 0:r.unmapped.number}),h(i.map((function(e){var t=e.relationships.topic.data;return{id:e.id,displayName:t.attributes.displayName,mapTo:e.attributes.mapTo}})))}}),F=N.isLoading,Q=N.run;(0,r.useEffect)((function(){A.current?(R(1),O(),U()):A.current=!0}),[a]),(0,r.useEffect)((function(){M>0&&Q({locationUuid:p,searchTerm:a,mapped:!0,pageNumber:I,pageSize:M})}),[I,a,c,p,i,E,M]);var W=!v.length,H=Object.values(k()),$=H.some((function(e){return!e.mapTo}))||H.some((function(e){return e.mapTo})),q=L().mapTo?H.some((function(e){return!e.mapTo})):H.some((function(e){return e.mapTo})),J=void 0===L().mapTo?$:q;return(0,d.jsxs)($o,{children:[(F||0===M)&&(0,d.jsx)(st,{}),!F&&v&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Xo,{items:v,toggleSelectAll:z,toggleSelectItem:D,isSelectAll:L().mapTo,isItemSelected:B,hasSomeItemSelected:J,mappingsCount:o,listType:"mapped"}),b>Go&&!W&&(0,d.jsx)(Yo,{eventType:P,totalItems:b,pageSize:M,pageNumber:I,onPageSizeChange:C,onPageNumberChange:R})]})]})},es=function(e){var t=e.id,n=e.setTotalCount,a=e.searchTerm,i=e.refresh,o=e.mappingsCount,l=e.setDefaultSelections,u=we().campaign,c=u.eventName,p=u.location,f=(0,r.useState)([]),g=(0,m.Z)(f,2),v=g[0],h=g[1],y=(0,r.useState)(0),x=(0,m.Z)(y,2),b=x[0],Z=x[1],j=(0,r.useState)(0),S=(0,m.Z)(j,2),M=S[0],C=S[1],A=(0,r.useRef)(!1),E=Do(),w=E.pageNumber,I=E.setPageNumber,R=E.selections,k=E.isAllSelected,L=E.toggleSelectAll,z=E.toggleSelectItem,D=E.isItemSelected,B=E.clearAll,O=Ro().clearAll,U="Emeet"===c?"emeetInstances":"eventInstances";(0,qe.useQuery)(["topicsPreferences",{path:{eventName:c},query:{location_uuid:p}}],s.getTopicsPreferencesQueryFn,{onSuccess:function(e){var t,n,a=e.data;C(null!==(t=null===(n=a[U])||void 0===n?void 0:n.pageSize)&&void 0!==t?t:Go)},onError:function(){C(Go)}});var P=(0,s.useUserEngagementsMapping)({id:t,mappingType:"TopicMapping",subSystem:c,onResolve:function(e){var t,a=e,i=a.data,r=a.meta;Z(null===(t=r.page)||void 0===t?void 0:t.size),l((function(e){return(0,T.Z)((0,T.Z)({},e),{},{mapped:i.reduce((function(e,t){return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},t.id,t.attributes))}),{})})})),n({mapped:null===r||void 0===r?void 0:r.mapped.number,unMapped:null===r||void 0===r?void 0:r.unmapped.number}),h(i.map((function(e){var t=e.relationships.topic.data;return{id:e.id,displayName:t.attributes.displayName,mapTo:e.attributes.mapTo}})))}}),N=P.isLoading,F=P.run;(0,r.useEffect)((function(){A.current?(I(1),B(),O()):A.current=!0}),[a]),(0,r.useEffect)((function(){M>0&&F({locationUuid:p,searchTerm:a,mapped:!1,pageNumber:w,pageSize:M})}),[w,a,c,p,i,M]);var Q=!v.length,W=Object.values(R()),H=W.some((function(e){return!e.mapTo}))||W.some((function(e){return e.mapTo})),$=k().mapTo?W.some((function(e){return!e.mapTo})):W.some((function(e){return e.mapTo})),q=void 0===k().mapTo?H:$;return(0,d.jsxs)($o,{children:[(N||0===M)&&(0,d.jsx)(st,{}),!N&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Xo,{items:v,toggleSelectAll:L,toggleSelectItem:z,isSelectAll:k().mapTo,isItemSelected:D,hasSomeItemSelected:q,mappingsCount:o}),b>Go&&!Q&&(0,d.jsx)(Yo,{eventType:U,totalItems:b,pageSize:M,pageNumber:w,onPageSizeChange:C,onPageNumberChange:I})]})]})},ts={Root:{style:function(e){return{display:"flex",flexDirection:"column",flexGrow:1,marginTop:e.$theme.sizing.scale600}}},TabList:{style:function(e){return{height:e.$theme.sizing.scale1000}}},TabHighlight:{style:{marginLeft:"1px"}},TabBorder:{style:{display:"none"}}},ns={TabPanel:{style:function(e){return{paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,marginTop:e.$theme.sizing.scale600}}}},as=(0,S.vU)({Mapped:{id:"sRVcM1",defaultMessage:[{type:0,value:"Mapped"}]},Unmapped:{id:"Xf243D",defaultMessage:[{type:0,value:"Unmapped"}]},genericError:{id:"a8QLOG",defaultMessage:[{type:0,value:"Error Saving."}]},disableMessageError:{id:"3vS2gD",defaultMessage:[{type:0,value:"Topics are not enabled for this "},{type:1,value:"eventSubType"},{type:0,value:". For details contact "},{type:1,value:"supportEmail"}]}}),is=new Set(["CSM","MM","JMM"]),rs=function(e){var t=e.search,n=e.userId,a=e.refresh,i=e.setDefaultSelections,o=e.currentLocationUuid,s=(0,M.Z)().formatMessage,l=(0,r.useState)("0"),u=(0,m.Z)(l,2),c=u[0],p=u[1],f=(0,r.useState)({mapped:0,unMapped:0}),h=(0,m.Z)(f,2),y=h[0],x=h[1],b=(0,r.useState)(null),Z=(0,m.Z)(b,2),j=Z[0],S=Z[1],C=(0,r.useState)(),A=(0,m.Z)(C,2),E=A[0],w=A[1],I=(0,W.Pi)().data.attributes,R=I.role,k=I.eventRole,L=(0,g.eN)({variables:{names:["enable_topic"]},context:{headers:{"X-Location-Uuid":o}},notifyOnNetworkStatusChange:!0,fetchPolicy:"cache-and-network",onCompleted:function(e){return w(e.bulkFetchLocationConfigsByName.reduce((function(e,t){var n=t.configName,a=t.configValue;return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},n,"true"===a.value))}),{}))}}).loading,z=(0,g.tX)({variables:{uuid:o},notifyOnNetworkStatusChange:!0,fetchPolicy:"cache-and-network",onError:function(){(0,Je.Eo)(s(as.genericError))},onCompleted:function(e){var t=e.getEventLocation;return S(t)}}).loading,D=function(e,t){return(0,d.jsxs)(Ht.J$,{children:[s(e)," \xb7 ",t]})};return(0,d.jsxs)(d.Fragment,{children:[(L||z)&&(0,d.jsx)(v.A,{}),null!==E&&void 0!==E&&E.enable_topic?(0,d.jsxs)(Ht.mQ,{overrides:ts,onChange:function(e){var t=e.activeKey;p(t)},activeKey:c,children:[(0,d.jsx)(Ht.OK,{title:D(as.Mapped,y.mapped),overrides:(0,Ht.i$)(ns),children:(0,d.jsx)(_o,{id:n,refresh:a,setTotalCount:x,setDefaultSelections:i,searchTerm:t,mappingsCount:y})}),(is.has(R)||k&&is.has(k))&&(0,d.jsx)(Ht.OK,{title:D(as.Unmapped,y.unMapped),overrides:(0,Ht.i$)(ns),children:(0,d.jsx)(es,{id:n,refresh:a,setTotalCount:x,setDefaultSelections:i,searchTerm:t,mappingsCount:y})})]}):!z&&(0,d.jsx)(Qo,{children:(0,d.jsx)(Wo,{children:s(as.disableMessageError,{eventSubType:(null===j||void 0===j?void 0:j.subType)===H.tw.Emeet?"instance":"event",supportEmail:null===j||void 0===j?void 0:j.supportEmail})})})]})},os=(0,S.vU)({title:{id:"bFjJ+K",defaultMessage:[{type:0,value:"Topics for"}]},search:{id:"8UY/bP",defaultMessage:[{type:0,value:"Topics Search"}]},success:{id:"AqDViG",defaultMessage:[{type:0,value:"Saved Successfully."}]},noCampaignsListed:{id:"7Ma/PI",defaultMessage:[{type:0,value:"No topics to show as you are not mapped to any campaigns yet."}]},genericError:{id:"a8QLOG",defaultMessage:[{type:0,value:"Error Saving."}]}}),ss=function(e){var t=e.onNavigate,n=we().campaign,a=(0,Pt.y)(),i=f().id,o=(0,r.useState)(0),l=(0,m.Z)(o,2),u=l[0],c=l[1],p=(0,r.useState)(!1),g=(0,m.Z)(p,2),h=g[0],y=g[1],x=(0,r.useState)(""),b=(0,m.Z)(x,2),S=b[0],C=b[1],A=new URLSearchParams(window.location.search).get("location"),E=(0,r.useState)({mapped:{},unMapped:{}}),w=(0,m.Z)(E,2),I=w[0],R=w[1],k=za(),L=(0,Da.x)()(),z=Ro(),D=z.setPageNumber,B=z.isAllSelected,O=z.isMappedUuidListEmpty,U=z.mappedUuidList,P=z.selections,N=z.clearAll,F=Do(),W=F.setPageNumber,H=F.isAllSelected,$=F.isUnMappedUuidListEmpty,q=F.unMappedUuidList,J=F.selections,K=F.clearAll,V=(0,M.Z)().formatMessage,X=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){var t,a,r,o,l,u;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),t={},a={},U().forEach((function(e){var n,a;t[e]={mapTo:null!==(n=null===(a=P()[e])||void 0===a?void 0:a.mapTo)&&void 0!==n?n:I.mapped[e].mapTo}})),q().forEach((function(e){var t,n;a[e]={mapTo:null!==(t=null===(n=J()[e])||void 0===n?void 0:n.mapTo)&&void 0!==t?t:I.unMapped[e].mapTo}})),o=(r=function(e){return Object.entries(e).map((function(e){return{mappingEntityUuid:e[0],mappingAttributes:e[1]}}))})(t),l=r(a),u=(0,T.Z)((0,T.Z)((0,T.Z)({},void 0!==B().mapTo&&{mapped:{selectAll:{mapTo:B().mapTo}}}),void 0!==H().mapTo&&{unmapped:{selectAll:{mapTo:H().mapTo}}}),{},{mappings:[].concat((0,Q.Z)(o),(0,Q.Z)(l))}),e.prev=9,e.next=12,(0,s.putUserEngagementsMapping)({client:L,id:i,mappingType:"TopicMapping",subSystem:null===n||void 0===n?void 0:n.eventName,payload:u,locationId:null===n||void 0===n?void 0:n.location,searchTerm:S});case 12:return N(),K(),y(!1),(0,Je.XA)(V(os.success)),D(1),W(1),c((function(e){return e+1})),e.abrupt("return",void 0);case 22:return e.prev=22,e.t0=e.catch(9),y(!1),(0,Je.Eo)(V(os.genericError)),e.abrupt("return",e.t0);case 27:case"end":return e.stop()}}),e,null,[[9,22]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:void 0===e.sent&&(null===t||void 0===t||t());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=$()&&O()&&void 0===B().mapTo&&void 0===H().mapTo;return Nt({isDirty:!te,onSave:X}),(0,r.useEffect)((function(){a(!te)}),[te,a]),(0,d.jsxs)(d.Fragment,{children:[h&&(0,d.jsx)(v.A,{}),(0,d.jsxs)(_,{children:[(0,d.jsx)(Ye,{}),(0,d.jsx)(ee,{children:(0,d.jsxs)(Bo,{children:[(0,d.jsxs)(Uo,{children:[(0,d.jsxs)(Po,{children:[(0,d.jsx)(Ot,{title:V(os.title)}),(0,d.jsx)(me,{$location:!!A,children:(0,d.jsx)(Fe,{eventType:k})})]}),(0,d.jsx)(Oo,{children:(0,d.jsx)(pt.II,{type:"search",value:S,IconAfter:He.olm,onChange:function(e){return C(e.target.value)},placeholder:V(os.search)})})]}),null!==n&&void 0!==n&&n.location?(0,d.jsx)(rs,{search:S,userId:i,refresh:u,setDefaultSelections:R,currentLocationUuid:n.location}):(0,d.jsx)(pe,{children:(0,d.jsx)(fe,{children:null===n?(0,d.jsx)(st,{}):V(os.noCampaignsListed)})})]})}),(Object.keys(I.mapped).length||Object.keys(I.unMapped).length)&&(0,d.jsx)(Fo,{children:(0,d.jsx)(We,{onSave:Y,onSaveAndNext:G,isDisabled:te,onDiscard:function(){N(),K()},pendoPrefix:"profile/campaign/topics"})})]})]})},ls=function(e){var t=e.onNavigate;return(0,d.jsx)(zo,{children:(0,d.jsx)(Io,{children:(0,d.jsx)(Ee,{children:(0,d.jsx)(ss,{onNavigate:t})})})})},us=(0,X.zo)("div",{display:"flex"}),ds=(0,X.zo)(G.N,{width:"100%"}),cs=(0,X.zo)("div",{display:"flex",justifyContent:"center",maxHeight:"324px",minHeight:"90px"}),ps=(0,X.zo)("p",(function(e){var t=e.$theme,n=t.typography,a=t.colors;return(0,T.Z)((0,T.Z)({},n.font250),{},{color:a.mono800,display:"flex",alignItems:"center",marginTop:0,marginBottom:0})})),fs={Popover:{props:{popperOptions:{modifiers:{preventOverflow:{boundariesElement:"window"}}}}}},ms={BaseButton:{style:function(e){return{marginLeft:e.$theme.sizing.scale600}}}},gs={BaseButton:{style:function(e){var t=e.$theme,n=t.sizing,a=t.colors;return{backgroundColor:a.white,paddingTop:n.scale100,paddingRight:n.scale100,paddingBottom:n.scale100,paddingLeft:n.scale100,marginTop:n.scale0,marginLeft:n.scale400,color:a.primary,":hover":{backgroundColor:"none"},":focus":{backgroundColor:"none",outline:"none"}}}}},vs=(0,S.vU)({selectTimezone:{id:"XwijCn",defaultMessage:[{type:0,value:"Select city name"}]},noResultsMsg:{id:"xPqWuJ",defaultMessage:[{type:0,value:"Please enter 3 or more characters to search"}]}}),hs=function(e){var t,n,a=(0,M.Z)().formatMessage,i=(0,r.useState)([]),o=(0,m.Z)(i,2),l=o[0],u=o[1],c=(0,r.useState)(""),p=(0,m.Z)(c,2),f=p[0],g=p[1],v=(0,zt.N)(f),h=(0,s.useEventCities)(),y=h.isPending,x=h.run,b=h.data,Z=(b=void 0===b?{}:b).data,j=void 0===Z?[]:Z;return(0,r.useEffect)((function(){!v||v.length<3||x({search:v})}),[v,x]),(0,d.jsx)(ds,{children:(0,d.jsx)(J.Ph,{searchable:!0,overrides:fs,clearable:!0,value:l,options:j,disabled:null!==(t=e.disabled)&&void 0!==t&&t,backspaceClearsInputValue:!0,isLoading:y,placeholder:null!==(n=e.placeholder)&&void 0!==n?n:a(vs.selectTimezone),noResultsMsg:a(vs.noResultsMsg),filterOptions:function(e){return e.map((function(e){return{label:e.description,id:e.placeId}}))},onInputChange:function(e){return g(e.target.value.trim())},onChange:function(t){var n,a=t.value;u(a),e.onChange(null===(n=a[0])||void 0===n?void 0:n.id)}})})},ys=function(){var e=(0,r.useState)(null),t=(0,m.Z)(e,2),n=t[0],a=t[1],i=(0,s.useEventCityTimeZone)({onResolve:function(e){var t=e.data.timeZoneId,n=q.ou.local().setZone(t),i=n.offsetNameShort,r=n.offsetNameLong;a({timeZoneId:t,timeZoneName:"".concat(i," | ").concat(r)})}}),o=i.isPending,l=i.run;return{isPending:o,cityTimeZone:n,onCityChange:function(e){e?l({placeId:e}):a(null)}}},xs=["timeZone","setTimeZone"],bs=(0,S.vU)({successTimeZoneChange:{id:"qE8KR4",defaultMessage:[{type:0,value:"Time zone changed successfully"}]},failureTimeZoneChange:{id:"a8pRXa",defaultMessage:[{type:0,value:"Time zone is not changed"}]}}),Zs=function(e){e.timeZone;var t=e.setTimeZone,n=(0,F.Z)(e,xs),a=(0,M.Z)().formatMessage,i=ys(),r=i.isPending,o=i.cityTimeZone,s=i.onCityChange;return(0,d.jsxs)(Aa.u_,(0,T.Z)((0,T.Z)({},n),{},{size:Aa.NO.small,autoFocus:!1,children:[(0,d.jsx)(Aa.xB,{children:(0,d.jsx)($.Z,{id:"Pu0Vle",defaultMessage:[{type:0,value:"Select city to change time zone"}]})}),(0,d.jsx)(Aa.fe,{children:(0,d.jsx)(cs,{children:(0,d.jsx)(hs,{onChange:s})})}),(0,d.jsxs)(Aa.mz,{children:[(0,d.jsx)(Aa.mH,{kind:Y.TO.secondary,onClick:n.onClose,overrides:ms,children:(0,d.jsx)($.Z,{id:"PyxZY2",defaultMessage:[{type:0,value:"Cancel"}]})}),(0,d.jsx)(Aa.mH,{kind:Y.TO.primary,onClick:function(){n.onClose(),Promise.resolve(t(o)).then((function(){return(0,Je.XA)(a(bs.successTimeZoneChange))})).catch((function(){return(0,Je.Eo)(a(bs.failureTimeZoneChange))}))},overrides:ms,disabled:!o||r,children:(0,d.jsx)($.Z,{id:"UaVu03",defaultMessage:[{type:0,value:"Confirm"}]})})]})]}))},js=["canChangeTimeZone"],Ss=function(e){var t=e.canChangeTimeZone,n=void 0===t||t,a=(0,F.Z)(e,js),i=(0,r.useState)(!1),o=(0,m.Z)(i,2),s=o[0],l=o[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(us,{children:[(0,d.jsx)(ps,{children:a.timeZone.timeZoneName}),n&&(0,d.jsx)(Y.zx,{type:"button",onClick:function(){return l(!0)},overrides:gs,kind:Y.TO.minimal,children:(0,d.jsx)($.Z,{id:"uQwqZB",defaultMessage:[{type:0,value:"Change"}]})})]}),s&&(0,d.jsx)(Zs,(0,T.Z)((0,T.Z)({},a),{},{isOpen:s,onClose:function(){return l(!1)}}))]})},Ms=function(e){var t=e.title,n=b().location||{},a=n.startDate,i=n.endDate;return(0,d.jsxs)(be,{children:[t,"\xa0",(0,d.jsx)(Ze,{children:a&&i&&(0,Bt._Q)((0,Bt.w)(a),(0,Bt.w)(i))})]})};!function(e){e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e[e.Sunday=7]="Sunday"}(gr||(gr={}));var Cs="2024-01-01",Ts="".concat(Cs,"T00:00:00Z"),As=q.ou.fromISO(Ts),Es=function(e){return q.ou.fromISO(e).toJSDate()},ws=function(e){return As.toUTC().plus(e).toISO()},Is=function(e){var t=q.ou.fromISO(e),n=t.minute;return 60*t.hour+n},Rs=function(e){var t=q.ou.fromISO(e).toUTC(),n=t.minute;return 60*t.hour+n},ks=function(e,t){return q.ou.fromISO(e).setZone(t).setZone("local",{keepLocalTime:!0})},Ls=function(e,t){return q.ou.fromISO(e).setZone(t,{keepLocalTime:!0}).toUTC()},zs=function(e){return q.ou.fromISO(e).toUTC(0,{keepLocalTime:!0}).toISO()},Ds=function(e,t){return q.ou.fromISO(e).plus(t).toISO()},Bs=function(e,t){return q.ou.fromISO(e).plus(t).toISODate()},Os=function(e){return q.ou.fromISO(e).startOf("day").toISO()},Us=function(e){return q.ou.fromJSDate(e).toISO()},Ps=function(e){return q.ou.fromJSDate(e).toISODate()},Ns=function(e){return q.ou.fromISO(e).toFormat("hh:mm a")},Fs=function(e,t){return q.ou.fromISO(t).diff(q.ou.fromISO(e),"day")},Qs=function(e){return q.ou.fromISO(e).toISOTime()},Ws=function(e){return q.ou.fromJSDate(e).toISOTime()},Hs=function(e,t){return"".concat(q.ou.fromISO(Cs).plus({day:e-1}).toISODate(),"T").concat(t)},$s=function(e){return q.ou.fromISO("".concat(q.ou.fromISO(e).toISODate(),"T24:00:00")).toISO()},qs=function(e){return"".concat(q.ou.fromISO(e).toISODate(),"T24:00:00Z")},Js=function(e){return q.ou.fromISO("".concat(Cs,"T").concat(e)).toISO()},Ks=Object.values(gr).filter((function(e){return"number"===typeof e})).reduce((function(e,t){return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},t,[]))}),{});function Vs(e){return e.sort((function(e,t){return e.start>=t.start?1:-1})).reduce((function(e,t){var n=e.pop();return n?n.end===t.start?[].concat((0,Q.Z)(e),[{start:n.start,end:t.end}]):[].concat((0,Q.Z)(e),[n,t]):[].concat((0,Q.Z)(e),[t])}),[])}var Xs=function(e,t){var n=e.map((function(e,t){var n=e.day,a=e.timeRanges;return{day:n,date:ws({days:t}),timeRanges:a.map((function(e){var n=e.start,a=e.end;return{start:ws({days:t,minutes:n}),end:ws({days:t,minutes:a})}}))}})).flatMap((function(e){return e.timeRanges.flatMap((function(e){var n=ks(e.start,t),a=ks(e.end,t),i=n.toISO(),r=a.toISO();return n.toISODate()===a.toISODate()?{start:i,end:r}:[{start:i,end:$s(i)},{start:a.startOf("day").toISO(),end:r}]}))})).reduce((function(e,t){var n,a=t.start,i=t.end,r=q.ou.fromISO(a).weekday;return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},r,[].concat((0,Q.Z)(null!==(n=e[r])&&void 0!==n?n:[]),(0,Q.Z)(a===i?[]:[{start:Qs(a),end:Qs(i)}]))))}),Ks);return Object.keys(n).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return{weekDay:Number(e),day:gr[Number(e)],timeRanges:Vs(n[e])}}))},Gs=function(e,t){var n=e.map((function(e){var t=e.day,n=e.weekDay,a=e.timeRanges;return{day:t,weekDay:n,timeRanges:a.map((function(e){var t=e.start,a=e.end;return{start:Hs(n,t),end:Hs(n,a)}}))}})).flatMap((function(e){return e.timeRanges.flatMap((function(e){var n=0===Is(e.end)?Ds(e.end,{day:1}):e.end,a=Ls(e.start,t),i=Ls(n,t),r=a.toISO(),o=i.toISO();return a.toISODate()===i.toISODate()||0===i.hour&&0===i.minute?{start:r,end:o}:[{start:r,end:zs(a.toISODate())},{start:i.startOf("day").toISO(),end:o}]}))})).reduce((function(e,t){var n,a=t.start,i=t.end,r=q.ou.fromISO(a).toUTC().weekday,o=Rs(a),s=Rs(i);return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},r,[].concat((0,Q.Z)(null!==(n=e[r])&&void 0!==n?n:[]),(0,Q.Z)(o===s&&0!==s?[]:[{start:o,end:s||1440}]))))}),Ks);return Object.keys(n).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return{day:gr[Number(e)],timeRanges:Vs(n[e])}}))},Ys=(0,r.createContext)(void 0),_s=function(e){var t=e.children,n=e.timeZoneId,a=e.userId,i=function(e){var t=(0,r.useState)(!1),n=(0,m.Z)(t,2),a=n[0],i=n[1],o=(0,r.useState)({}),s=(0,m.Z)(o,2),l=s[0],u=s[1],d=(0,r.useState)([]),c=(0,m.Z)(d,2),p=c[0],f=c[1],g=(0,r.useState)([]),v=(0,m.Z)(g,2),h=v[0],y=v[1],x=(0,r.useState)([]),b=(0,m.Z)(x,2),Z=b[0],j=b[1],S=(0,r.useRef)(!0);return(0,r.useEffect)((function(){S.current&&h.length&&f(Gs(h,e)),S.current=!0}),[h]),(0,r.useEffect)((function(){i(JSON.stringify(h)!==JSON.stringify(Z))}),[h,Z]),(0,r.useEffect)((function(){p.length&&(S.current=!1,y(Xs(p,e)))}),[e]),{isDirty:a,daysToIdMappings:l,setDaysToIdMappings:u,UTCAvailability:p,setUTCAvailability:f,availability:h,setAvailability:y,resetAvailability:function(){y(Z),i(!1),S.current=!1},setDefaultAvailability:j}}(n),o=i.isDirty,u=i.availability,c=i.setAvailability,p=i.UTCAvailability,f=i.setUTCAvailability,g=i.daysToIdMappings,h=i.setDaysToIdMappings,y=i.resetAvailability,x=i.setDefaultAvailability,b=(0,s.useUserAvailability)({id:a,onResolve:function(e){var t=e.data,a=t.map((function(e){var t=e.attributes;return(0,T.Z)({},t)})).sort((function(e,t){return gr[e.day]-gr[t.day]})),i=Xs(a,n);c(i),x(i),f(a),h(t.reduce((function(e,t){return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},t.attributes.day,t.id))}),{}))}}),Z=b.isPending,j=b.error,S=b.reload,M=(0,r.useMemo)((function(){return{isDirty:o,availability:u,setAvailability:c,UTCAvailability:p,setUTCAvailability:f,daysToIdMappings:g,resetAvailability:y,setDefaultAvailability:x}}),[o,u,c,p,f,g,y,x]);return j?(0,d.jsx)(l.m,{onButtonClick:S}):(0,d.jsxs)(d.Fragment,{children:[!u.length&&Z&&(0,d.jsx)(v.A,{}),0!==u.length&&(0,d.jsx)(Ys.Provider,{value:M,children:t})]})},el=function(){var e=(0,r.useContext)(Ys);return e},tl=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{height:t.scale1600,display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:t.scale600,position:"sticky",left:0,bottom:0,backgroundColor:"white"}})),nl=(0,X.zo)(Y.zx,(function(e){var t=e.$theme.sizing;return{width:"99px",height:t.scale900,marginRight:t.scale300}})),al=(0,S.vU)({confirmationHeader:{id:"penBJD",defaultMessage:[{type:0,value:"Unsaved Changes"}]},confirmationMessage:{id:"bu9gFH",defaultMessage:[{type:0,value:"You have unsaved changes, would you like to save and continue?"}]},cancelButtonLabel:{id:"qFwf8L",defaultMessage:[{type:0,value:"Discard"}]},successButtonLabel:{id:"R1HYj0",defaultMessage:[{type:0,value:"Save"}]}}),il=function(e){var t=(0,M.Z)().formatMessage,n=(0,r.useState)(!1),a=(0,m.Z)(n,2),i=a[0],o=a[1],s=function(){var t;o(!1),null===(t=e.handleDiscard)||void 0===t||t.call(e)};return(0,d.jsxs)(d.Fragment,{children:[i&&(0,d.jsx)(C.U,{onClose:s,onCancel:s,onSuccess:function(){return o(!1)},heading:t(al.confirmationHeader),message:t(al.confirmationMessage),cancelLabel:t(al.cancelButtonLabel),successLabel:t(al.successButtonLabel)}),(0,d.jsx)(nl,{type:"button",kind:Y.TO.tertiary,onClick:function(){return o(!0)},disabled:e.isDisabled,"data-pendo":"".concat(e.pendoPrefix,"/cancel"),children:(0,d.jsx)($.Z,{id:"PyxZY2",defaultMessage:[{type:0,value:"Cancel"}]})})]})},rl=(0,S.vU)({confirmationHeader:{id:"riq0LF",defaultMessage:[{type:0,value:"Confirmation"}]},confirmationMessage:{id:"SWPWW3",defaultMessage:[{type:0,value:"Changes in availability will only reflect for future meetings and not for already scheduled meetings."}]},cancelButtonLabel:{id:"PyxZY2",defaultMessage:[{type:0,value:"Cancel"}]},successButtonLabel:{id:"p8ccgM",defaultMessage:[{type:0,value:"OK"}]}}),ol=function(e){var t=e.isDirty,n=e.isDisabled,a=e.pendoPrefix,i=e.onSave,o=e.clearTempActiveKey,s=(0,M.Z)().formatMessage,l=(0,r.useState)(!1),u=(0,m.Z)(l,2),c=u[0],p=u[1],f=function(){return p(!1)};return Nt({isDirty:t,onSave:function(){return p(!0),!0}}),(0,d.jsxs)(d.Fragment,{children:[c&&(0,d.jsx)(C.U,{onClose:f,onCancel:f,onSuccess:function(){return p(!1),i()},heading:s(rl.confirmationHeader),message:s(rl.confirmationMessage),cancelLabel:s(rl.cancelButtonLabel),successLabel:s(rl.successButtonLabel)}),(0,d.jsx)(nl,{type:"submit",onClick:function(){p(!0),o()},disabled:n,"data-pendo":"".concat(a,"/save"),children:(0,d.jsx)($.Z,{id:"R1HYj0",defaultMessage:[{type:0,value:"Save"}]})})]})},sl=function(e){return(0,d.jsxs)(tl,{children:[(0,d.jsx)(il,{isDisabled:e.isDisabled,pendoPrefix:e.pendoPrefix,handleDiscard:e.handleDiscard}),(0,d.jsx)(ol,(0,T.Z)({},e))]})},ll=n(48641),ul=function(e){var t=e.availability,n=e.setAvailability,a=e.check;n(t.map((function(e){return a(e)?(0,T.Z)((0,T.Z)({},e),{},{timeRanges:[]}):e})))},dl=(0,S.vU)({overlapError:{id:"Og5lB4",defaultMessage:[{type:0,value:"Time overlap"}]},endTimeLessThanStartTime:{id:"edYSJU",defaultMessage:[{type:0,value:"Choose an end time later than start time."}]}}),cl=function(e){var t,n=e.availability,a=e.setAvailability,i=e.timeRanges,r=e.check,o=e.getStartOfDay,s=e.getNextSlot,l=null===(t=i[i.length-1])||void 0===t?void 0:t.end,u=l?s(l):Ds(o(),{hour:9}),d=23===q.ou.fromISO(u).hour?$s(u):l?Ds(u,{hour:1}):Ds(o(),{hour:17});a(n.map((function(e){return r(e)?(0,T.Z)((0,T.Z)({},e),{},{timeRanges:[].concat((0,Q.Z)(e.timeRanges),[{start:Qs(u),end:Qs(d)}])}):e})))},pl=function(e){var t=e.setAvailability,n=e.check,a=e.formatMessage;t((function(e){return e.map((function(e){return n(e)?(0,T.Z)((0,T.Z)({},e),{},{timeRanges:e.timeRanges.some((function(e){var t=e.start,n=e.end;return(0===Is(n)?q.ou.fromISO(n).endOf("day").toISOTime():n)<=t}))?e.timeRanges:e.timeRanges.map((function(t,n){var i=t.start,r=t.end,o=0===Is(r)?q.ou.fromISO(r).endOf("day").toISOTime():r,s=e.timeRanges.filter((function(e,t){return t!==n})).some((function(e){var t=e.start,n=e.end,a=0===Is(n)?q.ou.fromISO(n).endOf("day").toISOTime():n;return t<o&&a>i}));return(0,T.Z)({start:i,end:r},s?{error:a(dl.overlapError)}:null)}))}):e}))}))},fl=function(e){var t=e.availability,n=e.setAvailability,a=e.check,i=e.formatMessage,r=e.indexToDelete;n(t.map((function(e){return a(e)?(0,T.Z)((0,T.Z)({},e),{},{timeRanges:e.timeRanges.filter((function(e,t){return t!==r}))}):e}))),pl({setAvailability:n,check:a,formatMessage:i})},ml={BaseButton:{style:function(e){return{backgroundColor:e.$theme.colors.white,borderLeftStyle:"none",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderTopRightRadius:"none",borderBottomRightRadius:"none",borderTopLeftRadius:"none",borderBottomLeftRadius:"none"}}}},gl=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",height:"calc(100vh - 350px)",overflow:"scroll"},t.medium,{height:"calc(100vh - 300px)"})})),vl=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.colors,i=t.mediaQuery,r=e.$isEmpty;return(0,V.Z)({paddingTop:n.scale600,paddingRight:n.scale600,paddingLeft:n.scale600,paddingBottom:r?n.scale600:n.scale300,borderBottom:"1px solid ".concat(a.mono400)},i.medium,{paddingTop:n.scale300,paddingRight:n.scale800,paddingLeft:n.scale800,paddingBottom:r?n.scale300:0})})),hl=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.colors,i=t.sizing,r=t.mediaQuery;return(0,T.Z)((0,T.Z)({},n.Subtitle1),{},(0,V.Z)({color:a.mono800,minWidth:"100px",paddingRight:i.scale300,display:"none"},r.medium,{display:"block"}))})),yl=(0,X.w1)(hl,(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"block"},t.medium,{display:"none"})})),xl=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column-reverse",justifyContent:"space-between"},t.medium,{flexDirection:"row"})})),bl=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing,i=e.$isEmpty;return(0,V.Z)({display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:i?0:a.scale600},n.medium,{display:"block",marginBottom:0})})),Zl=(0,X.zo)("div",{width:"100px",display:"flex",justifyContent:"space-between",marginLeft:"auto",alignItems:"flex-start"}),jl=(0,X.zo)("div",{display:"flex",flexWrap:"wrap"}),Sl=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{marginRight:t.scale700,marginBottom:t.scale300}})),Ml=(0,X.zo)("div",(function(e){return{display:"flex",marginBottom:e.$theme.sizing.scale700}})),Cl=(0,X.zo)("div",{display:"flex",flexWrap:"wrap",alignItems:"center"}),Tl=(0,S.vU)({overlapError:{id:"Og5lB4",defaultMessage:[{type:0,value:"Time overlap"}]},endTimeLessThanStartTime:{id:"edYSJU",defaultMessage:[{type:0,value:"Choose an end time later than start time."}]}}),Al=function(e){var t=e.dayAvailability,n=e.onCopySlots,a=(0,M.Z)().formatMessage,i=el(),r=i.availability,o=i.setAvailability,s=t.day,l=t.weekDay,u=t.timeRanges,c=!!u.length&&0===q.ou.fromISO(u[u.length-1].end).hour,p=function(e){return e.weekDay===l},f=function(){return function(e){return q.ou.fromISO(Cs).plus({day:e-1}).startOf("day").toISO()}(l)},m=function(e){return Hs(l,e)},g=function(){pl({setAvailability:o,formatMessage:a,check:p})},v=!u.length;return(0,d.jsx)(vl,{$isEmpty:v,children:(0,d.jsxs)(xl,{children:[(0,d.jsxs)(Cl,{children:[(0,d.jsx)(hl,{children:a(na.c1[s])}),(0,d.jsx)(jl,{children:u.map((function(e,t){var n=e.start,i=e.end,s=e.error;return(0,d.jsx)(Sl,{children:(0,d.jsx)(ll.S,{start:Hs(l,n),end:Hs(l,i),error:s,onDelete:function(){fl({availability:r,setAvailability:o,check:p,formatMessage:a,indexToDelete:t})},onStartChange:function(e){return function(e,t){var n=q.ou.fromJSDate(e),a=function(e,t){var a;return 0===Is(n.toISO())?e:n.toMillis()>=q.ou.fromISO(Hs(l,null===(a=u.find((function(e,n){return n===t})))||void 0===a?void 0:a.end)).toMillis()?Ws(23===n.hour?q.ou.fromISO("".concat(n.toISODate(),"T24:00:00")).toJSDate():n.plus({hour:1}).toJSDate()):e};o(r.map((function(n){return n.weekDay===l?(0,T.Z)((0,T.Z)({},n),{},{timeRanges:n.timeRanges.map((function(n,i){return i===t?{start:Ws(e),end:a(n.end,i)}:n}))}):n}))),g()}(e,t)},onEndChange:function(e){return function(e,t){o(r.map((function(n){return n.weekDay===l?(0,T.Z)((0,T.Z)({},n),{},{timeRanges:n.timeRanges.map((function(n,i){if(i!==t)return n;var r=0===Is(e.toISOString()),o=r?Qs($s(e.toISOString())):Ws(e);return(0,T.Z)((0,T.Z)({start:n.start},!r&&o<=n.start?{error:a(Tl.endTimeLessThanStartTime)}:null),{},{end:o})}))}):n}))),g()}(e,t)}})},"".concat(t,"-").concat(n,"-").concat(i))}))})]}),(0,d.jsxs)(bl,{$isEmpty:v,children:[(0,d.jsx)(yl,{children:a(na.c1[s])}),(0,d.jsxs)(Zl,{"data-pendo":"profile/availability/".concat(s,"-action-container"),children:[(0,d.jsx)(Y.hU,{size:20,overrides:ml,disabled:c,onClick:function(){cl({availability:r,setAvailability:o,check:p,timeRanges:u,getNextSlot:m,getStartOfDay:f})},"data-pendo":"profile/availability/add",children:(0,d.jsx)(He.mm_,{size:20})}),(0,d.jsx)(Y.hU,{size:20,overrides:ml,disabled:!u.length,onClick:function(){return n(l)},"data-pendo":"profile/availability/copy",children:(0,d.jsx)(He.KK1,{})}),(0,d.jsx)(Y.hU,{size:20,disabled:!u.length,overrides:ml,onClick:function(){ul({availability:r,setAvailability:o,check:p})},"data-pendo":"profile/availability/delete",children:(0,d.jsx)(He.rFk,{})})]})]})]})},s)},El=(0,X.w1)(te,(function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing;return(0,V.Z)({},n.medium,{paddingBottom:0,paddingTop:a.scale700})})),wl=(0,X.zo)("div",(function(e){return{display:"flex",flexDirection:"column",justifyContent:"space-evenly",marginTop:e.$theme.sizing.scale400}})),Il=(0,X.zo)("span",(function(e){var t=e.$theme,n=t.colors,a=t.sizing,i=t.typography;return(0,T.Z)((0,T.Z)({},i.Caption1),{},{color:n.mono700,marginTop:a.scale200})})),Rl={Root:{style:function(e){return{marginTop:e.$theme.sizing.scale600}}},TabList:{style:function(e){return{height:e.$theme.sizing.scale1000}}},TabBorder:{style:{display:"none"}}},kl={TabPanel:{style:function(e){var t=e.$theme,n=t.sizing,a=t.colors;return{borderTopWidth:"1px",borderRightWidth:"1px",borderBottomWidth:"1px",borderLeftWidth:"1px",borderTopColor:a.mono400,borderRightColor:a.mono400,borderBottomColor:a.mono400,borderLeftColor:a.mono400,borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderBottomLeftRadius:n.scale100,borderBottomRightRadius:n.scale100,borderTopRightRadius:n.scale100,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,marginTop:"5px"}}}},Ll={BaseButton:{style:function(e){return{marginLeft:e.$theme.sizing.scale600,width:"99px"}}}},zl=function(e){var t=(0,M.Z)().formatMessage,n=(0,r.useState)(!1),a=(0,m.Z)(n,2),i=a[0],o=a[1],s=e.weekDay;return(0,d.jsx)(Ml,{children:(0,d.jsx)($e.XZ,{checked:i,onChange:function(){o(!i),e.addCopyDestinationDays(s)},children:t(na.c1[gr[s]])})})},Dl=["sourceWeekDay","availabilityInTZ","setAvailabilityInTZ"],Bl=function(e){var t=(0,M.Z)().formatMessage,n=e.sourceWeekDay,a=e.availabilityInTZ,i=e.setAvailabilityInTZ,o=(0,F.Z)(e,Dl),s=(0,r.useState)([]),l=(0,m.Z)(s,2),u=l[0],c=l[1],p=function(e){c([].concat((0,Q.Z)(u),[e]))};return(0,d.jsxs)(Aa.u_,(0,T.Z)((0,T.Z)({},o),{},{children:[(0,d.jsx)(Aa.xB,{children:(0,d.jsx)($.Z,{id:"0P7tHK",defaultMessage:[{type:0,value:"Copy availability of "},{type:1,value:"day"},{type:0,value:" to"}],values:{day:t(na.c1[gr[n]])}})}),(0,d.jsx)(Aa.fe,{children:(0,d.jsx)(wl,{children:null===a||void 0===a?void 0:a.filter((function(e){return e.weekDay!==n})).map((function(e,t){var n=e.weekDay;return(0,d.jsx)(zl,{weekDay:n,addCopyDestinationDays:p},t)}))})}),(0,d.jsxs)(Aa.mz,{children:[(0,d.jsx)(Aa.mH,{kind:Y.TO.tertiary,overrides:Ll,onClick:o.onClose,"data-pendo":"profile/availability/copy-cancel",children:(0,d.jsx)($.Z,{id:"PyxZY2",defaultMessage:[{type:0,value:"Cancel"}]})}),(0,d.jsx)(Aa.mH,{kind:Y.TO.primary,onClick:function(){if(n){var e=a.find((function(e){return e.weekDay===n})).timeRanges;i(a.map((function(t){return u.includes(t.weekDay)?(0,T.Z)((0,T.Z)({},t),{},{timeRanges:e}):t}))),o.onClose(),c([])}},overrides:Ll,"data-pendo":"profile/availability/copy-ok",children:(0,d.jsx)($.Z,{id:"p8ccgM",defaultMessage:[{type:0,value:"OK"}]})})]})]}))},Ol=(0,S.vU)({success:{id:"2Kgv1B",defaultMessage:[{type:0,value:"Availabilities Saved Successfully."}]},genericError:{id:"63gNIe",defaultMessage:[{type:0,value:"Error Setting Availabilities."}]}}),Ul=function(e){var t=e.timeZone,n=e.onSuccess,a=e.clearTempActiveKey,i=(0,M.Z)().formatMessage,l=(0,Pt.y)(),u=(0,o.UO)().userId,c=(0,s.usePortalV2Client)(),p=(0,r.useState)(!1),f=(0,m.Z)(p,2),g=f[0],h=f[1],y=(0,r.useState)(!1),x=(0,m.Z)(y,2),b=x[0],S=x[1],C=el(),A=C.isDirty,E=C.availability,w=C.setAvailability,I=C.daysToIdMappings,R=C.resetAvailability,k=C.setDefaultAvailability,L=(0,r.useState)(null),z=(0,m.Z)(L,2),D=z[0],B=z[1],O=E.flatMap((function(e){return e.timeRanges})).some((function(e){return e.error})),U=function(e){h(!0),B(e)},P=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){var a;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(E.map((function(e){return(0,T.Z)((0,T.Z)({},e),{},{timeRanges:e.timeRanges.sort((function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}))})}))),S(!0),a={data:Gs(E,t.timeZoneId).map((function(e){return{id:I[e.day],timeRanges:e.timeRanges}}))},e.prev=3,e.next=6,(0,s.updateUserAvailability)(c,u,a);case 6:return k(E),S(!1),(0,Je.XA)(i(Ol.success)),n(),e.abrupt("return",void 0);case 13:return e.prev=13,e.t0=e.catch(3),S(!1),(0,Je.Eo)(i(Ol.genericError)),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){l(A)}),[A,l]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(gl,{children:null===E||void 0===E?void 0:E.map((function(e,t){return(0,d.jsx)(Al,{dayAvailability:e,onCopySlots:U},t)}))}),(0,d.jsx)(sl,{clearTempActiveKey:a,isDirty:A,onSave:P,isDisabled:b||!A||O,pendoPrefix:"profile/availability",handleDiscard:R}),g&&(0,d.jsx)(Bl,{isOpen:!0,sourceWeekDay:D,onClose:function(){return h(!1)},availabilityInTZ:E,setAvailabilityInTZ:w}),b&&(0,d.jsx)(v.A,{})]})},Pl=function(e){var t=e.height,n=(0,X.hQ)(),a=(0,m.Z)(n,2)[1],i={style:{width:"100%",height:"".concat(t)},width:"1000",height:"100",viewBox:"0 0 1000 100",speed:2,primaryColor:a.colors.mono200,secondaryColor:a.colors.mono300};return(0,d.jsx)(at.ZP,(0,T.Z)((0,T.Z)({},i),{},{children:(0,d.jsx)("rect",{y:"0",rx:1,ry:20,width:"1000",height:"100"})}))},Nl=(0,r.forwardRef)((function(e,t){var n=(0,X.hQ)(),a=(0,m.Z)(n,2)[1];return(0,r.useImperativeHandle)(t,(function(){return{getReactContainerStyle:function(){return{alignSelf:"flex-start",marginTop:a.sizing.scale600}}}})),(0,d.jsx)(it.Z,{flexGridColumnCount:1,overrides:{Block:{style:function(e){var t=e.$theme.sizing;return{marginTop:t.scale100,marginBottom:t.scale100}}}},children:Array.from({length:7}).map((function(e,t){return(0,d.jsx)(rt.ZP,{children:(0,d.jsx)(Pl,{height:64})},t)}))})})),Fl=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",height:"calc(62vh - 64px)",overflow:"scroll"},t.medium,{height:"calc(100vh - 300px)"})})),Ql=(0,X.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"500px"}),Wl=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.typography,i=t.colors;return(0,T.Z)((0,T.Z)({},a.Paragraph1),{},{marginTop:n.scale600,color:i.mono700})})),Hl=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing;return(0,V.Z)({display:"flex",flexDirection:"column",marginBottom:a.scale600},n.small,{flexDirection:"row",alignItems:"center",marginBottom:0})})),$l=(0,X.zo)("div",{display:"flex",minWidth:"204px"}),ql=(0,X.zo)("label",(function(e){var t=e.$theme,n=t.typography,a=t.sizing,i=t.colors,r=t.mediaQuery;return(0,T.Z)((0,T.Z)({},n.Paragraph2),{},(0,V.Z)({color:i.mono800,marginBottom:a.scale200,marginRight:a.scale600},r.small,{marginBottom:0}))})),Jl={BaseButton:{style:function(e){var t=e.$theme,n=t.sizing,a=t.colors;return{backgroundColor:a.white,paddingTop:n.scale100,paddingRight:n.scale100,paddingBottom:n.scale100,paddingLeft:n.scale100,marginTop:n.scale0,marginLeft:n.scale400,color:a.primary,":hover":{backgroundColor:"none"},":focus":{backgroundColor:"none",outline:"none"}}}}},Kl=n(2274),Vl={BaseButton:{style:function(e){return{paddingLeft:0,marginBottom:e.$theme.sizing.scale700}}}},Xl={BaseButton:{style:function(e){return{width:"100px",marginRight:e.$theme.sizing.scale300}}}},Gl={Root:{style:function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({zIndex:1},t.medium,{zIndex:"auto"})}}},Yl=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.colors,i=t.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",flexGrow:1,alignItems:"flex-start",paddingTop:n.scale800,paddingBottom:n.scale300,paddingLeft:n.scale1000,paddingRight:n.scale300,minWidth:"243px",borderLeft:"1px solid ".concat(a.mono400),borderBottom:"1px solid ".concat(a.mono400),maxHeight:"336px",overflow:"auto"},i.medium,{minHeight:"380px",maxHeight:"645px"})})),_l=(0,X.w1)(Aa.fe,(function(e){var t=e.$theme.colors;return{minHeight:"337px",maxHeight:"674px",overflowY:"hidden",borderTop:"1px solid ".concat(t.mono400),marginTop:0,marginLeft:0,marginRight:0,marginBottom:0}})),eu=(0,X.zo)("div",(function(){return{display:"flex",flexWrap:"wrap"}})),tu=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.colors,i=t.mediaQuery;return(0,V.Z)({minWidth:"377px",flexGrow:1,paddingTop:n.scale200,paddingBottom:n.scale200,paddingLeft:n.scale600,paddingRight:n.scale600,borderBottom:"1px solid ".concat(a.mono400)},i.medium,{flexGrow:0,minHeight:"380px"})})),nu=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.colors;return(0,T.Z)((0,T.Z)({},n.Paragraph1),{},{color:a.mono700})})),au=(0,X.zo)("div",(function(e){return{marginBottom:e.$theme.sizing.scale200}})),iu=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.sizing,i=t.mediaQuery;return(0,T.Z)((0,T.Z)({},n.HeadingXSmall),{},(0,V.Z)({marginRight:a.scale800,marginBottom:a.scale200},i.small,{marginBottom:0}))})),ru=(0,X.zo)("div",{minWidth:"180px",maxWidth:"180px",display:"none"}),ou=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.mediaQuery,a=t.sizing;return(0,V.Z)({display:"flex",flexDirection:"column",marginRight:a.scale600},n.medium,{flexDirection:"row",alignItems:"center",justifyContent:"space-between"})})),su=(0,X.zo)("div",(function(e){var t,n=e.$theme,a=n.mediaQuery;return t={display:"flex",flexDirection:"column",marginBottom:n.sizing.scale600},(0,V.Z)(t,a.small,{flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),(0,V.Z)(t,a.medium,{marginBottom:0}),t})),lu=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)({},t.Paragraph2)})),uu=(0,S.vU)({addSlots:{id:"AlalAS",defaultMessage:[{type:0,value:"Add available slots"}]},unavailable:{id:"JyXCpg",defaultMessage:[{type:0,value:"Unavailable"}]},hintText:{id:"9B4px2",defaultMessage:[{type:0,value:"Add new working time slots for the selected date(s)"}]},overlapError:{id:"Og5lB4",defaultMessage:[{type:0,value:"Time overlap"}]},endTimeLessThanStartTime:{id:"edYSJU",defaultMessage:[{type:0,value:"Choose an end time later than start time."}]}}),du=function(e,t){return(t||q.ou.local()).setZone(e).setZone("local",{keepLocalTime:!0}).toJSDate()},cu=function(e){var t=(0,M.Z)().formatMessage,n=we().campaign,a=el().availability,i=b().location||{},o=i.startDate,s=i.endDate,l=i.timeZone,u=!!o&&!!s&&!!l,c=e.calendarDates,p=e.timeSlots,f=e.setTimeSlots,g=e.setCalendarDates,v=e.timeZone,h=du(v.timeZoneId),y=u&&q.Xp.fromDateTimes(q.ou.fromISO(o),q.ou.fromISO(s).endOf("day")).contains(q.ou.local()),x=u?function(e,t,n,a){return{startDate:du(a,q.ou.fromISO(e).setZone(n,{keepLocalTime:!0})),endDate:du(a,q.ou.fromISO(t).endOf("day").setZone(n,{keepLocalTime:!0}))}}(o,s,l,v.timeZoneId):{},Z=x.startDate,j=x.endDate,S=c.length?[Es(c[0]),Es(c[c.length-1])]:u&&!y?[Z,Z]:[h,h],C=(0,r.useState)(S),A=(0,m.Z)(C,2),E=A[0],w=A[1],I=!!p.length&&0===q.ou.fromISO(p[p.length-1].timeSlot[1]).hour;(0,r.useEffect)((function(){var e=Array.from(new Set(E.map((function(e){return Ps(e)})))),t=e[0],n=e[1],a=2===e.length&&Fs(t,n).days;g(a?[t].concat((0,Q.Z)(Array.from({length:a-1},(function(e,n){return Bs(t,{day:n+1})}))),[n]):e)}),[E,g]),(0,r.useEffect)((function(){w(n?[Es(null===n||void 0===n?void 0:n.startDate),Es(null===n||void 0===n?void 0:n.endDate)]:S)}),[n]);var R=function(){f((function(e){return e.some((function(e){var t=(0,m.Z)(e.timeSlot,2),n=t[0];return t[1]<=n}))?e:e.map((function(n,a){var i=(0,m.Z)(n.timeSlot,2),r=i[0],o=i[1],s=e.filter((function(e,t){return t!==a})).some((function(e){var t=(0,m.Z)(e.timeSlot,2),n=t[0],a=t[1];return n<o&&a>r}));return(0,T.Z)({timeSlot:n.timeSlot},s?{error:t(uu.overlapError)}:null)}))}))},k=function(e,n){var a=0===Is(e.toISOString());f(p.map((function(i,r){if(r!==n)return i;var o=i.timeSlot[0],s=a?$s(e.toISOString()):"".concat(function(e){return q.ou.fromISO(e).toISODate()}(o),"T").concat(Ws(e));return(0,T.Z)({timeSlot:[o,s]},s<=o?{error:t(uu.endTimeLessThanStartTime)}:null)}))),R()};return(0,d.jsx)(_l,{children:(0,d.jsxs)(eu,{children:[(0,d.jsx)(tu,{children:(0,d.jsx)(Kl.f,{selectRange:!0,allowPartialRange:!0,minDate:Z,maxDate:j,value:E,onChange:function(t){if(1===t.length){var n,i,r,o,s=Ps(t[0]),l=null!==(n=null!==(i=null===(r=e.exceptions.find((function(e){return e.date===s})))||void 0===r?void 0:r.available)&&void 0!==i?i:null===(o=a.find((function(e){return e.weekDay===q.ou.fromJSDate(t[0]).weekday})))||void 0===o?void 0:o.timeRanges.map((function(e){var t=e.start,n=e.end;return["".concat(s,"T").concat(t),"".concat(s,"T").concat(n)]})))&&void 0!==n?n:[];f(l.map((function(e){return{timeSlot:e}})))}w(t)}})}),(0,d.jsxs)(Yl,{children:[(0,d.jsx)(lu,{children:t(uu.hintText)}),(0,d.jsx)(Y.Qj,{size:18,disabled:I,onClick:function(){var e=p.length?p[p.length-1].timeSlot[1]:Js("09:00:00"),t=q.ou.fromISO(e);f([].concat((0,Q.Z)(p),[{timeSlot:[e,23===t.hour?Js("24:00:00"):p.length?Ds(e,{hour:1}):Js("17:00:00")]}]))},startEnhancer:He.uc4,overrides:Vl,children:t(uu.addSlots)}),p.length?p.map((function(e,t){var n=(0,m.Z)(e.timeSlot,2),a=n[0],i=n[1],r=e.error;return(0,d.jsx)(au,{children:(0,d.jsx)(ll.S,{start:a,end:i,error:r,onStartChange:function(e){return function(e,t){var n=q.ou.fromJSDate(e);f(p.map((function(a,i){return i===t?{timeSlot:[Us(e),e.valueOf()>=Es(a.timeSlot[1]).valueOf()?23===n.hour?q.ou.fromISO("".concat(n.toISODate(),"T24:00:00")).toISO():Ds(n.toISO(),{hour:1}):a.timeSlot[1]]}:a}))),R()}(e,t)},onEndChange:function(e){return k(e,t)},onDelete:function(){return e=t,f(p.filter((function(t,n){return n!==e}))),void R();var e}})},"".concat(t,"-").concat(a,"-").concat(i))})):(0,d.jsx)(nu,{children:t(uu.unavailable)})]})]})})},pu=function(e){var t=e.onCancel,n=e.onDone,a=e.hasError;return(0,d.jsxs)(Aa.mz,{children:[(0,d.jsx)(Y.zx,{kind:Y.TO.tertiary,overrides:Xl,onClick:t,"data-pendo":"profile/add-exception/cancel",children:(0,d.jsx)($.Z,{id:"PyxZY2",defaultMessage:[{type:0,value:"Cancel"}]})}),(0,d.jsx)(Y.zx,{overrides:Xl,disabled:a,onClick:n,"data-pendo":"profile/add-exception/done",children:(0,d.jsx)($.Z,{id:"80339c",defaultMessage:[{type:0,value:"Done"}]})})]})},fu=["isOpen","onClose","exceptions","setExceptions","listedExceptionEditIndex","listedExceptions","timeZone"],mu=(0,S.vU)({addException:{id:"5vYwR1",defaultMessage:[{type:0,value:"Add Exception"}]},editException:{id:"CpDY2/",defaultMessage:[{type:0,value:"Edit Exception"}]},addExceptionEvent:{id:"NJnkwm",defaultMessage:[{type:0,value:"Add Exception for"}]},editExceptionEvent:{id:"5qigVP",defaultMessage:[{type:0,value:"Edit Exception for"}]},selectDateLabel:{id:"1vui55",defaultMessage:[{type:0,value:"Select Event dates for"}]},clear:{id:"Tol+/U",defaultMessage:[{type:0,value:"Clear"}]},timeZone:{id:"mFzzAv",defaultMessage:[{type:0,value:"Time zone"}]}}),gu=function(e){var t=e.isOpen,n=e.onClose,a=e.exceptions,i=e.setExceptions,o=e.listedExceptionEditIndex,s=e.listedExceptions,l=e.timeZone,u=(0,F.Z)(e,fu),c=(0,M.Z)().formatMessage,p=we().setCampaign,f=ys().onCityChange,g=(0,r.useState)([]),v=(0,m.Z)(g,2),h=v[0],y=v[1],x=(0,r.useState)([]),Z=(0,m.Z)(x,2),j=Z[0],S=Z[1],C=b().location;(0,r.useEffect)((function(){u.calendarDates&&u.timeSlots&&(y(u.calendarDates),S(u.timeSlots.map((function(e){return{timeSlot:e}}))))}),[u.calendarDates,u.timeSlots]);var A=void 0!==o&&o>=0,E=a.filter((function(e){return h.includes(e.date)})).reduce((function(e,t){return[].concat((0,Q.Z)(e),(0,Q.Z)(t.unavailable))}),[]),w=function(e){return j.map((function(t){var n=(0,m.Z)(t.timeSlot,2),a=n[0],i=n[1],r=0===Is(i);return["".concat(e,"T").concat(Qs(a)),"".concat(r?Bs(e,{day:1}):e,"T").concat(Qs(i))]}))},I=j.some((function(e){return!!e.error}));return(0,d.jsxs)(Aa.u_,{isOpen:t,size:Aa.NO.large,onClose:n,overrides:Gl,children:[(0,d.jsx)(Aa.xB,{children:(0,d.jsx)(ou,{children:C?(0,d.jsx)(Ms,{title:c(A?mu.editExceptionEvent:mu.addExceptionEvent)}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(su,{children:[(0,d.jsx)(iu,{children:c(A?mu.editException:mu.addException)}),(0,d.jsx)(ru,{children:(0,d.jsx)(hs,{disabled:!0,onChange:f,placeholder:c(mu.timeZone)})})]}),(0,d.jsxs)(Hl,{children:[(0,d.jsx)(ql,{children:c(mu.selectDateLabel)}),(0,d.jsxs)($l,{children:[(0,d.jsx)(De,{setDefaultValue:!1}),(0,d.jsx)(Y.zx,{type:"button",onClick:function(){return p(null)},overrides:Jl,kind:Y.TO.minimal,children:c(mu.clear)})]})]})]})})}),(0,d.jsx)(cu,{exceptions:a,calendarDates:h,timeSlots:j,setCalendarDates:y,setTimeSlots:S,timeZone:l}),(0,d.jsx)(pu,{onCancel:n,onDone:function(){var e=[],t=function(t){var n,i,r;return e=null!==(n=function(e){return null===E||void 0===E?void 0:E.find((function(t){var n=(0,m.Z)(t,2),a=n[0],i=n[1];return e.some((function(e){var t=(0,m.Z)(e,2),n=t[0];return t[1]>=a&&n<=i}))}))}(w(t)))&&void 0!==n?n:[],0===j.length?[[Os(t),$s(t)]]:null!==E&&void 0!==E&&E.length&&!e.length&&null!==(i=null===(r=a.find((function(e){return e.date===t})))||void 0===r?void 0:r.unavailable)&&void 0!==i?i:[]};i([].concat((0,Q.Z)(h.map((function(e){return{date:e,available:w(e),unavailable:t(e)}}))),(0,Q.Z)(s&&A?a.filter((function(e){var t=e.date;return!(s[o].date.includes(t)||h.includes(t))})):a.filter((function(e){var t=e.date;return!h.includes(t)})))).sort((function(e,t){return t.date<e.date?1:-1})).map((function(t,n){var i;return null!==(i=e)&&void 0!==i&&i.length&&1===h.length&&(t.date===Bs(h[0],{day:1})||t.date===Bs(h[0],{day:-1}))&&a[n].unavailable.find((function(t){var n,a,i=(0,m.Z)(t,2),r=i[0];return i[1]===(null===(n=e)||void 0===n?void 0:n[0])||r===(null===(a=e)||void 0===a?void 0:a[1])}))?(0,T.Z)((0,T.Z)({},t),{},{unavailable:t.unavailable.filter((function(t){var n,a,i=(0,m.Z)(t,2),r=i[0];return!(i[1]===(null===(n=e)||void 0===n?void 0:n[0])||r===(null===(a=e)||void 0===a?void 0:a[1]))}))}):t})).filter((function(e){var t=e.available,n=e.unavailable;return t.length||n.length}))),n()},hasError:I})]})},vu=function(e){var t=e.exceptions,n=e.setExceptions,a=e.timeZone,i=(0,r.useState)(!1),o=(0,m.Z)(i,2),s=o[0],l=o[1];return(0,d.jsxs)(d.Fragment,{children:[s&&(0,d.jsx)(gu,{isOpen:s,onClose:function(){return l(!1)},exceptions:t,setExceptions:n,timeZone:a}),(0,d.jsx)(Y.zx,{onClick:function(){return l(!0)},"data-pendo":"profile/availability/add-exception",children:(0,d.jsx)($.Z,{id:"IFSbdE",defaultMessage:[{type:0,value:"Add Exception"}]})})]})},hu=function(e){var t=(0,m.Z)(e,2),n=t[0],a=t[1];return[Is(n),Is(a)]},yu=function(e){return e.reduce((function(e,t){var n,a,i,r,o=e[e.length-1];if(o&&(i=o.date[o.date.length-1],r=t.date,1===Fs(i,r).days)&&(n=o,a=t,JSON.stringify(n.available.map(hu))===JSON.stringify(a.available.map(hu))&&JSON.stringify(n.unavailable.map(hu))===JSON.stringify(a.unavailable.map(hu)))){var s=e.pop();e.push((0,T.Z)((0,T.Z)({},s),{},{date:[].concat((0,Q.Z)(s.date),[t.date])}))}else e.push((0,T.Z)((0,T.Z)({},t),{},{date:[t.date]}));return e}),[])},xu=(0,X.zo)("div",{display:"flex",flexDirection:"column"}),bu=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",minHeight:"64px",paddingTop:n.scale600,paddingBottom:n.scale600,paddingLeft:n.scale600,paddingRight:n.scale600},a.medium,{flexDirection:"row",alignItems:"center"})})),Zu=(0,X.zo)("span",(function(){return{display:"flex",flexDirection:"row",alignItems:"center"}})),ju=(0,X.zo)("span",(function(e){var t=e.$theme,n=t.colors,a=t.sizing,i=t.typography;return(0,T.Z)((0,T.Z)({},i.Caption1),{},{color:n.mono700,marginTop:a.scale200})})),Su=(0,X.zo)("span",(function(){return{display:"flex",flexDirection:"column"}})),Mu=(0,X.zo)("ul",{paddingLeft:0,marginTop:0,listStyleType:"none"}),Cu=(0,X.zo)("li",(function(e){var t=e.$theme,n=t.colors,a=t.sizing;return{display:"flex",justifyContent:"space-between",alignItems:"flex-start",minHeight:"64px",borderTop:"1px solid ".concat(n.mono400),paddingTop:a.scale600,paddingBottom:a.scale600,paddingLeft:a.scale600,paddingRight:a.scale600}})),Tu=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.Subtitle3),{},{flexBasis:"40%",minWidth:"110px",flexGrow:1})})),Au=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.Subtitle3),{},{flexGrow:1,flexBasis:"60%",minWidth:"130px"})})),Eu=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.Subtitle3),{},{flexGrow:1})})),wu=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.mediaQuery,i=t.sizing;return(0,T.Z)((0,T.Z)({},n.Paragraph1),{},(0,V.Z)({paddingBottom:i.scale400,minWidth:"110px",flexBasis:"40%"},a.medium,{paddingBottom:0}))})),Iu=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.Paragraph1),{},{display:"flex",flexDirection:"column",minWidth:"130px",flexBasis:"60%"})})),Ru=(0,X.zo)("div",{display:"flex",flexDirection:"row",justifyContent:"flex-end"}),ku=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.colors;return(0,T.Z)((0,T.Z)({},n.Paragraph1),{},{color:a.mono900})})),Lu=(0,X.zo)("div",{display:"flex",flexGrow:1}),zu=(0,X.zo)("div",{marginLeft:"auto",minWidth:"120px"}),Du=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.Subtitle1),{},{fontWeight:400})})),Bu=(0,S.vU)({unavailable:{id:"gE1GH9",defaultMessage:[{type:0,value:"Unavailable"}]}}),Ou=function(e){var t=(0,M.Z)().formatMessage,n=e.exception,a=n.date,i=n.available,r=n.unavailable;return(0,d.jsxs)(Lu,{children:[(0,d.jsx)(wu,{children:1===a.length?(0,Bt.p6)(Es(a[0])):(0,Bt._Q)(Es(a[0]),Es(a[a.length-1]))}),(0,d.jsxs)(Iu,{children:[i.map((function(e,t){return(0,d.jsx)(Iu,{children:"".concat(Ns(e[0])," \u2013 ").concat(Ns(e[1]))},t)})),1===r.length&&1===Fs(r[0][0],r[0][1]).days?(0,d.jsx)(ku,{children:t(Bu.unavailable)}):r.map((function(e,n){return(0,d.jsx)(Iu,{children:"".concat(Ns(e[0])," \u2013 ").concat(Ns(e[1])," (").concat(t(Bu.unavailable),")")},n)}))]})]})},Uu={BaseButton:{style:function(e){var t=e.$theme.sizing;return{borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopRightRadius:t.scale200,borderTopLeftRadius:t.scale200,borderBottomRightRadius:t.scale200,borderBottomLeftRadius:t.scale200,marginLeft:t.scale200}}}},Pu=(0,S.vU)({filterBy:{id:"f/OxKs",defaultMessage:[{type:0,value:"Filter by"}]},noException:{id:"Z2HErA",defaultMessage:[{type:0,value:"No exceptions for the selected campaign"}]},clear:{id:"Tol+/U",defaultMessage:[{type:0,value:"Clear"}]},dateHeader:{id:"2AcCO+",defaultMessage:[{type:0,value:"Date(s)"}]},hourHeader:{id:"g5obE/",defaultMessage:[{type:0,value:"Available Hours"}]},actionHeader:{id:"yUOVyt",defaultMessage:[{type:0,value:"Actions"}]},exceptionsFor:{id:"3IPoNO",defaultMessage:[{type:0,value:"Exceptions for"}]},exceptionsNote:{id:"hgnMsQ",defaultMessage:[{type:8,value:"b",children:[{type:0,value:"Note:"}]},{type:0,value:" Exceptions are your 'non-availability' time slots against the 'Availability' mentioned. "},{type:8,value:"b",children:[{type:0,value:"These exceptions are applicable to all the Jifflenow events falling on below dates."}]}]}}),Nu=function(e){var t=e.timeZone,n=e.exceptions,a=e.setExceptions,i=(0,M.Z)().formatMessage,o=we(),s=o.campaign,l=o.setCampaign,u=(0,r.useState)(!1),c=(0,m.Z)(u,2),p=c[0],f=c[1],g=(0,r.useState)(-1),v=(0,m.Z)(g,2),h=v[0],y=v[1],x=(0,r.useState)(n),Z=(0,m.Z)(x,2),j=Z[0],S=Z[1],C=b().location,A=t.timeZoneId,E=yu(n),w=yu(j);(0,r.useEffect)((function(){S(n.filter((function(e){var t=e.date;if(!s)return!0;var n=q.ou.fromISO(s.startDate,{zone:s.timeZone}).setZone(A).toISODate(),a=q.ou.fromISO(s.endDate,{zone:s.timeZone}).endOf("day").setZone(A).toISODate();return n<=t&&a>=t})))}),[s,n,A]);return(0,d.jsxs)(xu,{children:[(0,d.jsxs)(bu,{children:[(0,d.jsx)(Hl,{children:(0,d.jsxs)(Su,{children:[C?(0,d.jsx)(Du,{children:(0,d.jsx)(Ms,{title:i(Pu.exceptionsFor)})}):(0,d.jsxs)(Zu,{children:[(0,d.jsx)(ql,{children:i(Pu.filterBy)}),(0,d.jsxs)($l,{children:[(0,d.jsx)(De,{setDefaultValue:!1}),(0,d.jsx)(Y.zx,{type:"button",onClick:function(){return l(null)},overrides:Jl,kind:Y.TO.minimal,children:i(Pu.clear)})]})]}),(0,d.jsx)(ju,{children:i(Pu.exceptionsNote,{b:function(e){return(0,d.jsx)("strong",{children:e})}})})]})}),(0,d.jsx)(zu,{children:(0,d.jsx)(vu,{exceptions:n,setExceptions:a,timeZone:t})})]}),p&&(0,d.jsx)(gu,(0,T.Z)({isOpen:p,onClose:function(){y(-1),f(!1)},exceptions:n,timeZone:t,setExceptions:a},-1!==h?{listedExceptions:E,listedExceptionEditIndex:h,timeSlots:E[h].available,calendarDates:E[h].date}:null)),w.length?(0,d.jsxs)(Mu,{children:[(0,d.jsxs)(Cu,{children:[(0,d.jsx)(Tu,{children:i(Pu.dateHeader)}),(0,d.jsx)(Au,{children:i(Pu.hourHeader)}),(0,d.jsx)(Eu,{children:i(Pu.actionHeader)})]}),w.map((function(e,t){return(0,d.jsxs)(Cu,{children:[(0,d.jsx)(Ou,{exception:e}),(0,d.jsxs)(Ru,{children:[(0,d.jsx)(Y.hU,{size:18,overrides:Uu,onClick:function(){return y(t),void f(!0)},"data-pendo":"profile/availability/edit-exception",children:(0,d.jsx)(He.zaA,{})}),(0,d.jsx)(Y.hU,{size:18,overrides:Uu,onClick:function(){return function(e){var t,i=null===(t=E.find((function(t,n){return e===n})))||void 0===t?void 0:t.date;a(n.filter((function(e){var t=e.date;return!i.includes(t)})))}(t)},"data-pendo":"profile/availability/delete-exception",children:(0,d.jsx)(He.rFk,{})})]})]},t)}))]}):(0,d.jsxs)(Ql,{children:[(0,d.jsx)(vu,{exceptions:n,setExceptions:a,timeZone:t}),(0,d.jsx)(Wl,{children:i(Pu.noException)})]})]})},Fu=function(e){return Object.values(e.reduce((function(e,t){return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},t.date,(0,T.Z)((0,T.Z)((0,T.Z)({},{available:[],unavailable:[],inverted:[]}),e[t.date]),t)))}),{})).sort((function(e,t){return e.date>=t.date?1:-1}))},Qu=function(e){return e.reduce((function(e,t){var n=t.date,a=t.available,i=t.unavailable;return a.length&&e.available.push({date:n,timeRanges:a}),i.length&&e.unavailable.push({date:n,timeRanges:i}),e}),{available:[],unavailable:[]})};var Wu,Hu=function(e,t){var n=Qu(e),a=n.available,i=n.unavailable;return Fu([].concat((0,Q.Z)($u(a,t,"available")),(0,Q.Z)($u(i,t,"unavailable"))))},$u=function(e,t,n){var a=e.flatMap((function(e){var n=e.date,a=e.timeRanges,i=function(e,t){return ks(e,t).toISO()}(zs(n),t);return 0===a.length?[[i,i]]:a.flatMap((function(e){var n=(0,m.Z)(e,2),a=n[0],i=n[1],r=ks(a,t),o=ks(i,t),s=r.toISO(),l=o.toISO();return r.toISODate()===o.toISODate()?[[s,l]]:o.startOf("day").toISO()===l?[[s,$s(s)]]:[[s,$s(s)],[o.startOf("day").toISO(),l]]}))})).reduce((function(e,t){var n,a=(0,m.Z)(t,2),i=a[0],r=a[1],o=q.ou.fromISO(i).toISODate();return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},o,[].concat((0,Q.Z)(null!==(n=e[o])&&void 0!==n?n:[]),(0,Q.Z)(i===r?[]:[t]))))}),{});return Object.keys(a).map((function(e){return(0,V.Z)({date:e},n,a[e].sort((function(e,t){return e[0]>=t[0]?1:-1})).reduce((function(e,t){var n=e.pop();return n?n[1]===t[0]?[].concat((0,Q.Z)(e),[[n[0],t[1]]]):[].concat((0,Q.Z)(e),[n,t]):[].concat((0,Q.Z)(e),[t])}),[]))}))},qu=function(e,t){var n=Qu(e),a=n.available,i=n.unavailable;return Fu([].concat((0,Q.Z)(Ku(a,t,"available")),(0,Q.Z)(Ku(i,t,"unavailable")),(0,Q.Z)(Ju(a,t))))},Ju=function(e,t){return e.map((function(e){var n=e.date,a=e.timeRanges;return{date:n,inverted:a.sort((function(e,t){return Is(e[0])>=Is(t[0])?1:-1})).flatMap((function(e,n){var i=(0,m.Z)(e,2),r=i[0],o=i[1],s=Ls(r,t).setZone(t),l=Ls(o,t).setZone(t),u=0===s.hour&&0===s.minute,d=0===l.hour&&0===l.minute||23===l.hour&&59===l.minute&&59===l.second,c=s.toISO(),p=l.toISO(),f=s.startOf("day").toISO(),g=s.endOf("day").toISO(),v=[];if(1===a.length)u||v.push([f,c]),d||v.push([p,g]);else if(n!==a.length-1){var h=Ls(a[n+1][0],t).setZone(t).toISO();0!==n||u||v.push([f,c]),v.push([p,h])}else d||v.push([p,g]);return v}))}}))},Ku=function(e,t,n){var a=e.flatMap((function(e){var n=e.date,a=e.timeRanges,i=zs(n);return 0===a.length?[[i,i]]:a.flatMap((function(e){var n=(0,m.Z)(e,2),a=n[0],i=n[1],r=Ls(a,t),o=Ls(i,t),s=r.toISO(),l=o.toISO();return r.toISODate()===o.toISODate()?[[s,l]]:o.startOf("day").toISO()===l?[[s,qs(r.toISODate())]]:[[s,qs(r.toISODate())],[o.startOf("day").toISO(),l]]}))})).reduce((function(e,t){var n,a,i=(0,m.Z)(t,2),r=i[0],o=i[1],s=(a=r,q.ou.fromISO(a).toUTC().toISODate());return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},s,[].concat((0,Q.Z)(null!==(n=e[s])&&void 0!==n?n:[]),(0,Q.Z)(r===o?[]:[t]))))}),{});return Object.keys(a).map((function(e){return(0,V.Z)({date:e},n,a[e])}))},Vu=(0,S.vU)({addException:{id:"FwbRAc",defaultMessage:[{type:0,value:"Add Exception"}]},noException:{id:"1bFL33",defaultMessage:[{type:0,value:"Add dates that deviate from your standard working hours."}]},success:{id:"4RRl9d",defaultMessage:[{type:0,value:"User availability exceptions updated successfully"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]}}),Xu=function(e){var t=e.timeZone,n=e.onSuccess,a=e.clearTempActiveKey,i=(0,M.Z)().formatMessage,l=(0,Pt.y)(),u=(0,s.usePortalV2Client)(),c=(0,r.useState)(!1),p=(0,m.Z)(c,2),f=p[0],g=p[1],h=(0,r.useState)(!1),y=(0,m.Z)(h,2),x=y[0],S=y[1],C=(0,r.useState)(null),A=(0,m.Z)(C,2),E=A[0],w=A[1],I=(0,r.useState)(null),R=(0,m.Z)(I,2),k=R[0],L=R[1],z=(0,r.useState)(null),D=(0,m.Z)(z,2),B=D[0],O=D[1],U=(0,r.useRef)(!0),P=b().location||{},N=P.startDate,F=P.endDate,W=(0,o.UO)().userId,H=t.timeZoneId;(0,r.useEffect)((function(){U.current&&k&&E&&(!f&&g(!0),w(qu(k,H))),U.current=!0}),[k]),(0,r.useEffect)((function(){U.current=!1;var e=(0,Q.Z)(null!==E&&void 0!==E?E:[]),t=Hu(e,H),n=K(t),a=(0,m.Z)(n,2)[1];L(a)}),[H]);var $=(0,s.useUserAvailabilityException)({id:W,startDate:N,endDate:F,onResolve:function(e){var t=function(e){return Object.values(e.reduce((function(e,t){var n=t.attributes,a=n.date,i=n.timeRanges,r="UserAvailabilityException"===t.type?"available":"unavailable";return e[a]=e[a]?(0,T.Z)((0,T.Z)({},e[a]),{},(0,V.Z)({},r,[].concat((0,Q.Z)(e[a][r]),(0,Q.Z)(i)))):(0,V.Z)({date:a,available:[],unavailable:[]},r,i),e}),{}))}(e.data),n=Hu(t,H);w(qu(n,H)),U.current=!1,L(n),O(n)}}),J=$.isPending,K=function(e){var t=q.ou.local().setZone(H).toISODate();return[e.filter((function(e){var n=e.date;return Fs(t,n).days<0})),e.filter((function(e){var n=e.date;return Fs(t,n).days>=0}))]},X=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){var t;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),t={upsert:(a=qu(null!==k&&void 0!==k?k:[],H),a.reduce((function(e,t){var n=t.date,a=t.available,i=t.unavailable,r=t.inverted;return a.length&&e.push({date:n,type:"UserAvailabilityException",timeRanges:a}),i.length&&e.push({date:n,type:"UserUnavailabilityException",timeRanges:i}),(null===r||void 0===r?void 0:r.length)&&e.push({date:n,type:"InvertedAvailabilityException",timeRanges:r}),e}),[]))},e.prev=2,e.next=5,(0,s.postUserAvailabilityExceptions)(u,W,t);case 5:return S(!1),(0,Je.XA)(i(Vu.success)),g(!1),n(),e.abrupt("return",void 0);case 12:return e.prev=12,e.t0=e.catch(2),S(!1),(0,Je.Eo)(i(Vu.genericError)),e.abrupt("return",!1);case 17:case"end":return e.stop()}var a}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){l(f)}),[f,l]);return(0,d.jsxs)(d.Fragment,{children:[x&&(0,d.jsx)(v.A,{}),(0,d.jsxs)(Fl,{children:[J&&(0,d.jsx)(Nl,{}),!J&&k&&(k.length?(0,d.jsx)(Nu,{timeZone:t,exceptions:k,setExceptions:L}):(0,d.jsxs)(Ql,{children:[(0,d.jsx)(vu,{exceptions:k,setExceptions:L,timeZone:t}),(0,d.jsx)(Wl,{children:i(Vu.noException)})]}))]}),(0,d.jsx)(sl,{isDirty:f,clearTempActiveKey:a,onSave:X,isDisabled:x||!f,pendoPrefix:"profile/availability/exceptions",handleDiscard:function(){L(B),g(!1),U.current=!1}})]})};!function(e){e.Availability="Availability",e.Exceptions="Exceptions"}(Wu||(Wu={}));var Gu=(0,S.vU)({availability:{id:"lgvAMc",defaultMessage:[{type:0,value:"Availability"}]},exceptions:{id:"qYV4JC",defaultMessage:[{type:0,value:"Exceptions"}]}}),Yu=function(e){var t=e.timeZone,n=(0,M.Z)().formatMessage,a=Wu.Availability,i=Wu.Exceptions,o=D(),s=o.isDirty,l=o.setShowConfirmation,u=o.onCloseConfirmation,c=(0,r.useState)(a),p=(0,m.Z)(c,2),f=p[0],g=p[1],v=(0,r.useState)(void 0),h=(0,m.Z)(v,2),y=h[0],x=h[1],b=el(),Z=b.isDirty,j=b.resetAvailability,S=function(e){return(0,d.jsx)(Ht.J$,{children:n(e)})},C=R(),T=C.state.tempSelectedKey,A=C.dispatch,E=function(){y&&x(void 0)},w=(0,r.useCallback)((function(){T?(A({type:"setSelectedKey",payload:T}),A({type:"setTempSelectedKey",payload:void 0})):y&&(g(y),x(void 0))}),[A,y,T]);return(0,d.jsxs)(Ht.mQ,{activeKey:f,onChange:function(e){var t=e.activeKey;s?(u((function(){return function(){g(t),Z&&j()}})),l(!0),x(t)):g(t)},overrides:Rl,children:[(0,d.jsx)(Ht.OK,{title:S(Gu.availability),overrides:(0,Ht.i$)(kl),children:(0,d.jsx)(Ul,{onSuccess:w,clearTempActiveKey:E,timeZone:t})},a),(0,d.jsx)(Ht.OK,{title:S(Gu.exceptions),overrides:(0,Ht.i$)(kl),children:(0,d.jsx)(Ee,{children:(0,d.jsx)(Xu,{onSuccess:w,clearTempActiveKey:E,timeZone:t})})},i)]})},_u=["timeRanges"],ed=function(e){return e.reduce((function(e,t){return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},t,[]))}),{})};function td(e){return e.sort((function(e,t){return e.start>=t.start?1:-1})).reduce((function(e,t){var n=e.pop();return n?n.end===t.start?[].concat((0,Q.Z)(e),[{start:n.start,end:t.end}]):[].concat((0,Q.Z)(e),[n,t]):[].concat((0,Q.Z)(e),[t])}),[])}var nd,ad=function(e,t){var n=e.map((function(e){var t=e.date,n=e.timeRanges;return{date:t,timeRanges:n.map((function(e){var n=e.start,a=e.end;return{start:q.ou.fromISO("".concat(t,"T00:00:00Z")).plus({minutes:n}).toISO(),end:q.ou.fromISO("".concat(t,"T00:00:00Z")).plus({minutes:a}).toISO()}}))}})),a=ed(e.map((function(e){return e.date}))),i=n.flatMap((function(e){return e.timeRanges.flatMap((function(e){var n=ks(e.start,t),a=ks(e.end,t),i=n.toISO(),r=a.toISO();return n.toISODate()===a.toISODate()?{start:i,end:r}:[{start:i,end:$s(i)},{start:a.startOf("day").toISO(),end:r}]}))})).reduce((function(e,t){var n,a=t.start,i=t.end,r=q.ou.fromISO(a).toISODate();return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},r,[].concat((0,Q.Z)(null!==(n=e[r])&&void 0!==n?n:[]),(0,Q.Z)(a===i?[]:[{start:Qs(a),end:Qs(i)}]))))}),a);return Object.keys(i).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return{date:e,timeRanges:td(i[e])}}))},id=function(e){var t=e.map((function(e){var t=e.timeRanges,n=(0,F.Z)(e,_u);return(0,T.Z)((0,T.Z)({},n),{},{timeRanges:t.map((function(e){var t=e.start,a=e.end;return{start:"".concat(q.ou.fromISO(n.date).toISODate(),"T").concat(t),end:"".concat(q.ou.fromISO(n.date).toISODate(),"T").concat(a)}}))})})),n=ed(e.map((function(e){return e.date}))),a=t.flatMap((function(e){return e.timeRanges.flatMap((function(e){var t=0===Is(e.end)?Ds(e.end,{day:1}):e.end;return{start:e.start,end:t}}))})).reduce((function(e,t){var n,a=t.start,i=t.end,r=q.ou.fromISO(a).toISODate(),o=Is(a),s=Is(i);return(0,T.Z)((0,T.Z)({},e),{},(0,V.Z)({},r,[].concat((0,Q.Z)(null!==(n=e[r])&&void 0!==n?n:[]),(0,Q.Z)(o===s&&0!==s?[]:[{start:o,end:s||1440}]))))}),n);return Object.keys(a).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return{date:e,timeRanges:td(a[e])}}))},rd=function(e){return q.ou.fromISO(e).plus({day:1}).toISODate()},od=(0,r.createContext)(void 0),sd=function(e){var t=e.timeZoneId,n=e.userId,a=e.dateRange,i=e.children,o=e.setDateRange,u=e.filterRange,c=function(e){var t=e.date;return t>=a[0]&&t<=a[1]},p=(0,r.useState)(!1),f=(0,m.Z)(p,2),g=f[0],v=f[1],h=(0,r.useState)([]),y=(0,m.Z)(h,2),x=y[0],b=y[1],Z=(0,r.useState)([]),j=(0,m.Z)(Z,2),S=j[0],M=j[1],C=(0,r.useState)([]),T=(0,m.Z)(C,2),A=T[0],E=T[1],w=D().onCloseConfirmation,I=(0,r.useMemo)((function(){return function(){M(x),v(!1)}}),[x]);(0,r.useEffect)((function(){w((function(){return function(){g&&I(),o(u)}}))}),[u,o,g,w,I]),(0,r.useEffect)((function(){v(JSON.stringify(S)!==JSON.stringify(x))}),[S,x]),(0,r.useEffect)((function(){if(A.length){var e=ad(A,t).filter(c);M(e),b(e)}}),[t]);var R,k=(0,s.useCombinedUserAvailability)({path:{userId:n},query:{startDate:(R=a[0],q.ou.fromISO(R).plus({day:-1}).toISODate()),endDate:rd(a[1])}},{onSuccess:function(e){var n=e.data.availabilities,a=ad(n,t).filter(c);b(a),M(a),E(n)}}),L=k.isError,z=k.refetch,B=k.isFetching,O=(0,r.useMemo)((function(){return{defaultAvailability:x,availability:S,setDefaultAvailability:b,setAvailability:M,UTCAvailability:A,setUTCAvailability:E,resetAvailability:I,isDirty:g}}),[x,S,A,g,I]);return L?(0,d.jsx)(l.m,{onButtonClick:function(){z()}}):B?(0,d.jsx)(Nl,{}):(0,d.jsx)(od.Provider,{value:O,children:i})},ld=function(){var e=(0,r.useContext)(od);return e},ud=n(13029),dd=(0,X.zo)("div",(function(e){return{display:"flex",flexWrap:"wrap",marginTop:e.$theme.sizing.scale600,justifyContent:"flex-end",alignItems:"center"}})),cd=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({display:"flex",flexDirection:"column",height:"calc(100vh - 395px)",overflowY:"scroll"},t.medium,{height:"calc(100vh - 315px)"})})),pd=(0,X.zo)("div",(function(){return{display:"flex"}})),fd=(0,X.zo)("div",(function(e){return{minWidth:"100px",paddingRight:e.$theme.sizing.scale300}})),md=(0,X.zo)("div",(function(e){return{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center",marginBottom:e.$theme.sizing.scale600}})),gd=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.sizing;return(0,T.Z)((0,T.Z)({},n.Subtitle3),{},{marginRight:a.scale300})})),vd=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.colors;return(0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)((0,T.Z)({},(0,ud.aq)("1px")),(0,ud.kJ)(a.mono400)),(0,ud.dR)("solid")),(0,ud.wK)(n.scale100)),{},{paddingTop:n.scale300,paddingBottom:n.scale300,marginTop:n.scale300})})),hd=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.sizing,i=t.mediaQuery;return(0,T.Z)((0,T.Z)({},n.Subtitle1),{},(0,V.Z)({fontWeight:400,minWidth:"100px",paddingRight:a.scale300,display:"none"},i.medium,{display:"block"}))})),yd=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.mediaQuery;return(0,T.Z)((0,T.Z)({},n.Subtitle1),{},(0,V.Z)({fontWeight:400,display:"block"},a.medium,{display:"none"}))})),xd=(0,X.zo)("div",(function(e){return{display:"flex",marginBottom:e.$theme.sizing.scale700}})),bd=(0,X.zo)("div",(function(){return{display:"flex",alignItems:"center"}})),Zd=(0,X.zo)("div",(function(e){return{marginLeft:e.$theme.sizing.scale400,minWidth:"145px"}})),jd=function(e,t){return"".concat(e,"T").concat(t)},Sd=function(e){return q.kI.weekdays("long")[q.ou.fromISO(e).weekday-1]},Md=function(e){return q.ou.fromISO(e).toLocaleString(q.ou.DATE_MED)},Cd=(0,S.vU)({overlapError:{id:"Og5lB4",defaultMessage:[{type:0,value:"Time overlap"}]},endTimeLessThanStartTime:{id:"edYSJU",defaultMessage:[{type:0,value:"Choose an end time later than start time."}]}}),Td=function(e){var t=e.dateAvailability,n=e.onCopySlots,a=(0,M.Z)().formatMessage,i=ld(),r=i.availability,o=i.setAvailability,s=t.date,l=t.timeRanges,u=Sd(s),c=!!l.length&&0===q.ou.fromISO(l[l.length-1].end).hour,p=function(e){return e.date===s},f=function(){return s},m=function(e){return jd(s,e)},g=function(){pl({setAvailability:o,formatMessage:a,check:p})},v=function(e,t){var n=q.ou.fromJSDate(e),a=function(e,t){var a;return 0===Is(n.toISO())?e:n.toMillis()>=q.ou.fromISO(jd(s,null===(a=l.find((function(e,n){return n===t})))||void 0===a?void 0:a.end)).toMillis()?Ws(23===n.hour?q.ou.fromISO("".concat(n.toISODate(),"T24:00:00")).toJSDate():n.plus({hour:1}).toJSDate()):e};o(r.map((function(n){return p(n)?(0,T.Z)((0,T.Z)({},n),{},{timeRanges:n.timeRanges.map((function(n,i){return i===t?{start:Ws(e),end:a(n.end,i)}:n}))}):n}))),g()},h=!l.length;return(0,d.jsx)(vl,{$isEmpty:h,children:(0,d.jsxs)(xl,{children:[(0,d.jsxs)(Cl,{children:[(0,d.jsx)(hl,{children:a(na.c1[u])}),(0,d.jsx)(hd,{children:Md(s)}),(0,d.jsx)(jl,{children:l.map((function(e,t){var n=e.start,i=e.end,l=e.error;return(0,d.jsx)(Sl,{children:(0,d.jsx)(ll.S,{start:jd(s,n),end:jd(s,i),error:l,onDelete:function(){fl({availability:r,setAvailability:o,check:p,formatMessage:a,indexToDelete:t})},onStartChange:function(e){return v(e,t)},onEndChange:function(e){return n=e,i=t,o(r.map((function(e){return p(e)?(0,T.Z)((0,T.Z)({},e),{},{timeRanges:e.timeRanges.map((function(e,t){if(t!==i)return e;var r=0===Is(n.toISOString()),o=r?Qs($s(n.toISOString())):Ws(n);return(0,T.Z)((0,T.Z)({start:e.start},!r&&o<=e.start?{error:a(Cd.endTimeLessThanStartTime)}:null),{},{end:o})}))}):e}))),void g();var n,i}})},"".concat(t,"-").concat(n,"-").concat(i))}))})]}),(0,d.jsxs)(bl,{$isEmpty:h,children:[(0,d.jsx)(yl,{children:a(na.c1[u])}),(0,d.jsx)(yd,{children:Md(s)}),(0,d.jsxs)(Zl,{"data-pendo":"profile/availability/".concat(u,"-action-container"),children:[(0,d.jsx)(Y.hU,{size:20,overrides:ml,disabled:c,onClick:function(){cl({availability:r,setAvailability:o,check:p,timeRanges:l,getNextSlot:m,getStartOfDay:f})},"data-pendo":"profile/availability/add",children:(0,d.jsx)(He.mm_,{size:20})}),(0,d.jsx)(Y.hU,{size:20,overrides:ml,disabled:!l.length,onClick:function(){return n(s)},"data-pendo":"profile/availability/copy",children:(0,d.jsx)(He.KK1,{})}),(0,d.jsx)(Y.hU,{size:20,disabled:!l.length,overrides:ml,onClick:function(){ul({availability:r,setAvailability:o,check:p})},"data-pendo":"profile/availability/delete",children:(0,d.jsx)(He.rFk,{})})]})]})]})},s)},Ad=function(e){var t=(0,r.useState)(!1),n=(0,m.Z)(t,2),a=n[0],i=n[1],o=e.item,s=e.dateFilter;return(0,d.jsx)(xd,{children:(0,d.jsx)($e.XZ,{checked:a,onChange:function(){i(!a),e.copyTo(o)},children:s?(0,d.jsxs)(pd,{children:[(0,d.jsx)(fd,{children:Sd(o)}),(0,d.jsxs)(fd,{children:[" ",Md(o)]})]}):o})})},Ed=(0,S.vU)({dateRange:{id:"FLXawj",defaultMessage:[{type:0,value:"Date Range"}]}}),wd=function(e){return q.ou.fromJSDate(e).toISODate()},Id=function(e){var t=e.dateRange,n=e.onChange,a=e.minDate,i=e.maxDate,r=(0,M.Z)().formatMessage,o=function(e){return q.ou.fromISO(e)};return q.Xp.fromDateTimes(o(a),o(i)).length("days")>14?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(gd,{children:r(Ed.dateRange)}),(0,d.jsx)("div",{children:(0,d.jsx)(Be.fU,{label:r(Ed.dateRange),onChange:function(e){return n(e?[e[0],e[1]||e[0]].map(wd):[a,i])},value:t.map((function(e){return Es(e)})),minDate:Es(a),maxDate:Es(i)})})]}):null},Rd=["sourceDate","availabilityInTZ","setAvailabilityInTZ","dateRange"],kd=(0,S.vU)({specificDays:{id:"cVm8Ri",defaultMessage:[{type:0,value:"Specific Days"}]},specificDates:{id:"PCjdmT",defaultMessage:[{type:0,value:"Specific Dates"}]}});!function(e){e.DATES="dates",e.DAYS="days"}(nd||(nd={}));var Ld=function(e){var t=(0,M.Z)().formatMessage,n=e,a=n.sourceDate,i=n.availabilityInTZ,o=n.setAvailabilityInTZ,s=n.dateRange,l=(0,F.Z)(n,Rd),u=[{id:nd.DAYS,label:t(kd.specificDays)},{id:nd.DATES,label:t(kd.specificDates)}],c=u.find((function(e){return e.id===nd.DAYS})).id,p=(0,r.useState)(c),f=(0,m.Z)(p,2),g=f[0],v=f[1],h=(0,r.useState)(s),y=(0,m.Z)(h,2),x=y[0],b=y[1],Z=(0,r.useState)([]),j=(0,m.Z)(Z,2),S=j[0],C=j[1];(0,r.useEffect)((function(){C([]),b(s)}),[s,g]);var A=function(e){C([].concat((0,Q.Z)(S),[e]))};return(0,d.jsxs)(Aa.u_,(0,T.Z)((0,T.Z)({},l),{},{children:[(0,d.jsx)(Aa.xB,{children:(0,d.jsxs)(bd,{children:[(0,d.jsx)("div",{children:(0,d.jsx)($.Z,{id:"XaCR1r",defaultMessage:[{type:0,value:"Copy availability of "},{type:1,value:"date"},{type:0,value:" to"}],values:{date:a}})}),(0,d.jsx)(Zd,{children:(0,d.jsx)(J.Ph,{id:"copyFilter",options:u,required:!0,clearable:!1,value:u.filter((function(e){var t=e.id;return g===t})),onChange:function(e){var t=e.value;return v(t[0].id)}})})]})}),(0,d.jsx)(Aa.fe,{children:(0,d.jsx)(wl,{children:g===nd.DATES?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(md,{children:(0,d.jsx)(Id,{dateRange:x,onChange:function(e){return b(e)},minDate:s[0],maxDate:s[1]})}),null===i||void 0===i?void 0:i.filter((function(e){var t=e.date;return t!==a&&t>=x[0]&&t<=x[1]})).map((function(e){var t=e.date;return(0,d.jsx)(Ad,{item:t,dateFilter:!0,copyTo:A},t)}))]}):q.kI.weekdays("long").map((function(e){return(0,d.jsx)(Ad,{item:e,copyTo:A},e)}))})}),(0,d.jsxs)(Aa.mz,{children:[(0,d.jsx)(Aa.mH,{kind:Y.TO.tertiary,overrides:Ll,onClick:l.onClose,"data-pendo":"profile/availability/copy-cancel",children:(0,d.jsx)($.Z,{id:"PyxZY2",defaultMessage:[{type:0,value:"Cancel"}]})}),(0,d.jsx)(Aa.mH,{kind:Y.TO.primary,onClick:function(){var e=i.find((function(e){return e.date===a})).timeRanges;g&&(o(i.map((function(t){var n=g===nd.DATES?t.date:Sd(t.date);return S.includes(n)?(0,T.Z)((0,T.Z)({},t),{},{timeRanges:e}):t}))),l.onClose(),C([]))},overrides:Ll,"data-pendo":"profile/availability/copy-ok",children:(0,d.jsx)($.Z,{id:"p8ccgM",defaultMessage:[{type:0,value:"OK"}]})})]})]}))},zd=(0,S.vU)({success:{id:"2Kgv1B",defaultMessage:[{type:0,value:"Availabilities Saved Successfully."}]},genericError:{id:"63gNIe",defaultMessage:[{type:0,value:"Error Setting Availabilities."}]}}),Dd=function(e){var t=e.date,n=e.timeRanges;return{availabilityDate:t,availabilityDay:Sd(t),availableSlots:n.reduce((function(e,t){return[].concat((0,Q.Z)(e),[t.start,t.end])}),[])}},Bd=function(e){var t=e.timeZoneId,n=e.dateRange,a=ld(),i=a.availability,l=a.isDirty,u=a.resetAvailability,c=a.setDefaultAvailability,p=a.setAvailability,f=(0,M.Z)().formatMessage,g=(0,Pt.y)(),h=(0,s.usePortalV2Client)(),y=(0,o.UO)().userId,x=new URLSearchParams(window.location.search).get("location"),b=(0,r.useState)(!1),S=(0,m.Z)(b,2),C=S[0],A=S[1],E=(0,r.useState)(!1),w=(0,m.Z)(E,2),I=w[0],R=w[1],k=(0,r.useState)(null),L=(0,m.Z)(k,2),z=L[0],D=L[1],B=i.flatMap((function(e){return e.timeRanges})).some((function(e){return e.error})),O=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){var n;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(i.map((function(e){return(0,T.Z)((0,T.Z)({},e),{},{timeRanges:e.timeRanges.sort((function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}))})}))),R(!0),n={availabilities:id(i).map(Dd),users:[y],locationUuid:x,weekwise:!1,userTimeZone:t},e.prev=3,e.next=6,(0,s.updateCombinedUserAvailability)(h,n);case 6:return c(i),R(!1),(0,Je.XA)(f(zd.success)),e.abrupt("return",void 0);case 12:return e.prev=12,e.t0=e.catch(3),R(!1),(0,Je.Eo)(f(zd.genericError)),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),U=function(e){A(!0),D(e)};return(0,r.useEffect)((function(){g(l)}),[l,g]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(cd,{children:i.map((function(e){return(0,d.jsx)(Td,{dateAvailability:e,onCopySlots:U},e.date)}))}),(0,d.jsx)(sl,{clearTempActiveKey:function(){},isDirty:l,onSave:O,isDisabled:I||!l||B,pendoPrefix:"profile/availability",handleDiscard:u}),C&&(0,d.jsx)(Ld,{isOpen:!0,sourceDate:z,onClose:function(){return A(!1)},availabilityInTZ:i,setAvailabilityInTZ:p,dateRange:n}),I&&(0,d.jsx)(v.A,{})]})},Od=function(e){var t,n=e.timeZoneId,a=e.userId,i=null!==(t=b().location)&&void 0!==t?t:{},o=i.startDate,s=i.endDate,l=(0,r.useState)([o,s]),u=(0,m.Z)(l,2),c=u[0],p=u[1],f=(0,r.useState)(c),g=(0,m.Z)(f,2),v=g[0],h=g[1],y=D(),x=y.isDirty,Z=y.setShowConfirmation;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(dd,{children:(0,d.jsx)(Id,{dateRange:c,onChange:function(e){x?(Z(!0),h(e)):p(e)},minDate:o,maxDate:s})}),(0,d.jsx)(vd,{children:(0,d.jsx)(sd,{timeZoneId:n,userId:a,dateRange:c,filterRange:v,setDateRange:p,children:(0,d.jsx)(Bd,{timeZoneId:n,dateRange:c})})})]})},Ud=(0,S.vU)({title:{id:"xairoW",defaultMessage:[{type:0,value:"My Availability"}]},titleEEvent:{id:"9aFKJS",defaultMessage:[{type:0,value:"My Availability for"}]},note:{id:"95Wc6d",defaultMessage:[{type:8,value:"b",children:[{type:0,value:"Note:"}]},{type:0,value:" The availability is applicable to all the Jifflenow instances falling on below dates."}]}}),Pd=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.colors,a=t.sizing;return{display:"flex",flexWrap:"wrap",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:n.mono300,marginBottom:a.scale850}})),Nd=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",marginRight:t.scale1600,marginBottom:t.scale850,width:"250x"}})),Fd=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{marginBottom:t.scale400,marginTop:t.scale600}})),Qd=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{marginBottom:t.scale800,marginTop:t.scale300,width:"130px"}})),Wd=(0,X.zo)("img",(function(e){var t=e.$theme.sizing;return{width:t.scale900,height:t.scale900}})),Hd=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.colors;return{width:n.scale1200,height:n.scale1200,display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid ".concat(a.mono300),borderRadius:"50%",padding:n.scale300,boxShadow:"0px 2px 8px rgb(216 216 216 / 40%)"}})),$d=(0,X.zo)("img",(function(e){var t=e.$theme.sizing;return{width:t.scale800,height:t.scale700}})),qd=(0,X.zo)("div",(function(e){return{marginTop:e.$theme.sizing.scale100}})),Jd=(0,X.zo)("div",{display:"flex"}),Kd=(0,X.zo)("div",(function(e){return{display:"flex",maxWidth:"200px",color:e.$theme.colors.mono700}})),Vd=(0,X.zo)("div",(function(e){var t=e.$theme.typography;return(0,T.Z)((0,T.Z)({},t.ParagraphSmall),{},{width:"80%",marginLeft:"5px"})})),Xd=(0,S.vU)({SSOUser:{id:"tFXsdt",defaultMessage:[{type:0,value:"SSO User"}]},NonSSOUser:{id:"yOEZ67",defaultMessage:[{type:0,value:"Non-SSO User"}]}}),Gd=function(e){var t=e.ssoEnabled,n=(0,M.Z)().formatMessage;return(0,d.jsx)(Pd,{children:(0,d.jsxs)(Nd,{children:[(0,d.jsx)(Hd,{children:(0,d.jsx)($d,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAASCAYAAACq26WdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMUSURBVHgBvVRbSBRRGP7PXHZn2dW1bb1kK+7memmLLEMiyoIIe6ugELMoTKgggqKXnsygy0uEJeFDoVIPQvQSRBRFvYQPtSHFipVFtbR5S01nb3M9nZlcm911V/OhD+acOf+c///+6yBYIvx+P9sRsFdExZizMs8UvNhQ9WUhHZTtI8aYaer56C3MVabb9/mGNdnBroCPZpg2UVL3qhhYw/Wg1US3t9ZVdHo8KP5PZEfvvm+ICOpNDODEZKEQfsAy9BNJVq+Qoz2jgwBDPC/UPz6z4euiyBq7+92qzH0GhKmEjEIIODMDDE1BTJCAkEJGIPTW5nTWde3J541ixnhovjO0PSKJrYqCatAskYVjwVNsB3sOBwz117dIXILQKA+jkxH9TKIGC3EmSuSyolZHx8eOE/HVeSM70D14TlbwZWSQFTisUObK06PJhB/jYdB8KFxuJQEhILWEkYkwfB+bGe5tXl2cRnb63tDm0LTUhwxJ1VJW61sBS8W7T2MAirr2VlP5QEKmuzwRU86jlOpVlTrSDGgBunJoKCGPzURlJVvnLQCft+Dhdf/MkYRMr1lcUuuNXBYzCzlWc5JyLjG+28tBHveHRFQw9IVECPyUMhKS9LvJ1tPxhnef2phzQSdDKV1ptbBpittKzHNEGkw0gq0uM8jaXKQgxKvAi0nd2tb+in+hk5HhnSLFXZb4wrLJKdLMOQhR72AUdnk4/V33nGw7S7k0shkBw/0PMYgaxoNjcYuuRVNUp/GyKClJymh2WWmjgUHpoymQlJK/ib5Pxcm7dj3lGjFZp0dms8g3InHmsKJil+5ZWEgzOEBqo6XSiKm4Ck+/CfCL7Fr7y4RRIUwsSbFW0ySHEeLn+I/1BMsmxPAz0nFu7bxmlRMcdkuSQm2RCbzLWNBKOhJW4HlQgLicXrP5oKq4Oy0njV2B/QhRW6xmNr+6smgHESUNW8J01j/4PFzAKN6sOrcDca8gyo9UjMthidCcMyF09kSN7dqCDvoxZv394RYZ4BDp8k1ERMMiQAxPkvU1otVLJ9fnvoT/jd/3Lh4fErAHmwAAAABJRU5ErkJggg=="})}),(0,d.jsx)(Fd,{children:(0,d.jsx)($.Z,{id:"ZNliyg",defaultMessage:[{type:0,value:"SSO Login"}]})}),(0,d.jsx)(Y.zx,{kind:Y.TO.primary,disabled:!0,children:n(t?Xd.SSOUser:Xd.NonSSOUser)})]})})},Yd=function(e){var t=e.height,n=(0,X.hQ)(),a=(0,m.Z)(n,2)[1],i={style:{width:"100%",height:"".concat(t)},width:"1000",height:"120",viewBox:"0 0 1000 100",speed:2,primaryColor:a.colors.mono200,secondaryColor:a.colors.mono300};return(0,d.jsxs)(at.ZP,(0,T.Z)((0,T.Z)({},i),{},{children:[(0,d.jsx)("circle",{cx:"80",cy:"50",r:"35"}),(0,d.jsx)("rect",{x:"15",y:"90",rx:"0",ry:"0",width:"133",height:"40"}),(0,d.jsx)("circle",{cx:"250",cy:"50",r:"35"}),(0,d.jsx)("rect",{x:"185",y:"90",rx:"0",ry:"0",width:"133",height:"40"}),(0,d.jsx)("circle",{cx:"430",cy:"50",r:"35"}),(0,d.jsx)("rect",{x:"365",y:"90",rx:"0",ry:"0",width:"133",height:"40"})]}))},_d=(0,r.forwardRef)((function(e,t){var n=(0,X.hQ)(),a=(0,m.Z)(n,2)[1];return(0,r.useImperativeHandle)(t,(function(){return{getReactContainerStyle:function(){return{alignSelf:"flex-start",marginTop:a.sizing.scale600}}}})),(0,d.jsx)(it.Z,{flexGridColumnCount:1,overrides:{Block:{style:function(e){return{marginTop:e.$theme.sizing.scale400,padding:"10px"}}}},children:Array.from({length:2}).map((function(e,t){return(0,d.jsx)(rt.ZP,{children:(0,d.jsx)(Yd,{height:110})},t)}))})})),ec={BaseButton:{style:function(e){var t=e.$theme,n=t.colors,a=t.sizing;return{backgroundColor:n.white,borderLeftStyle:"none",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderTopRightRadius:"none",borderBottomRightRadius:"none",borderTopLeftRadius:"none",borderBottomLeftRadius:"none",marginLeft:a.scale600}}}},tc=function(e){var t=e.integrationName,n=e.onSuccess,a=e.onFailure,i=(0,r.useRef)(null),o=(0,s.useOAuthMeta)({conferenceName:t},{enabled:!1,onSuccess:function(e){(null===e||void 0===e?void 0:e.data)&&(i.current=window.open(e.data.redirectionUrl,void 0,"width=1000,height=600,left=200,top=100"))},onError:function(){(0,Je.Eo)((0,d.jsx)($.Z,{id:"YFTaoF",defaultMessage:[{type:0,value:"Something went wrong. Please try again."}]}))}}),l=o.refetch,u=o.isLoading;return(0,r.useEffect)((function(){var e=setInterval((function(){var e;null!==(e=i.current)&&void 0!==e&&e.closed&&(i.current=null,null===n||void 0===n||n())}),1e3);return function(){return clearInterval(e)}}),[n]),(0,r.useEffect)((function(){var e=function(e){var t=e.origin,n=e.data;i.current&&(t===window.origin||t.includes(function(){var e=window.origin.split(".");return e.shift(),e.join(".")}()))&&(null===a||void 0===a||a(n.type))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[a]),(0,d.jsxs)(d.Fragment,{children:[u&&(0,d.jsx)(v.A,{}),(0,d.jsx)(Y.zx,{kind:Y.TO.primary,onClick:function(){return l()},"data-pendo":"profile/integration-".concat(t,"/connect"),children:(0,d.jsx)($.Z,{id:"qJeGtX",defaultMessage:[{type:0,value:"Connect"}]})})]})},nc=function(e){var t=e.integrationName,n=e.onSuccess,a=f().id,i=(0,s.useDeAuthorize)(),r=i.isLoading,o=i.mutateAsync,l=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({conferenceName:t,userUuid:a});case 3:null===n||void 0===n||n(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),(0,Je.Eo)((0,d.jsx)($.Z,{id:"YFTaoF",defaultMessage:[{type:0,value:"Something went wrong. Please try again."}]}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[r&&(0,d.jsx)(v.A,{}),(0,d.jsx)(Y.zx,{kind:Y.TO.primary,onClick:l,"data-pendo":"profile/integration-".concat(t,"/disconnect"),children:(0,d.jsx)($.Z,{id:"BnOevB",defaultMessage:[{type:0,value:"Disconnect"}]})})]})},ac=(0,S.vU)({calendarIntegrationConnectSuccess:{id:"gHNVE4",defaultMessage:[{type:0,value:"Calendar integration connected successfully."}]},calendarIntegrationDisconnectSuccess:{id:"zSmv4O",defaultMessage:[{type:0,value:"Calendar integration disconnected successfully."}]},vconIntegrationConnectSuccess:{id:"dsJRSV",defaultMessage:[{type:0,value:"Video conference integration connected successfully."}]},vconIntegrationDisconnectSuccess:{id:"m2B2xH",defaultMessage:[{type:0,value:"Video conference integration disconnected successfully."}]},calendarSettingsDescription:{id:"Kob4Ut",defaultMessage:[{type:0,value:"Connect your "},{type:1,value:"adapterName"},{type:0,value:" to Jifflenow and manage your calendar settings"}]},vconSettingsDescription:{id:"2V6Mvy",defaultMessage:[{type:0,value:"Automatically include "},{type:1,value:"adapterName"},{type:0,value:" details in Jifflenow meetings"}]},LastSyncedTime:{id:"4NLhWt",defaultMessage:[{type:0,value:"Last Synced Time"}]},fetchFreeBusy:{id:"Gnwlz3",defaultMessage:[{type:0,value:"Fetch Free/Busy"}]},configurationMessage:{id:"o77GNo",defaultMessage:[{type:0,value:"Your admin has already integrated with "},{type:1,value:"adapterName"}]},fetchFreeBusySuccess:{id:"XXfl2C",defaultMessage:[{type:0,value:"Synchronization with external calendar has been initiated. This might take a few minutes."}]},connectError:{id:"6PAtAB",defaultMessage:[{type:1,value:"adapterName"},{type:0,value:" authorization is unsuccessful. Email in Jifflenow doesn\u2019t match with "},{type:1,value:"adapterName"},{type:0,value:" email."}]},genericError:{id:"YFTaoF",defaultMessage:[{type:0,value:"Something went wrong. Please try again."}]}}),ic=(0,S.vU)({Zoom:{id:"Dctahb",defaultMessage:[{type:0,value:"Zoom"}]},Webex:{id:"oGdXol",defaultMessage:[{type:0,value:"Webex"}]},MicrosoftTeams:{id:"eoj86w",defaultMessage:[{type:0,value:"Microsoft Teams Conferencing"}]},MicrosoftOutlook:{id:"BvZFaB",defaultMessage:[{type:0,value:"Office 365 Calendar"}]},GoogleCalendar:{id:"4CQ4JI",defaultMessage:[{type:0,value:"Google Calendar"}]}}),rc={Zoom:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMbSURBVHgBxZdbSFRBGMd/6/1+yVJLtFJILbMolKKbqHShqCfpwYgogqigxyiCeoneCqKHLiDVm/QgJURU1KoPGZGGaCmamqjlJU0pMzW3GcZd9+g5u2dPa/1g4Fzm8p9v5vu+GZvD4SgAXvL/sAdhkalpGPoO45NgE+9xkRAdhiV8EtH1FR7Wwbsu6BuBaYcSIHGI59BgWL0MtmeKkgXhIeb6tZlZjubPUFYFjd2igQ1TRIVCcQ4c3irEeZ6q3aMIObtb4s+jOvODz2VxDFw8AOmJhlXsAUZ/xn7B2XKorLcuQDI4Cqfuw5MG4zq6hpqYgnMPoK0PvxAgJnH9qZrMrrU6//Ua3a3xnwAnthkhTd14F1HdojxgobgjNvjkFMYipoXvl1WzoLR+gccNHkTYm2FgVFtBeoiZ4gvPG1WQc6LZmLVt2sqF2XB0B6boF+LLa+F1u/b73nWQsghuuwWBjwPwvhc2LFfvLkuMT8CbDm0HcVEQH2muZC6FCyIepCWotjKaniiEk8WwJFrbr/T4+k7mW6K1X7nm3xAgppSTAhEiWp7ZOStIj85Bt3bOh5Ex/EKIyB+niz0LkPQM64gY/oHfiDKRTeXGdFreJSIwgH+K9ChnOnANHWL5ZDGfqd/e68RFQHDgHBF6azgxiSUuVSiX9SbCiUtESrxKNO409fgeiCTdQ8I176kMbERG0uyzaxEihVttWQU1LbM/O0RQuVwJJXmQGIMpvs1s8J8i7tx8AR96tQM6yU3VESEpyNKKkLxqVcWsReaePaqaVXEnOQ42rph91/hEfgakJhh3bqaYoSRf640aEXJPHDOZK6ySJvJIUbb227zokLcS9q1nQZCn7/P7hWsGeREhOV4gliUevyKtfGSb/nLriggSQeTaIZEZk/EL4cEqmxpZ2DBYS9NdLVWbyEqscBIrgtKVg7An17iOqcvPJ5F2bzxTBxGzhInZ7xYDl25Wqd0DdpsvF2IppuIttPer07i7S0prybtoughMm4SrF61RtzAT+CbCHXlykudRmZLlHpIDxkZgBeu3crnbk2LxC38AY5vv3mWkiMgAAAAASUVORK5CYII=",Webex:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWgSURBVHgBtVh9bFNVFP+917eu7b4698Uo6wCZDJbwPXQJUCSG4D9CIjHhH0Vi4l9EDZo4hGimkIgYE4kxxvgRjQkGdCAQlBExBNE5Rjs25ENcNxhbQ0f7+rWuXfuu5/W1o2/r6zqE33J233v3vnt/59xzzj2vHCaAMTabmmaSp0iKSXj8fzASN0kHyQccx3Vrj2SsmSTIHj4OkORnIrCf3S8kdj84RKKT1+aSBF6k5ktMZVPG4PCNoc0Xx9/BGJxhICzFYdDxqBKA5eY8rCnh0VSSD45DLniLtmZvikQPNQ2ai5Oc9UaxpzeEcz4JYcYln8qtlBylPBOoXV0qYHu1HhurjeRQqXEZ4SWxcETgMbq4pjUqGJOw5ZKI46K8RvqC2cHRX6OJR+vSQsw0CNmGrpM9f75W7/WwhKXtXpzwMEXxXMExcK5buHC0FSv2fIN2pyvb6DqZRHGmHueohPV2H26EGZiyaUi3gJ5uLfk85pO2NdTmj28LEQiOgB3/AdL1Hrh6LmPD7k/Re8ejRcKQMQfESTbbRfSTJZAiwBIKYq6Rx1f1JgzYSnFzVSmuPqG0Q7ZyfL/QhEVEivPcASIjCiXyUHEkiHW7PkEgHMnIIiOJ/c4Q7KHUHZcQjhi8WqOHvdGMrRYjKvJ45eWkcUoFDs+RI7YTqZZGKzgdj5Szyu3NYR/e//FMbiTcEQnv9kVJg3tOwEsMu6wGfDi/CMV52ROogTTf2VCBp9dKqjCVZ9t7+DQu9w9OTaL1bgQhScK4J1Ju2GwxoKWuELmFvqL/ssXDWLLIA1Uk0eW3Z+05kHCNpXGn90id5lojpgNyZQptH5at8EAQ2Phc8v+j7d2Jfk0Sstt0+KKqrsYiDksKdJgOhgK3EJPCMJmisNYEVX3XBt24Kwa0SXQTAW9cbfRNZQZMF93D58mECvFZs/xI3xI5WpzkpJokRNoJiVPvkNU0PSvEWQznh04m7zhUVckBn2Z+unR7s1gizqRJGZlNK1UC5wZ/hjjqRmrh+KTXWTJ8NUhUGXTgx88HBa5o7iRuh5xo6z8IJTYVbUSPboJiPIoNem0SDUV5KBPUpjjoiuZkDS9p/5ljN/wRj6xr8qmEvj4zknk/AY5662tmaJPIo5ywskjtAxeDY+gUo9AGQ5f7D+zr2A5fJD0vMPj9Avr61Y7dYKnEI0XqkFefsWTGDWUCTnhj4xMxctT3+kfRatYnp+dSPegTr+O3gVZccv9O542EiSmyq6sckiQg3TFtC+YkjnltEoQtM41o7o0gSKmad7nAzpzEMTaGl1dZ8axNj9HYCO6ODaHPcwW+2DAkppBPn1a+vugohcNRpiIg0LhXNq2duORkEmV0Nrwzx4g3eoaBtiNgfm9ijz8/5sGFARErlg3BaGSJeFcONvX7sRhDZ0cFOjrLVc9lmq8/Y0NddcXUJGS8VmvAd90BOPxi8omijcNeghs3CtHUNExJKICCgrFktcUjGtWTE5rQ/lcJRLEQE6ug2gozdmy0ZSzKMpLgSb1W2xw8eWomnANUFXHSOJVAQMCpU1U0VyVMRgl68rsYcQkFdbQ1uuRYNQFLWSlO7n4J5eYiZFyPJJipo7bYiF92bcVc0mAy5EDjEQoL8HoFBIICuaVc9cQmjZxRUoAjbz6P+lmV0EBELnTn0sW/WiMCI2FsO3AIh9u7MZ1Ck2M8VtZZ8NPObag0FyJLcbw+VfL/Sc3j2SZts1/D/mNn8av9CmKcdmHDUzG0ZsE87KAo2LC8Hkru0yTQT/JoisQL1HyNKSDbwdE7gNNdV9H5z20M+kMYjUSRJ+TBWlGMxTUWrF5oRVPDPNxL3FnxNtUrLfcWYGxf7l9w9/fdNwFfkEzmSQ9bSEbZw0Wc5CMSU2pdLgOR2bKZSJaTVOPB/DQgx638DXCa5GPagq70zv8A6tjPxTSWuTwAAAAASUVORK5CYII=",GoogleCalendar:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALOSURBVHgB7ZZLSFRRGMf/9+Hc0XHGMl+gmDkaGZWQQ1igKSU9hLRAaBHVolWLIgqhtE2PTRGughbRRkoohUAscaPIGNGDEIMMoTRlkmnUdNK549y5pzN3MM3RvKerjgt/y3POnPub73zfdw5HCCnpGVTbbz2X4fGqADgsNwNuF6Zk+a8xUeBwtjgRF8tTO0Rnr4I7LdOY9JMVEVgMJUjwsH0E/Z4AxOuNMnh+9T4+H+cnL3hEGZ9Coi8RYl1iBnGpBQVbBOSkGXMd7WtFYHJowTmVE5aW2Jsr4LgjBkYIxj8FmXi96Px6Tsyw5HHMxTVGcK9FxoCHwBoL7MoUcP6gCVLMbLPrdaloeBXAsd0iCrIFXfvqlvD6CK489oF2WxzOFzE8TtD8QYHVzOFcqUlbU981jYYuBX7agPbn6RNgkogROZwqMmFHOo/MpPApfv2hou2jokl0flbwqCOAoq0CuvqCYEG3hJkWyNH82eUjvwh8fmDzprDQvhwRd08CCRaeSvjAAlNOhPDKBLXP/PjiViHRX18uN4c3otF32EX0Datghbk6CM2JFBtgT+UxNknwsluBUZgjYYvlUFMR/vd1L/w0EadxwiEiIe7/nwO6I/FthKCu1Y/xKfJnLCuZ16rFPUFgBN2RmJJVNL9X0E8r4jStEg/9cOMbBclWDllJxh5FuiW2pQu4cMiEemcA1U/C78UUG4cbVWatfOeiMgaGKScq6UVWtlNEz5CqneMee2RDyqU3bnuNBSwwJ6ZF4lBo198N9bA2LrBhPIAQXDwgba54DHZLMEKFk8fG0YwF50zb8yD+DDb9c4PO7xvwzsd2xvNxvFUR506OGDcfqYC5qpo9J5aLkID10lWaEHx0cmKuQIhVl5gvoEmkWZKwWkjFByIENIm6yhpYJWOJp0ugpAy22tsRAppESU4hms7cR3ZiBlYKqZQKXLu5oECI31GP2ZCIOoRIAAAAAElFTkSuQmCC",MicrosoftOutlook:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAYAAADud3N8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIASURBVHgB7Ve/T8JAFH60paKi4qRMYCIzZVdhdWJyNv4BxNlJu7ga+QMEZhMDk0wGxVlwxkE3J9FIFCi23js8oAm0x6/GgS+5QC/X++697zX3PTAMI22MCf2zamiVEu/yEwlGhFF7B61cgO/Lc9BKt3ROWA+CrERB3omDW4mBy+vr+64LIyW/+8AJJGre5aCez1BiK7gjUUoub8dB2lTYtMpFipvXrzPQyKehVXmEUYBZWD69QnLVMr0Y1VdK7aRvHOivz53MSP2IkAS1sksfQvC3dWwWc6DbrGcaU1LcHEma91nb9EkhhegUBTEUJmQxmjbEW2kDwIZU8K52SVtPZZrGfnBHYkSHcKcoBlUkD/RaFQQIgKWmS0cpmNvlLmxbMLkEcBAsS46SMk0dJUVNHSedaTpVzDSdKmaaThX/T1O8Q1eSNxO91hBMU6l7Ch949g5hnoxxLmormDRFe+i7eKAT6PrQtqBX4vFIw8DkkfABx8LBMfwQ11ZHv1TMkv8vdF70B6gXEteC1IhJxB+J5Jn5I16YPFIvcLPFxBkdGG0DIydOb5BhwwPQCGofYAcuj4RGDIeRYC1EktjTgmkNr/kWeupk6LYC068V221Fq1K2JBGJXZW34uAhX0FPcapDk5oOQKxru4EqUP2lPxK0q1icA74CFSbRKrJ2kbdV/AUjR8MI6Le0rwAAAABJRU5ErkJggg==",MicrosoftTeams:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAgCAYAAACYTcH3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATJSURBVHgBtVhraBxVFD7nzmy2aczDpl2aRm0EbbWiqBCRICSxPvsjsWAhKkIw4m9/iDZNa15NqoJVEbGKEgVNBKU0sX/aH6aCWI34SKkYtLZNQw1sHqRNw+5mZu7x3nlsZndnNrO76Wkncx/nnvOd7557biYIBUp7z0w9Y9iBBLUEVApAZ7nCPupvrzyCKEZzEIQCpKMnuh8Qe73mBLA/jJDa8ObeDVcgoDDIU/Z1Tzf6AZGCgPcqun4YcpC8menojZ4Qyx9bRY1zRd98aF/VjDPQ1PJLk8L4C0S4SdB3ljG1/+jg/ZNyLm9mRDLUB1BjpFES8FMtP3cy5MNE0Cws1AHSS5y075987qeb8gbT1UUMCUNBdBkWmew3t4zdLPah00Nl6zrCjgLAII8nrp6Lx6+C8yQS14Ao8/Agw/PyLRL6HvBJC87pEflWW1pHaxgqHxBiBIhL+uXLUnJsk2nMatpjl6YuRxiiOalrs1BZGYGy8moIh29wuaELffsrfzQdMX2RkwqewnDW1BH/XxGOdpHwLJLKdkhJEE6fXG0pumGszPFSmIlOQGlZlQsHxRmEdjvd+aLlsYoEE4nKtqZjQaABE5NYVcK5FbHllOy21eecfOeSfWGGG5rb/J/AWX3v6zeOOyOnPmuM60BPiObFNCzvHxt88GOTGcewFUxq9I5jAHffS1fwqrAWUXHLAPlfBzsip72q7/GhuomG1tE7y+LrdwoWNnNgv418Vft7MoQ9z58aEAtb3Y727K6Bu++qSLXkypvuN85APGaYgzZg/fg3OwOdrmyiyi1iLDUvwmEF1JB10G6pXm/2J6eWYHmZm6AMnTuM2GC42vz0h/y27Y9CeF25pyNtWYMLF6dB03Sv6f9EJM+oruiSzHz+5TmLDNHv67wPdtxRAT2HzsDsXCxle5zHHFTksUXfkl5UFILy8hKYm/O8qqp1pJfVbHliJac9D5mJbOnIh0MQQcxy+xCUCWYk5Swt4pV2UleeKk42KPfJIs9il4+YOSMBp4KwoNppYQqXx5x4JogcmFkVjOmIUyYIWAFnzXGTGe4AgOvAjF8tSTLlsMUdZlKT19JZIzAgGUZ3lOCKfMUJt6sxuLfJyR++RttkOkCLgPSI5Xvs1yhEZ2OwtKRZCewGSmBvG6yJqGZMaZQnAYl/Q1//C6k1JR00JStzwWCck2DRTR71xA8AuE7TGoAhmlCFmWtyzx0AkF5DPOpKhg4tB/TnD5pQOakaBr0ltIpFsankhHbyQnLLTN7ED67PN3DSK5zkdi5OySzCrLjfqmA1SSQ0nxkcHx564Fv15PDjU6L3Iqwiu5oOf0JgtHkYglDRRigpjYCiZL+44/GE1/B5hmqzbKgQUDZEbv9CQbXNb768YguEQsW+62OxxN+6vLERt9lDUcHrEYzF3jl6rHFBDuT03fRa9+XvGLDG9HF5VyNTsq4Vv1puO3gg8k9T0w+liU0sdOLTuvl0ncDMmBIublU047RIly25LBMRvy2ByPbIyEOLfno5faqI7+ZL4vWwMD8ZfBUOqMbGVwNpQh6yt2u6RnyW9onb/tksagsiJ7r6D0Teg4BS0F8h2vvndoCutynAakVibhfOr4hnHJGNLumLg+923bqQi73/AbShbrG9bQIvAAAAAElFTkSuQmCC"},oc=function(e){var t=e.adapterName,n=e.integrationName,a=e.userAuthorized,i=e.lastCalendarSync,o=e.integrationType,l=e.userBasedAuth,u=(0,M.Z)().formatMessage,c=f().id,p=(0,r.useState)(a),g=(0,m.Z)(p,2),h=g[0],y=g[1],x=(0,r.useState)(i),b=(0,m.Z)(x,2),S=b[0],C=b[1],T=(0,r.useState)(!1),A=(0,m.Z)(T,2),E=A[0],w=A[1],I=(0,s.useConferenceDetail)({path:{conferenceName:n},query:{userUuid:c,userBasedAuthAttribs:!0,profile:!0}},{enabled:!1,onSuccess:function(e){var t=e.data;h?(0,Je.XA)(u(ac.fetchFreeBusySuccess)):t.userAuthorized&&(0,Je.XA)(u(ac["calendar"===o?"calendarIntegrationConnectSuccess":"vconIntegrationConnectSuccess"])),y(t.userAuthorized),C(t.lastCalendarSync)},onError:function(){(0,Je.Eo)(u(ac.genericError))}}),R=I.refetch,k=I.isRefetching,L=(0,s.useBulkUserDownload)({path:{userUuid:c}},{enabled:!1}).refetch,z=u(ic[t]),D=u(ac["calendar"===o?"calendarSettingsDescription":"vconSettingsDescription"],{adapterName:z}),B=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,L();case 4:w(!1),R(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),w(!1),(0,Je.Eo)(u(ac.genericError));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(E||k)&&(0,d.jsx)(v.A,{}),(0,d.jsxs)(Nd,{children:[(0,d.jsx)(Wd,{src:rc[t]}),(0,d.jsx)(Fd,{children:z}),(0,d.jsx)(Qd,{children:D}),(0,d.jsxs)(Jd,{children:[l?h?(0,d.jsx)(nc,{integrationName:n,onSuccess:function(){(0,Je.XA)(u(ac["calendar"===o?"calendarIntegrationDisconnectSuccess":"vconIntegrationDisconnectSuccess"])),y(!1)}}):(0,d.jsx)(tc,{integrationName:n,onSuccess:R,onFailure:function(e){"INTEGRATIONS_EMAIL_MISMATCH"===e&&(0,Je.Eo)(u(ac.connectError,{adapterName:z}))}}):(0,d.jsxs)(Kd,{children:[(0,d.jsx)(He.NRt,{}),(0,d.jsx)(Vd,{children:u(ac.configurationMessage,{adapterName:z})})]}),"calendar"===o&&l&&h&&(0,d.jsx)(Ti.RH,{content:u(ac.fetchFreeBusy),children:(0,d.jsx)(Y.hU,{size:20,overrides:ec,onClick:B,"data-pendo":"profile/integration-".concat(n,"/user-status"),children:(0,d.jsx)(Ai,{})})})]}),"calendar"===o&&l&&h&&S&&(0,d.jsx)(qd,{children:"".concat(u(ac.LastSyncedTime),": ").concat(q.ou.fromISO(S).toFormat("FFF"))})]})]})},sc=(0,S.vU)({calendarIntegration:{id:"BfEDB2",defaultMessage:[{type:0,value:"Calendar Integration"}]},vConIntegration:{id:"Qfk3I9",defaultMessage:[{type:0,value:"Video Conference Integration"}]}}),lc=function(e){var t=e.title,n=e.children;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ce,{children:t}),(0,d.jsx)(Pd,{children:n})]})},uc=function(e){var t=e.data,n=e.children,a=(0,M.Z)().formatMessage,i=t.ssoIntegration.userSsoEnabled,o=t.calendarIntegrations,s=t.vconIntegrations;return(0,d.jsxs)(ee,{children:[(0,d.jsxs)(te,{children:[(0,d.jsx)(Gd,{ssoEnabled:i}),!!o.length&&(0,d.jsx)(lc,{title:a(sc.calendarIntegration),children:o.map((function(e){return(0,r.createElement)(oc,(0,T.Z)((0,T.Z)({},e),{},{key:e.uuid,integrationType:"calendar"}))}))}),!!s.length&&(0,d.jsx)(lc,{title:a(sc.vConIntegration),children:s.map((function(e){return(0,r.createElement)(oc,(0,T.Z)((0,T.Z)({},e),{},{key:e.uuid,integrationType:"vcon"}))}))})]}),n]})},dc=n(61291),cc=(0,X.zo)("div",(function(){return{display:"flex"}})),pc=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.sizing;return(0,T.Z)((0,T.Z)({},n.Subtitle3),{},{marginRight:a.scale300,paddingTop:"5px"})})),fc=(0,S.vU)({searchLocations:{id:"4bIsxJ",defaultMessage:[{type:0,value:"Search"}]},sort:{id:"hWUWI+",defaultMessage:[{type:0,value:"Sort by"}]},startDate:{id:"5o3GQx",defaultMessage:[{type:0,value:"Start Date (asc.)"}]},"-startDate":{id:"6OQ+Zg",defaultMessage:[{type:0,value:"Start Date (desc.)"}]},locationName:{id:"B35kOe",defaultMessage:[{type:0,value:"Name A-Z"}]},"-locationName":{id:"SxoKcd",defaultMessage:[{type:0,value:"Name Z-A"}]}}),mc=function(e){var t=e.searchTerm,n=e.onSearch,a=e.onSort,i=e.sort,r=(0,M.Z)().formatMessage,o=function(e){return{id:e,label:r(fc[e])}};return(0,d.jsxs)(cc,{children:[(0,d.jsx)(Be.zj,{label:"".concat(r(fc.sort)," ").concat(r(fc[i])),onChange:function(e){return a(e[0].id)},options:Oe.TQ.map(o),overrides:Oe.kw,value:[i].map(o)}),(0,d.jsx)(pt.II,{type:"search",IconAfter:He.olm,placeholder:r(fc.searchLocations),value:t,onChange:n})]})},gc=(0,S.vU)({eventStatus:{id:"TAyvsO",defaultMessage:[{type:0,value:"Status"}]},eventMode:{id:"FK876A",defaultMessage:[{type:0,value:"Mode"}]},dateRange:{id:"7tnHSs",defaultMessage:[{type:0,value:"Date Range"}]},hostingType:{id:"ine31Q",defaultMessage:[{type:0,value:"Hosting Type"}]},actionText:{id:"ZqqKwr",defaultMessage:[{type:0,value:"Filter by"}]}}),vc=function(e){return{id:e,label:e}},hc=function(e){var t=e.filters,n=e.onChange,a=e.eventType,i=(0,M.Z)().formatMessage,r=function(e){return{id:e,label:i(K.n[e])}},o=null!==t&&void 0!==t?t:{},s=o.types,l=void 0===s?[]:s,u=o.statuses,c=void 0===u?[]:u,p=o.modes,f=void 0===p?[]:p,m=o.cities,g=void 0===m?[]:m,v=o.dateInterval,h=void 0===v?"":v;return(0,d.jsxs)(Oe.Px,{children:[(0,d.jsx)(pc,{children:i(gc.actionText)}),"Emeet"!==a&&(0,d.jsx)(Oe.L2,{children:(0,d.jsx)(Ne,{types:l,onChange:function(e){return n({types:e})}})}),(0,d.jsx)(Oe.L2,{children:(0,d.jsx)(Be.QV,{label:i(gc.eventStatus),onChange:function(e){n({statuses:e.map((function(e){return e.id}))})},options:Oe.hm.map(r),overrides:Oe.OD,value:c.map(r)})}),(0,d.jsx)(Oe.L2,{children:(0,d.jsx)(Be.QV,{label:i(gc.eventMode),onChange:function(e){n({modes:e.map((function(e){return e.id}))})},options:Oe.eu.map(r),overrides:Oe.OD,value:f.map(r)})}),(0,d.jsx)(Oe.L2,{children:(0,d.jsx)(Be.rQ,{label:i(gc.dateRange),onChange:function(e){var t,a,i;e=1===(null===(t=e)||void 0===t?void 0:t.length)?[e[0],e[0]]:e,n({dateInterval:null!==(a=null===(i=e)||void 0===i?void 0:i.map((function(e){return q.ou.fromJSDate(e).toISODate()})).join("--"))&&void 0!==a?a:""})},value:h?h.split("--").map((function(e){return new Date(e)})):[],overrides:Oe.L6})}),(0,d.jsx)(Oe.L2,{children:(0,d.jsx)(Oe.jd,{onChange:function(e){n({cities:e.map((function(e){return e.id}))})},value:g.map(vc)})})]})},yc=(0,X.zo)("div",{display:"flex",justifyContent:"space-between",flexWrap:"wrap"}),xc=(0,X.zo)("div",{marginTop:"20px"}),bc=(0,X.w1)(ce,{marginBottom:0}),Zc=(0,X.zo)("div",{marginTop:"20px"}),jc=(0,X.zo)("div",(function(e){var t=e.$isFullMode;return{display:t?"block":"flex",justifyContent:"center",width:"1176px",overflowY:"hidden",marginLeft:"auto",marginRight:"auto","@media screen and (max-width: 1660px)":{width:t?"100%":"882px"},"@media screen and (max-width: 1365px)":{width:t?"100%":"588px"},"@media screen and (max-width: 1040px)":{width:t?"100%":"294px"}}})),Sc=n(5096),Mc=n(44406),Cc=n(71676),Tc=(0,S.vU)({noCampaigns:{id:"LfD6W0",defaultMessage:[{type:0,value:"There are no Events."}]},noInstance:{id:"iPJxPN",defaultMessage:[{type:0,value:"There are no Instances."}]}}),Ac=function(e){var t=e.eventType,n=(0,M.Z)().formatMessage;return(0,d.jsx)(it.Z,{flexGridColumnCount:[1,2,3,5],flexGridColumnGap:"9px",flexGridRowGap:"8px",overrides:Oe.mY,children:(0,d.jsx)(rt.ZP,{children:(0,d.jsx)(Sc.Z,{overrides:(0,Oe.PM)(!1),children:(0,d.jsx)(Mc.Z,{overrides:Oe.QP,aspectRatio:2.5,children:(0,d.jsx)(Cc.Z,{overrides:Oe.wf,children:n("Emeet"===t?Tc.noInstance:Tc.noCampaigns)})})})})})},Ec=n(51191),wc=n(89443),Ic=(0,X.zo)(wc.e,(function(e){var t=e.$theme,n=t.colors,a=t.sizing;return{backgroundColor:n.white,borderTopLeftRadius:a.scale100,borderTopRightRadius:a.scale100,borderBottomLeftRadius:a.scale100,borderBottomRightRadius:a.scale100,":focus":{boxShadow:"0px 10px 20px rgba(216, 216, 216, 0.4)",outline:"none"}}})),Rc=(0,X.zo)(wc.e,(function(e){var t=e.$theme,n=t.colors,a=t.sizing;return{backgroundColor:n.white,borderTopLeftRadius:a.scale100,borderTopRightRadius:a.scale100,borderBottomLeftRadius:a.scale100,borderBottomRightRadius:a.scale100,margin:0,padding:0,width:"100%"}})),kc=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.colors,a=t.typography,i=t.sizing,r=e.$isFullMode;return(0,T.Z)((0,T.Z)({},r?a.HeadingXSmall:a.Paragraph1),{},{marginTop:i.scale300,fontWeight:"normal",color:n.mono700,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})})),Lc=(0,X.zo)("div",(function(e){var t=e.$theme.typography,n=e.$isFullMode;return(0,T.Z)((0,T.Z)({},n?t.HeadingXSmall:t.Subtitle3),{},{lineHeight:n?"30px":"24px",minHeight:n?"60px":"48px",maxHeight:n?"60px":"48px",overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":2})})),zc=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{width:"100%",position:"absolute",bottom:0,left:0,paddingLeft:t.scale600,paddingRight:t.scale600,marginTop:t.scale600,marginBottom:t.scale600,minHeight:t.scale900}})),Dc=(0,X.zo)("div",(function(e){var t=e.$theme,n=t.sizing,a=t.colors;return{position:"absolute",top:0,bottom:0,right:0,left:0,display:"flex",flexDirection:"column",paddingLeft:n.scale600,paddingRight:n.scale600,backgroundColor:a.white,borderBottomLeftRadius:n.scale100,borderBottomRightRadius:n.scale100}})),Bc=(0,X.zo)("div",(function(e){var t=e.$theme.sizing;return{marginTop:t.scale600,marginBottom:t.scale600}})),Oc=(0,S.vU)({add:{id:"cQl/Y8",defaultMessage:[{type:0,value:"Add yourself"}]},remove:{id:"1Rbu0T",defaultMessage:[{type:0,value:"Remove yourself"}]},addOnBehalf:{id:"oMd7mM",defaultMessage:[{type:0,value:"Add"}]},removeOnBehalf:{id:"pGoywN",defaultMessage:[{type:0,value:"Remove"}]},genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]},successAdded:{id:"hBESuD",defaultMessage:[{type:0,value:"User added to instance."}]},successRemoved:{id:"w3S4ns",defaultMessage:[{type:0,value:"User removed from instance."}]}}),Uc=function(e){var t=(0,M.Z)().formatMessage,n=(0,r.useState)(e.isUserMapped),a=(0,m.Z)(n,2),i=a[0],o=a[1],l=(0,r.useState)(!1),u=(0,m.Z)(l,2),p=u[0],g=u[1],v=f().id,h=(0,s.usePortalV2Client)(),y=(0,r.useContext)(c).refetch,x=e.locationId,b=function(){var e=(0,j.Z)((0,Z.Z)().mark((function e(){return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,i?(0,s.addUserToLocation)(h,v,[x]):(0,s.removeUserFromLocation)(h,v,x);case 4:return g(!1),(0,Je.XA)(t(i?Oc.successAdded:Oc.successRemoved)),e.next=8,y();case 8:o(!i),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),g(!1),(0,Je.Eo)(t(Oc.genericError));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),S=f().id,C=(0,W.Pi)().data.id===S;return(0,d.jsx)(Y.zx,{overrides:Oe.Uo,kind:Y.TO.secondary,onClick:b,isLoading:p,children:t(i?C?Oc.add:Oc.addOnBehalf:C?Oc.remove:Oc.removeOnBehalf)})},Pc=(0,S.vU)({bannerAltText:{id:"QdgN+m",defaultMessage:[{type:0,value:"Instance banner appears here"}]}}),Nc=function(e){var t,n,a,i=(0,M.Z)().formatMessage,o=(0,r.useState)(e.location),s=(0,m.Z)(o,2),l=s[0],u=s[1],c=(0,dc.i)().windowWidth,p=l.id,f=l.attributes,g=f.image,v=f.displayName,h=f.address,y=f.startDate,x=f.endDate,b=f.filterStatus,Z=f.mode,j=f.category,S=l.standardFields,C=null!==(t=null===(n=l.relationships)||void 0===n||null===(a=n.actions)||void 0===a?void 0:a.userProfileAction)&&void 0!==t?t:"viewOnly";(0,r.useEffect)((function(){u(e.location)}),[e.location]);var T=e.eventCount<4&&c>1660,A=(0,Ec.A)(l);return(0,d.jsxs)(Sc.Z,{overrides:(0,Oe.PM)(T),children:[(0,d.jsx)(Mc.Z,{overrides:Oe.sF,aspectRatio:2,children:(0,d.jsxs)(Rc,{href:A,children:[g&&(0,d.jsx)(Cc.Z,{overrides:(0,Oe.HV)(T),as:"img",src:g}),!g&&(0,d.jsx)(Cc.Z,{overrides:Oe.dh,children:i(Pc.bannerAltText)})]})}),(0,d.jsx)(Mc.Z,{aspectRatio:T?15/12.4:1,children:(0,d.jsxs)(Dc,{children:[(0,d.jsxs)(Ic,{href:A,children:[(0,d.jsx)(Bc,{children:(0,d.jsx)(Oe.N3,{status:b,mode:Z,category:j})}),(0,d.jsx)(Dt.P,{content:v,showArrow:!0,placement:Ti.r4.top,children:(0,d.jsx)(Lc,{$isFullMode:T,children:v})}),(0,d.jsx)(Dt.P,{content:h,showArrow:!0,children:(0,d.jsx)(kc,{$isFullMode:T,children:h})}),y&&x&&"Emeet"!==l.attributes.subType&&(0,d.jsx)(Dt.P,{content:(0,Bt._Q)((0,Bt.w)(y),(0,Bt.w)(x)),showArrow:!0,children:(0,d.jsx)(kc,{$isFullMode:T,children:(0,Bt._Q)((0,Bt.w)(y),(0,Bt.w)(x))})}),S&&Object.keys(S).map((function(e){return(0,d.jsx)(Dt.P,{content:S[e],showArrow:!0,children:(0,d.jsx)(kc,{$isFullMode:T,children:"".concat(e,": ").concat(S[e])})},e)}))]}),(0,d.jsx)(zc,{children:"viewOnly"!==C&&(0,d.jsx)(Uc,{isUserMapped:"add"===C,locationId:p})})]})})]})},Fc=function(e){var t=e.meta.page,n=e.data,a=e.eventType,i=(0,dc.i)().windowWidth,o=t.total<4&&i>1365,s={justifyContent:"center",alignContent:"center",alignItems:"center",paddingBottom:"24px"};return n.length?(0,d.jsx)(it.Z,{flexGridColumnCount:[o?i>1365?3:1:i<=1040?1:i<=1365?2:t.total<4||i<=1660?3:4],flexGridColumnGap:"24px",overrides:Oe.cY,children:n.map((function(e){return(0,r.createElement)(rt.ZP,(0,T.Z)((0,T.Z)({},s),{},{key:e.id}),(0,d.jsx)(Nc,{location:e,eventCount:t.total}))}))}):(0,d.jsx)(Ac,{eventType:a})},Qc=(0,S.vU)({genericError:{id:"yrtbWL",defaultMessage:[{type:0,value:"Something is not right. Please retry."}]},campaignTitle:{id:"smKLU6",defaultMessage:[{type:0,value:"Events"}]}}),Wc=function(e){var t=e.onNavigate,n=e.isLastItem,a=(0,M.Z)().formatMessage,i=(0,B.yT)().closeDrawer,o=(0,U.bS)(),l=o.app,u=o.platform,c=l===U.fY.Outlook,p=(0,r.useState)(1),g=(0,m.Z)(p,2),v=g[0],h=g[1],y=(0,r.useState)(0),x=(0,m.Z)(y,2),b=x[0],Z=x[1],j=(0,r.useState)(""),S=(0,m.Z)(j,2),C=S[0],A=S[1],E=(0,r.useState)("startDate"),w=(0,m.Z)(E,2),I=w[0],R=w[1],k=(0,r.useState)({types:[],statuses:["Active"],modes:["Live"],dateInterval:"",cities:[],categories:[]}),L=(0,m.Z)(k,2),z=L[0],D=L[1],O=(0,r.useState)(),P=(0,m.Z)(O,2),N=P[0],F=P[1],Q=ht().eventType,W=f();(0,r.useEffect)((function(){h(1)}),[Q]);var H=(0,s.useLocations)({userId:W.id,eventType:"Emeet"===Q?["Emeet"]:z.types.length?z.types:["TradeShow","OngoingSales","StaffScheduling"],onResolve:function(e){var t=e.meta.page;Z(t.total),F(e)}}),$=H.run,q=H.isPending;(0,r.useEffect)((function(){$((0,T.Z)((0,T.Z)((0,T.Z)({},z),z.statuses.length?{}:{statuses:["Active","Past","Requested"]}),{},{sort:I}),{pageNumber:v,pageSize:8,searchTerm:C.trim()})}),[v,C,I,JSON.stringify(z)]);var J=(0,dc.i)().windowWidth;return(0,d.jsxs)(_,{children:[(0,d.jsx)(Ye,{}),(0,d.jsxs)(ee,{children:[(0,d.jsxs)(te,{children:[(0,d.jsxs)(yc,{children:[(0,d.jsx)(bc,{children:Q?"eMeet":a(Qc.campaignTitle)}),(0,d.jsx)(mc,{onSearch:function(e){A(e.target.value),h(1)},searchTerm:C,onSort:function(e){R(e),h(1)},sort:I})]}),(0,d.jsx)(xc,{children:(0,d.jsx)(hc,{filters:z,onChange:function(e){D((function(t){return(0,T.Z)((0,T.Z)({},t),e)})),h(1)},eventType:Q})}),q?(0,d.jsx)(Oe.Kh,{layout:Oe.$X.Grid}):N&&(0,d.jsx)(Zc,{children:(0,d.jsx)(jc,{$isFullMode:b<4&&J>1660,children:(0,d.jsx)(Fc,(0,T.Z)((0,T.Z)({},N),{},{eventType:Q}))})})]}),b&&b>8?(0,d.jsx)(ie,{children:(0,d.jsx)(bn.t,{currentPageNumber:v,currentPageSize:8,kind:bn.T.light,totalItems:b,onPageNumberChange:function(e){h(Math.min(Math.max(e,1),b))}})}):null,n&&"mobile"===u?null:(0,d.jsx)(We,{hasOnlyNext:!0,isLastItem:n,onNext:t,onDone:function(){c?vr(ba.CLOSE_PROFILE):i()},pendoPrefix:"profile/campaigns"})]})]})},Hc=(0,X.zo)("div",(function(e){var t=e.$theme.mediaQuery;return(0,V.Z)({position:"fixed",top:"64px",width:"100%",zIndex:1},t.medium,{height:"calc(100vh - 64px)",width:"auto"})})),$c=["labelKey","children","key"],qc=(0,S.vU)({profile:{id:"1EjoDx",defaultMessage:[{type:0,value:"Profile"}]},topicMapped:{id:"6ab7Jx",defaultMessage:[{type:0,value:"Topics"}]},engagementTypeMapped:{id:"JBu5Kn",defaultMessage:[{type:0,value:"Engagement Types"}]},settings:{id:"XJ14DL",defaultMessage:[{type:0,value:"Settings"}]},availability:{id:"MW8Fkw",defaultMessage:[{type:0,value:"Availability"}]},integrations:{id:"mJ+E4N",defaultMessage:[{type:0,value:"Integrations"}]},events:{id:"m/uFpg",defaultMessage:[{type:0,value:"Event Instances"}]},campaignList:{id:"VQHmzf",defaultMessage:[{type:0,value:"Listing"}]},eMeet:{id:"bOvhJX",defaultMessage:[{type:0,value:"eMeet Instances"}]}}),Jc={profile:function(e){var t=e.onNavigate,n=(0,M.Z)().formatMessage,a=f(),i=(0,r.useState)(!!(0,W.Pi)().meta.eMeetProfileSetupReminded),o=(0,m.Z)(i,2),l=o[0],u=o[1],c=(0,s.useUserForms)({userType:a.attributes.userType}),p=c.error,g=c.isPending,v=c.data,h=(0,r.useMemo)((function(){var e;return null!==(e=null===v||void 0===v?void 0:v.data.map((function(e){return"secondaryEmail"===e.attributes.fieldName?(0,T.Z)((0,T.Z)({},e),{},{attributes:(0,T.Z)((0,T.Z)({},e.attributes),{},{fieldName:"secondaryEmails"})}):e})))&&void 0!==e?e:[]}),[null===v||void 0===v?void 0:v.data]);return p&&(0,Je.Eo)(n(Ao.genericError)),(0,r.useEffect)((function(){"true"===localStorage.getItem("profile.showInEdit")&&(localStorage.removeItem("profile.showInEdit"),u(!1))}),[]),(0,d.jsxs)(_,{children:[(0,d.jsx)(Ye,{}),(0,d.jsxs)(ee,{children:[g&&(0,d.jsx)(te,{children:(0,d.jsx)(To,{})}),!g&&a&&v?l?(0,d.jsx)(Co,{user:a,fields:h,onEditClick:function(){return u(!1)}}):(0,d.jsx)(eo,{user:a,fields:h,onCancel:function(){return u(!0)},onNavigate:t}):null]})]})},integrations:function(e){var t=e.onNavigate,n=f().id,a=(0,s.useUserIntegrations)({query:{userBasedAuthAttribs:!0},path:{userId:n}}),i=a.isLoading,r=a.data,o=a.error,u=a.refetch;return(0,d.jsxs)(_,{children:[(0,d.jsx)(Ye,{}),i&&(0,d.jsx)(_d,{}),o&&(0,d.jsx)(l.a,{onButtonClick:function(){return u()}}),r&&(0,d.jsx)(uc,{data:r.data,children:(0,d.jsx)(We,{onNext:t,hasOnlyNext:!0,pendoPrefix:"profile/integrations"})})]})},availability:function(){var e=(0,s.usePortalV2Client)(),t=(0,M.Z)().formatMessage,n=f(),a=(0,r.useState)(!1),i=(0,m.Z)(a,2),o=i[0],l=i[1],u=(0,s.useQueryClient)(),c=b().location,p=c||{},g=p.subType,h=p.timeZone,y=void 0===h?n.attributes.timeZone:h,x=(0,r.useCallback)((function(e){var t=q.ou.local();e&&(t=t.setZone(e));var n=t,a=n.offsetNameShort,i=n.offsetNameLong;return{timeZoneId:n.zoneName,timeZoneName:i.startsWith("GMT")||"UTC"===i?i:"".concat(a," | ").concat(i)}}),[]),S=(0,r.useState)(x(y)),C=(0,m.Z)(S,2),T=C[0],A=C[1];(0,r.useEffect)((function(){y&&A(x(y))}),[A,x,y]);var E=(0,r.useCallback)(function(){var t=(0,j.Z)((0,Z.Z)().mark((function t(a){return(0,Z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=3;break}return A(a),t.abrupt("return");case 3:return l(!0),t.prev=4,t.next=7,(0,s.updateUserTimeZone)(e,{timeZone:a.timeZoneId},n.id);case 7:A(a),u.invalidateQueries("fetchUser");case 9:return t.prev=9,l(!1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[4,,9,12]])})));return function(e){return t.apply(this,arguments)}}(),[A,n.id,e,u,c]);return(0,d.jsxs)(_,{children:[o&&(0,d.jsx)(v.A,{}),(0,d.jsx)(Ye,{}),(0,d.jsx)(ee,{children:(0,d.jsxs)(El,{children:[(0,d.jsx)(ce,{children:g===H.tw.Jem?(0,d.jsx)(Ms,{title:t(Ud.titleEEvent)}):t(Ud.title)}),(0,d.jsx)(Ss,{timeZone:T,setTimeZone:E}),g===H.tw.Jem?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Il,{children:t(Ud.note,{b:function(e){return(0,d.jsx)("strong",{children:e})}})}),(0,d.jsx)(Od,{timeZoneId:T.timeZoneId,userId:n.id})]}):(0,d.jsx)(_s,{userId:n.id,timeZoneId:T.timeZoneId,children:(0,d.jsx)(Yu,{timeZone:T})})]})})]})},campaigns:function(e){return(0,d.jsx)(Wc,(0,T.Z)({},e))},campaignList:function(e){return(0,d.jsx)(Wc,(0,T.Z)({},e))},engagementTypeMapped:function(e){return(0,d.jsx)(Gn,(0,T.Z)({},e))},topic:function(e){return(0,d.jsx)(ls,(0,T.Z)({},e))},settings:function(e){return(0,d.jsx)(Hi,(0,T.Z)({},e))},eMeet:function(e){return(0,d.jsx)(Wc,(0,T.Z)({},e))},eMeetCampaignList:function(e){return(0,d.jsx)(Wc,(0,T.Z)({},e))},eMeetEngagementTypeMapped:function(e){return(0,d.jsx)(Gn,(0,T.Z)({},e))},eMeetTopicMapped:function(e){return(0,d.jsx)(ls,(0,T.Z)({},e))},eMeetSettings:function(e){return(0,d.jsx)(Hi,(0,T.Z)({},e))}},Kc=new Set(["CSM","MM","JMM"]),Vc=function(){var e,t,n,a,i,s=(0,M.Z)().formatMessage,l=b().eventTypes.data,u=(0,U.bS)().app,c=D(),p=c.isDirty,g=c.setShowConfirmation,v=c.onCloseConfirmation,h=u===U.fY.Outlook,y=f().attributes,x=y.userType,Z=y.canViewAvailability,j=(0,W.Pi)().data.attributes,S=j.role,C=j.eventRole,A=new URLSearchParams(window.location.search).get("setAvailability"),E=new URLSearchParams((0,o.TH)().search).get("location"),w=b().location,I=null===w||void 0===w?void 0:w.subType,k=I===H.tw.Emeet?"campaigns":"eMeet",L=h||E&&I||Z,z=(0,r.useMemo)((function(){return function(e,t,n,a){var i=new URLSearchParams(window.location.search).get("location"),r="CSM"===n||"MM"===n&&!i,o=!Kc.has(a||n);return[{key:"profile",labelKey:"profile"}].concat((0,Q.Z)(t?[]:[{key:"integrations",labelKey:"integrations"},{key:"availability",labelKey:"availability"}]),[(0,T.Z)({key:"campaigns",labelKey:"events"},e?{}:{children:[].concat((0,Q.Z)(r?[{key:"campaignList",labelKey:"campaignList"}]:[]),(0,Q.Z)(t||o?[]:[{key:"engagementTypeMapped",labelKey:"engagementTypeMapped"},{key:"topic",labelKey:"topicMapped"}]),[{key:"settings",labelKey:"settings"}])}),(0,T.Z)({key:"eMeet",labelKey:"eMeet",eventType:"Emeet"},e?{}:{children:[].concat((0,Q.Z)(r?[{key:"eMeetCampaignList",labelKey:"campaignList",eventType:"Emeet"}]:[]),(0,Q.Z)(t||o?[]:[{key:"eMeetEngagementTypeMapped",labelKey:"engagementTypeMapped",eventType:"Emeet"},{key:"eMeetTopicMapped",labelKey:"topicMapped",eventType:"Emeet"}]),[{key:"eMeetSettings",labelKey:"settings",eventType:"Emeet"}])})])}(h,"external"===x,S,C).filter((function(e){return h||(E&&I?e.key!==k:("eMeet"!==e.key||l.includes(H.GM.Emeet))&&("campaigns"!==e.key||l.includes(H.GM.TradeShow)))})).filter((function(e){return"availability"!==e.key||L}))}),[l,k,S,C,h,E,I,x,L]),O=R(),P=O.state.selectedKey,N=void 0===P?L&&A?"availability":E&&!h?"Emeet"===I?"eMeetSettings":"settings":z[0].key:P,$=O.dispatch,q=function(e){$({type:"setSelectedKey",payload:e})},J=(0,r.useState)(!1),K=(0,m.Z)(J,2),V=K[0],X=K[1],G=z.map(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n){var a=n.labelKey,i=n.children,r=n.key,o=(0,F.Z)(n,$c);return(0,T.Z)((0,T.Z)((0,T.Z)({},o),{},{key:r,label:s(qc[a]),isActive:r===N},i?{children:i.map(e(!0))}:{}),t?{isChild:t}:{})}}()),Y=(0,r.useCallback)((function(e){return e.key===N}),[N]),_=G.flatMap((function(e){var t;return null!==(t=e.children)&&void 0!==t?t:[e]}));(0,r.useEffect)((function(){var e=_.findIndex(Y);X(e+1===_.length)}),[Y,_]);var ee=null!==(e=null===(t=G.find(Y))||void 0===t?void 0:t.eventType)&&void 0!==e?e:null===(n=G.filter((function(e){return e.children})).flatMap((function(e){return e.children})).find(Y))||void 0===n?void 0:n.eventType,te=Jc[null===(a=null!==(i=G.find(Y))&&void 0!==i?i:G.filter((function(e){return e.children})).flatMap((function(e){return e.children})).find(Y))||void 0===a?void 0:a.key];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Hc,{children:(0,d.jsx)(B.dy.Nav,{options:G,onOptionSelect:function(e){e.isActive||(p?(v((function(){return function(){return q(e.key)}})),g(!0),"availability"===N&&$({type:"setTempSelectedKey",payload:e.key})):q(e.key))},selectedKey:N})}),(0,d.jsx)(vt,{eventType:ee,children:(0,d.jsx)(te,{onNavigate:function(){var e=_.findIndex(Y);e+1!==_.length&&q(_[e+1].key)},isLastItem:V},N)})]})},Xc=function(){return(0,d.jsx)(I,{children:(0,d.jsx)(z,{children:(0,d.jsx)(p,{children:(0,d.jsx)(N,{children:(0,d.jsx)(x,{children:(0,d.jsx)(Vc,{})})})})})})}},48641:function(e,t,n){n.d(t,{S:function(){return j}});var a=n(55364),i=n(35207),r=n(88108),o=n(28958),s=n(10560),l=n(33028),u={Root:{style:function(e){var t=e.$theme.typography;return(0,l.Z)((0,l.Z)({},t.Paragraph2),{},{minWidth:"98px"})}},ControlContainer:{style:function(e){var t=e.$theme.colors;return{borderLeftStyle:"none",borderRightStyle:"none",borderTopStyle:"none",borderBottomStyle:"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0,backgroundColor:e.$error?t.negative50:t.mono300}}},ValueContainer:{style:function(e){var t=e.$theme.sizing;return{paddingTop:t.scale300,paddingBottom:t.scale300}}},SingleValue:{style:function(e){var t=e.$disabled,n=e.$error,a=e.$isFocused,i=e.$isPseudoFocused,r=e.$theme.colors,o=t?r.inputBorder:n&&a?r.borderFocus:n?r.inputBorderError:a||i?r.borderFocus:"";return(0,l.Z)({display:"flex",alignItems:"center"},o?{backgroundColor:r.primary50,borderBottomColor:o,borderBottomStyle:"solid",borderBottomWidth:"1px",display:"flex",alignItems:"center"}:null)}},Dropdown:{style:function(e){var t=e.$theme.colors;return{outline:"none",maxHeight:"144px",border:"1px solid ".concat(t.mono600)}}},DropdownContainer:{style:{outline:"none",width:"76px"}},DropdownListItem:{style:function(e){var t=e.$theme.sizing;return{paddingLeft:t.scale400,paddingRight:t.scale300}}},Popover:{props:{overrides:{Body:{style:{zIndex:1}}}}},InputContainer:{style:function(e){return{display:"flex",flexBasis:e.$theme.sizing.scale0,flexGrow:1}}}},d=function(e){var t=e.noResultsMsg;return{Select:{props:{overrides:u,noResultsMsg:t}}}},c=n(9930),p=n(8967),f=(0,c.zo)("div",{display:"flex",flexDirection:"row"}),m=(0,c.zo)("div",(function(e){var t=e.$theme,n=t.typography,a=t.colors,i=t.sizing;return(0,l.Z)((0,l.Z)({},n.font300),{},{color:a.negative,marginTop:i.scale200,width:"195px"})})),g=(0,c.zo)(p.hU,(function(e){return{marginLeft:e.$theme.sizing.scale0,minWidth:"26px"}})),v=(0,c.zo)("div",(function(e){var t=e.$theme,n=t.colors,a=t.typography,i=t.sizing,r=e.$hasError;return(0,l.Z)((0,l.Z)({},a.Paragraph2),{},{backgroundColor:r?n.negative50:n.mono300,paddingTop:i.scale300,paddingBottom:i.scale300})})),h=(0,c.zo)("div",(function(e){var t=e.$theme.sizing;return{marginLeft:t.scale200,marginRight:t.scale200,display:"flex",alignItems:"center"}})),y=function(e){return{BaseButton:{style:function(t){var n=t.$theme.colors;return{backgroundColor:e?n.negative50:n.mono300,borderLeftStyle:"none",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderTopRightRadius:"none",borderBottomRightRadius:"none",borderTopLeftRadius:"none",borderBottomLeftRadius:"none"}}}}},x=n(37574),b=function(e){return new Date(e)},Z=(0,a.vU)({to:{id:"bV5Rjv",defaultMessage:[{type:0,value:"to"}]},noResultsMsg:{id:"uutx3V",defaultMessage:[{type:0,value:"Invalid time"}]}}),j=function(e){var t=(0,i.Z)().formatMessage,n=e.start,a=e.end,l=e.error,u=e.onStartChange,c=e.onEndChange,p=e.onDelete,j=t(Z.noResultsMsg);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(f,{children:[(0,x.jsx)(r.Z,{value:b(n),onChange:function(e){return u(e)},creatable:!0,overrides:d({noResultsMsg:j}),error:!!l}),(0,s.a)("medium")?(0,x.jsx)(v,{$hasError:!!l,children:t(Z.to)}):(0,x.jsx)(h,{children:"\u2013"}),(0,x.jsx)(r.Z,{value:b(a),onChange:function(e){return c(e)},creatable:!0,overrides:d({noResultsMsg:j}),error:!!l}),(0,x.jsx)(g,{size:18,overrides:y(l),onClick:function(){return p()},children:(0,x.jsx)(o.rFk,{})})]}),l?(0,x.jsx)(m,{children:l}):null]})}},34831:function(e,t,n){n.d(t,{c1:function(){return o},i4:function(){return r},uJ:function(){return i}});var a=n(55364),i=(0,a.vU)({CSM:{id:"vmm4Q4",defaultMessage:[{type:0,value:"CSM"}]},MM:{id:"5wkjO4",defaultMessage:[{type:0,value:"Meeting Manager"}]},JMM:{id:"1fuZCC",defaultMessage:[{type:0,value:"Junior MM"}]},EA:{id:"RFiShW",defaultMessage:[{type:0,value:"Executive Admin"}]},AM:{id:"vDra0X",defaultMessage:[{type:0,value:"Requestor"}]},EX:{id:"yG8cC6",defaultMessage:[{type:0,value:"Attendee"}]},Partner:{id:"ASj0uP",defaultMessage:[{type:0,value:"Partner"}]},EWSIntegration:{id:"BHlHnp",defaultMessage:[{type:0,value:"EWS Integration"}]},Integration:{id:"LGeXyG",defaultMessage:[{type:0,value:"Integration"}]},SfdcIntegration:{id:"zP0nqc",defaultMessage:[{type:0,value:"Salesforce Integration"}]},ET:{id:"eDXvfa",defaultMessage:[{type:0,value:"External Attendee"}]},SystemUser:{id:"6omTtq",defaultMessage:[{type:0,value:"System User"}]}}),r=(0,a.vU)({allMyAttendees:{id:"T8L0OU",defaultMessage:[{type:0,value:"All Roles"}]}}),o=(0,a.vU)({Monday:{id:"TDliNt",defaultMessage:[{type:0,value:"Monday"}]},Tuesday:{id:"ePJ1d9",defaultMessage:[{type:0,value:"Tuesday"}]},Wednesday:{id:"u6tHwQ",defaultMessage:[{type:0,value:"Wednesday"}]},Thursday:{id:"7WE4tX",defaultMessage:[{type:0,value:"Thursday"}]},Friday:{id:"dnQSA6",defaultMessage:[{type:0,value:"Friday"}]},Saturday:{id:"DVeSOf",defaultMessage:[{type:0,value:"Saturday"}]},Sunday:{id:"guox1q",defaultMessage:[{type:0,value:"Sunday"}]}})},71663:function(e,t,n){n.d(t,{y:function(){return r}});var a=n(96234),i=n(30969),r=function(){var e=(0,i.useState)(!1),t=(0,a.Z)(e,2),n=t[0],r=t[1];return(0,i.useEffect)((function(){var e=function(e){e.preventDefault(),e.returnValue=""};return n?window.addEventListener("beforeunload",e):window.removeEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[n]),r}},21809:function(e,t,n){n.d(t,{Q:function(){return i}});var a=n(30969),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[10,20,50,100],n=(0,a.useMemo)((function(){var n=t.findIndex((function(t){return t>=e}));return t.slice(0,(-1===n?t.length-1:n)+1)}),[t,e]);return n}},32415:function(e,t,n){n.d(t,{z:function(){return m}});var a=n(33028),i=n(96234),r=n(30969),o=n(27924),s=n(67560),l=n.n(s),u=n(9930),d="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BRANCH:"feat/Spike-sfdc-integration",REACT_APP_COMMIT:"511447549",REACT_APP_TIMESTAMP:"Wed, 15 Mar 2023 04:17:01 -0400"}.REACT_APP_CKEDITOR_URL,"?t=MAUD"),c={showParagraphs:!1,showWordCount:!1,showCharCount:!0,countSpacesAsChars:!0,hardLimit:!0},p={toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"styles",groups:["styles"]},{name:"links",groups:["links"]},{name:"clipboard",groups:["undo"]},{name:"forms",groups:["list"]}],extraPlugins:"editorplaceholder, wordcount",removeButtons:"Subscript,Superscript,Anchor,PasteFromWord,PasteText,Paste,Copy,Cut,Styles,Table",format_tags:"p;h1;h2;h3;pre",removeDialogTabs:"image:advanced;link:advanced",linkShowTargetTab:!1,linkShowAdvancedTab:!1,dialog_backgroundCoverColor:"black",skin:"bright",delayIfDetached:!0},f=function(e,t){var n=document.getElementById(e+"_top");n&&(n.style.display=t?"block":"none")},m=function(e){var t=e.placeholder,n=e.input,s=n.value,m=n.onChange,g=n.onFocus,v=n.onBlur,h=e.meta,y=e.showTopBarOnFocus,x=e.config,b=e.maxLength,Z=(0,u.hQ)(),j=(0,i.Z)(Z,2)[1].colors,S=(0,r.useState)(),M=(0,i.Z)(S,2),C=M[0],T=M[1],A=(0,r.useState)(!0),E=(0,i.Z)(A,2),w=E[0],I=E[1],R=(0,o.z$)({editorUrl:d,config:(0,a.Z)((0,a.Z)({},l()(p,x)),{},{editorplaceholder:t,wordcount:(0,a.Z)((0,a.Z)({},c),b?{maxCharCount:b}:null)}),debug:!1,initContent:s,dispatchEvent:function(e){var t=e.type,n=e.payload,a=n.editor.id;t===o.Tr.change&&m(n.editor.getData()),t===o.Tr.focus&&(g(),y&&f(a,!0)),t===o.Tr.blur&&(v(),y&&f(a,!1))},element:C,subscribeTo:["change","focus","blur"]}),k=R.editor,L=R.status,z=R.error;return(0,r.useEffect)((function(){var e={"border-color":h.touched&&h.error?j.negative:h.active?j.primary:j.mono600,"border-style":"solid","border-width":"1px","border-radius":"4px",overflow:"hidden"},t=k&&("loaded"===L||"ready"===L);return t&&k.container.setStyles(e),function(){t&&Object.keys(e).forEach((function(e){k.container.removeStyle(e)}))}}),[k,L,h]),(0,r.useEffect)((function(){if("ready"===L||"loaded"===L){I(!1),k.setData(s),y&&f(k.id,!1);var e=k.container.$;e.querySelector(".cke_bottom").setAttribute("style","border-top: none !important; background: none !important; padding: 0px 8px 2px 0px !important;"),e.querySelector(".cke_bottom .cke_wordcount").style.display="none";var t=e.querySelector(".cke_bottom .cke_resizer");t&&t.setAttribute("style","margin-top: 0")}}),[L]),{editor:k,showLoader:w,setElement:T,editorStyle:"ready"!==L&&"loaded"!==L?{visibility:"hidden"}:void 0,ckeditorError:z}}}}]);
//# sourceMappingURL=683.87e23071.chunk.js.map